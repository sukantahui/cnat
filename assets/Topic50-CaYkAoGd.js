import{j as e}from"./index-BFnLuail.js";import{c as r}from"./clsx-B-dksMZM.js";import{E as t}from"./EditableCCodeBlock-BIH-nUZ3.js";const i="",o=`// error_code_good.c â€“ Checking and handling error codes\r
#include <stdio.h>\r
#include <errno.h>\r
#include <string.h>\r
\r
int main() {\r
    FILE *fp = fopen("nonexistent.txt", "r");\r
    if (fp == NULL) {\r
        // Error: print a helpful message\r
        fprintf(stderr, "Error opening file: %s\\n", strerror(errno));\r
        return 1;  // Exit with error code\r
    }\r
\r
    char buffer[100];\r
    if (fgets(buffer, 100, fp) == NULL) {\r
        fprintf(stderr, "Error reading file: %s\\n", strerror(errno));\r
        fclose(fp);\r
        return 1;\r
    }\r
\r
    printf("First line: %s\\n", buffer);\r
    fclose(fp);\r
    return 0;\r
}`,x=()=>{const n=new Date().getFullYear()-1998;return e.jsxs("div",{className:"min-h-screen bg-white p-6 text-gray-900 transition-colors duration-300 dark:bg-gray-900 dark:text-gray-200",children:[e.jsxs("header",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"mb-2 text-4xl font-extrabold tracking-tight",children:e.jsx("span",{className:"bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent dark:from-orange-400 dark:to-red-400",children:"Returning Error Codes from Functions"})}),e.jsx("p",{className:"mx-auto max-w-2xl text-lg text-gray-600 dark:text-gray-400",children:"Functions can't always succeed. Use error codes to communicate failure clearly and let the caller decide how to respond."})]}),e.jsxs("section",{className:r("mb-12 rounded-xl bg-gray-50 p-6 shadow-md transition-all duration-300 hover:shadow-lg dark:bg-gray-800/50","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"Why Return Error Codes?"}),e.jsx("p",{className:"leading-relaxed",children:"At Barrackpore CNAT, Swadeep wrote a function to read a configuration file. If the file didn't exist, his function crashed the whole program. Abhronila suggested returning an error code instead: 0 for success, nonâ€‘zero for different failures. This lets the caller decide â€“ maybe use defaults, ask the user, or exit gracefully. Error codes are a simple, languageâ€‘agnostic way to handle failures. In C, they're the standard approach because exceptions don't exist."})]}),e.jsx("section",{className:"mb-12 flex justify-center",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-xl bg-gray-100 p-4 dark:bg-gray-800",children:[e.jsxs("svg",{viewBox:"0 0 400 250",className:"w-full",children:[e.jsx("rect",{x:"30",y:"20",width:"100",height:"40",fill:"#3b82f6",rx:"4"}),e.jsx("text",{x:"50",y:"45",fill:"white",fontSize:"12",children:"call function"}),e.jsx("rect",{x:"30",y:"100",width:"100",height:"40",fill:"#f59e0b",rx:"4"}),e.jsx("text",{x:"45",y:"125",fill:"white",fontSize:"10",children:"check error code"}),e.jsx("line",{x1:"80",y1:"140",x2:"200",y2:"180",stroke:"#059669",strokeWidth:"2",markerEnd:"url(#arrowhead)"}),e.jsx("text",{x:"140",y:"160",fill:"#059669",fontSize:"10",children:"0 (success)"}),e.jsx("rect",{x:"200",y:"160",width:"100",height:"40",fill:"#059669",rx:"4"}),e.jsx("text",{x:"220",y:"185",fill:"white",fontSize:"10",children:"use result"}),e.jsx("line",{x1:"80",y1:"100",x2:"80",y2:"60",stroke:"#dc2626",strokeWidth:"2",markerEnd:"url(#arrowhead)"}),e.jsx("text",{x:"90",y:"75",fill:"#dc2626",fontSize:"10",children:"nonâ€‘zero"}),e.jsx("rect",{x:"20",y:"20",width:"100",height:"30",fill:"#dc2626",rx:"4"}),e.jsx("text",{x:"30",y:"40",fill:"white",fontSize:"10",children:"handle error"}),e.jsx("defs",{children:e.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"10",refX:"9",refY:"5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 5, 0 10",fill:"#6b7280"})})})]}),e.jsx("p",{className:"mt-4 text-center text-sm text-gray-600 dark:text-gray-400",children:"Always check error codes immediately after a function call."})]})}),e.jsx("div",{className:"mb-12 grid gap-6 md:grid-cols-1 lg:grid-cols-2",children:[{title:"0 = Success",desc:"By convention, zero indicates success. Nonâ€‘zero values indicate different error types.",icon:"âœ…"},{title:"errno",desc:"Many standard library functions set the global `errno` variable on error, but it's not threadâ€‘safe without care.",icon:"ðŸ“Œ"},{title:"Enum for Errors",desc:"Define an enum with named error codes for clarity and maintainability.",icon:"ðŸ“‹"},{title:"Outâ€‘Parameters",desc:"When a function needs to return both a value and an error code, use a pointer parameter for the value and return the code.",icon:"â†©ï¸"},{title:"Consistency",desc:"All functions in a project should follow the same errorâ€‘reporting convention.",icon:"â™»ï¸"},{title:"Don't Ignore",desc:"Ignoring error codes is a common source of bugs. Always check them.",icon:"ðŸ‘€"}].map((s,a)=>e.jsxs("div",{className:r("group rounded-xl border border-gray-200 bg-white p-5 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:border-orange-300 hover:shadow-md dark:border-gray-700 dark:bg-gray-800 dark:hover:border-orange-600","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]",`motion-safe:animation-delay-${(a+1)*100}ms`),style:{animationDelay:`${(a+1)*100}ms`},children:[e.jsx("div",{className:"mb-3 text-4xl",children:s.icon}),e.jsx("h3",{className:"mb-2 text-xl font-semibold",children:s.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s.desc})]},a))}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"mb-6 text-2xl font-semibold",children:"Error Codes in Practice"}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-1",children:[e.jsxs("div",{className:r("rounded-xl border border-red-200 bg-red-50/50 p-5 transition-all duration-300 hover:shadow-md dark:border-red-900 dark:bg-red-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsxs("h3",{className:"mb-3 flex items-center text-xl font-semibold text-red-700 dark:text-red-400",children:[e.jsx("span",{className:"mr-2",children:"âŒ"})," Ignoring Errors"]}),e.jsx(t,{title:"error_code_bad.c â€“ No error checking",initialCode:i}),e.jsxs("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:["Tuhina calls ",e.jsx("code",{children:"fopen"})," but doesn't check the return value. If the file doesn't exist, the program continues with a NULL file pointer, leading to a crash later."]})]}),e.jsxs("div",{className:r("rounded-xl border border-green-200 bg-green-50/50 p-5 transition-all duration-300 hover:shadow-md dark:border-green-900 dark:bg-green-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","motion-safe:animation-delay-200ms"),style:{animationDelay:"200ms"},children:[e.jsxs("h3",{className:"mb-3 flex items-center text-xl font-semibold text-green-700 dark:text-green-400",children:[e.jsx("span",{className:"mr-2",children:"âœ…"})," Proper Error Handling"]}),e.jsx(t,{title:"error_code_good.c â€“ Check and respond",initialCode:o}),e.jsxs("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:["Debangshu checks the return value of ",e.jsx("code",{children:"fopen"}),", handles the error gracefully (with ",e.jsx("code",{children:"perror"}),"), and exits or takes corrective action."]})]})]})]}),e.jsxs("section",{className:r("mb-12 rounded-xl bg-yellow-50/70 p-6 dark:bg-yellow-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold text-yellow-800 dark:text-yellow-300",children:"âš ï¸ Common Pitfalls"}),e.jsxs("ul",{className:"list-inside list-disc space-y-2 text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Ignoring return values:"})," Calling a function that returns an error code and not checking it."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Inconsistent conventions:"})," Some functions return 0 on success, others return 0 on error. Pick one and stick to it."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Overloading return values:"})," Using the same return channel for both data and error (e.g., returning -1 for error but also valid data can be -1)."]}),e.jsxs("li",{children:[e.jsxs("strong",{children:["Not using ",e.jsx("code",{children:"errno"})," correctly:"]})," Many library functions set ",e.jsx("code",{children:"errno"}),", but it can be overwritten by subsequent calls. Save it immediately."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ignoring partial success:"})," Functions like ",e.jsx("code",{children:"fread"})," ","return the number of items read; check if it matches what you expected."]})]})]}),e.jsxs("section",{className:"mb-12 grid gap-6 md:grid-cols-1",children:[e.jsxs("div",{className:r("rounded-xl bg-blue-50/50 p-5 dark:bg-blue-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h3",{className:"mb-3 text-xl font-semibold text-blue-700 dark:text-blue-300",children:"ðŸ“‹ Do's"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700 dark:text-gray-300",children:[e.jsx("li",{children:"Return 0 for success, nonâ€‘zero for errors."}),e.jsx("li",{children:"Define named constants (enum) for error codes."}),e.jsx("li",{children:"Check error codes immediately after the call."}),e.jsxs("li",{children:["Use ",e.jsx("code",{children:"perror"})," or ",e.jsx("code",{children:"strerror"})," to report errors."]}),e.jsx("li",{children:"Document the possible error codes in the function's comment."})]})]}),e.jsxs("div",{className:r("rounded-xl bg-purple-50/50 p-5 dark:bg-purple-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","motion-safe:animation-delay-200ms"),style:{animationDelay:"200ms"},children:[e.jsx("h3",{className:"mb-3 text-xl font-semibold text-purple-700 dark:text-purple-300",children:"ðŸš« Don'ts"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700 dark:text-gray-300",children:[e.jsx("li",{children:"Ignore error codes."}),e.jsx("li",{children:"Use magic numbers for errors (like -1, -2) without names."}),e.jsx("li",{children:"Return error information via a global variable without caution."}),e.jsxs("li",{children:["Overwrite ",e.jsx("code",{children:"errno"})," before using it."]})]})]})]}),e.jsxs("section",{className:r("mb-12 rounded-xl border border-dashed border-indigo-300 bg-indigo-50/30 p-6 dark:border-indigo-700 dark:bg-indigo-900/10","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-3 text-2xl font-semibold text-indigo-800 dark:text-indigo-300",children:"ðŸ’¡ Hint â€“ Think Like a Pro"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Observe carefully:"})," In the bad example, the program continues with a NULL file pointer. When it tries to read, it crashes. In the good example, the program checks the return and prints a helpful error message. The user knows what went wrong. ",e.jsx("br",{}),e.jsxs("span",{className:"mt-2 block",children:[e.jsx("strong",{children:"Try changing this:"})," Write a function that divides two numbers and returns an error code if the divisor is zero. Have the caller check the code and print an appropriate message."]})]})]}),e.jsxs("section",{className:r("mb-12 rounded-xl bg-emerald-50/50 p-6 dark:bg-emerald-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold text-emerald-800 dark:text-emerald-300",children:"ðŸ§  Tips & Tricks (Professional Edge)"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-1",children:[e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsxs("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:["ðŸ§¹ Use ",e.jsx("code",{children:"errno"})," wisely"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Set ",e.jsx("code",{children:"errno = 0"})," before calling a function that uses it, and check immediately after. Save it if you need it later."]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ·ï¸ Define error enums"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Example: ",e.jsxs("code",{children:["1","enum { ERR_NONE, ERR_FILE_NOT_FOUND, ERR_PERMISSION }",";"]})]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ”„ Consider outâ€‘parameters"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"For functions that need to return both a value and an error, use a pointer parameter for the value and return the error code."})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ« Classroom Shortcut"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"At Naihati CNAT, we practice by writing a small library of file and math functions, always checking and returning error codes."})]})]})]}),e.jsxs("section",{className:r("mb-12 rounded-xl border-l-4 border-orange-500 bg-orange-50/80 p-6 dark:bg-orange-900/30","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","transition-all duration-300 hover:border-l-8 hover:shadow-lg"),children:[e.jsx("h2",{className:"mb-3 text-2xl font-semibold text-orange-800 dark:text-orange-300",children:"ðŸ‘¨â€ðŸ« Teacher's Note â€“ Sukanta Hui"}),e.jsxs("div",{className:"flex flex-wrap items-start gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"mb-2 text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Sukanta Hui"})," (email: sukantahui@codernaccotax.co.in , mobile: 7003756860) has been teaching programming since 1998 â€“ that's ",e.jsxs("strong",{children:[n," years"]})," of experience in C, RDBMS, OS, and web development."]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:`"I've lost count of the bugs caused by ignoring error codes. Students often think 'it won't happen to me'. But files get deleted, disks fill up, users input garbage. Defensive programming means always checking. In professional code, ignoring an error code is a bug. Make it a habit."`})]}),e.jsx("div",{className:"rounded-full bg-orange-200 p-3 dark:bg-orange-800",children:e.jsx("svg",{className:"h-12 w-12 text-orange-700 dark:text-orange-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})]}),e.jsxs("section",{className:"rounded-xl bg-gray-100 p-6 dark:bg-gray-800",children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"âœ… Mini Checklist"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-1",children:["Does every function that can fail return an error code?","Are error codes documented and named (enum)?","Do I check error codes immediately after calling?","Do I handle errors gracefully (retry, notify, exit)?","Do I avoid using magic numbers for errors?"].map((s,a)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"âœ“"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:s})]},a))})]}),e.jsx("style",{children:`
        @keyframes fadeSlideUp {
          0% {
            opacity: 0;
            transform: translateY(20px);
          }
          100% {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})};export{x as default};
