import{j as e}from"./index-BFnLuail.js";import{c as n}from"./clsx-B-dksMZM.js";import{S as i}from"./ShellFileLoader-BgOvPFCh.js";import"./prism-DTsTe1iV.js";const c=`#!/bin/bash
# daily_backup.sh ‚Äì full backup of /home/students
BACKUP_DIR="/backup/student_data"
TIMESTAMP=$(date +%Y%m%d-%H%M%S)
BACKUP_FILE="$BACKUP_DIR/backup-$TIMESTAMP.tar.gz"

mkdir -p "$BACKUP_DIR"
tar -czf "$BACKUP_FILE" /home/students

# Keep only last 7 backups
find "$BACKUP_DIR" -name "backup-*.tar.gz" -mtime +7 -delete

echo "Backup completed: $BACKUP_FILE"`,m=`#!/bin/bash
# cron_wrapper.sh ‚Äì source user profile then run real job
# Use this as the cron command to get a full environment

source "$HOME/.bash_profile" 2>/dev/null || source "$HOME/.profile"

# Now run the actual script with absolute path
/path/to/real_script.sh "$@"`,x=`# m h  dom mon dow   command\r
30 2 * * * /home/abhronila/scripts/daily_backup.sh >> /var/log/backup.log 2>&1\r
\r
# Run every Monday at 9:15 AM\r
15 9 * * 1 /home/tuhina/cleanup.sh\r
\r
# Run at reboot (delayed 2 minutes)\r
@reboot sleep 120 && /home/swadeep/start_service.sh`,h=`#!/bin/bash
# cron_logging.sh ‚Äì demonstrates proper redirection for cron

LOG_DIR="/var/log/myapp"
LOG_FILE="$LOG_DIR/process_data.log"

mkdir -p "$LOG_DIR"

{
    echo "===== Job started at $(date) ====="
    /usr/bin/php /home/projects/import.php
    echo "===== Job finished at $(date) ====="
} >> "$LOG_FILE" 2>&1

# Optional: send email only on error
if [ $? -ne 0 ]; then
    echo "Cron job failed ‚Äì check $LOG_FILE" | mail -s "Cron Failure" admin@example.com
fi`,d=document.createElement("style");d.textContent=`
  @keyframes fadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
  }
  @keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to   { transform: translateY(0); opacity: 1; }
  }
`;document.head.appendChild(d);function f(){const s=new Date().getFullYear()-1998,r="motion-safe:animate-[fadeIn_0.6s_ease-out,slideUp_0.6s_ease-out]";return e.jsx("div",{className:"dark",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 leading-relaxed space-y-14",children:[e.jsxs("header",{className:n(r,"space-y-4"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-12 bg-gradient-to-b from-amber-500 to-orange-400 rounded-full"}),e.jsx("h1",{className:"text-4xl font-light tracking-tight text-gray-800 dark:text-gray-100",children:"Scheduling Scripts with Cron"})]}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 ml-4 border-l-4 border-amber-300 pl-5 italic",children:"‚ÄúLet the machine remember the routine ‚Äì cron is your 24/7 assistant.‚Äù"}),e.jsx(l,{experience:s})]}),e.jsxs(t,{title:"‚è∞ 1. Cron ‚Äì The Time‚ÄëBased Job Scheduler",delay:"100",className:r,children:[e.jsxs("p",{className:"mb-3",children:["Cron is a daemon (",e.jsx("code",{children:"crond"}),") that executes commands at specified times and dates. Every user can have their own ",e.jsx("strong",{children:"crontab"})," (cron table). The system also has a global",e.jsx("code",{children:"/etc/crontab"})," and directories like ",e.jsx("code",{children:"/etc/cron.d/"}),"."]}),e.jsx("p",{className:"mb-4",children:"Debangshu from Ichapur uses cron to back up student projects every night. Tuhina schedules a script that cleans temporary files every Monday."}),e.jsxs("div",{className:"mt-8 p-6 bg-gray-50/80 dark:bg-gray-900/60 rounded-2xl border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow duration-300 group",children:[e.jsxs("h3",{className:"text-lg font-medium mb-5 flex items-center gap-2",children:[e.jsx("span",{className:"text-amber-500",children:"‚è≤Ô∏è"})," Cron schedule visualization"]}),e.jsx(u,{})]})]}),e.jsxs(t,{title:"üìã 2. Crontab Syntax ‚Äì Five Stars of Time",delay:"200",className:r,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-mono text-sm bg-gray-800 text-gray-100 p-3 rounded-md inline-block",children:["‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ minute (0‚Äë59)",e.jsx("br",{}),"‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ hour (0‚Äë23)",e.jsx("br",{}),"‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ day of month (1‚Äë31)",e.jsx("br",{}),"‚îÇ ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ month (1‚Äë12)",e.jsx("br",{}),"‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îå‚îÄ day of week (0‚Äë6, 0=Sunday)",e.jsx("br",{}),"‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ",e.jsx("br",{}),"* * * * *  command to execute"]}),e.jsxs("ul",{className:"mt-4 space-y-1 text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"*"})," ‚Äì any value"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"*/15"})," ‚Äì every 15 units"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"1,15"})," ‚Äì first and fifteenth"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"1-5"})," ‚Äì range (Mon‚ÄëFri)"]})]})]}),e.jsxs("div",{className:"bg-amber-50/30 dark:bg-amber-950/30 p-5 rounded-xl border border-amber-200 dark:border-amber-900 hover:scale-[1.01] transition-transform",children:[e.jsx("h4",{className:"font-semibold text-amber-700 dark:text-amber-300 mb-3",children:"üìò Common shorthand"}),e.jsxs("p",{className:"text-sm",children:[e.jsx("code",{children:"@reboot"})," ‚Äì once at startup",e.jsx("br",{}),e.jsx("code",{children:"@daily"}),"   ‚Äì 0 0 * * *",e.jsx("br",{}),e.jsx("code",{children:"@hourly"}),"  ‚Äì 0 * * * *",e.jsx("br",{}),e.jsx("code",{children:"@weekly"}),"  ‚Äì 0 0 * * 0",e.jsx("br",{}),e.jsx("code",{children:"@monthly"})," ‚Äì 0 0 1 * *"]})]})]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Observe carefully‚Ä¶"})," Days can be specified in two fields: both day-of-month and day-of-week. If both are used, the job runs when ",e.jsx("em",{children:"either"})," condition is true."]})]}),e.jsxs(t,{title:"üõ†Ô∏è 3. Managing Your Crontab",delay:"300",className:r,children:[e.jsxs("ul",{className:"list-disc pl-8 space-y-2 text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{children:[e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:"crontab -e"})," ‚Äì edit your crontab (creates one if missing)"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:"crontab -l"})," ‚Äì list current cron jobs"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:"crontab -r"})," ‚Äì remove your crontab"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:"crontab -u user -l"})," ‚Äì (as root) list another user's crontab"]})]}),e.jsxs("p",{className:"mt-4",children:["The editor is determined by the ",e.jsx("code",{children:"EDITOR"})," or ",e.jsx("code",{children:"VISUAL"})," environment variable. At Naihati school lab, Swadeep sets ",e.jsx("code",{children:"export EDITOR=nano"})," before editing."]})]}),e.jsxs(t,{title:"üåç 4. Cron Environment ‚Äì Not Your Interactive Shell",delay:"400",className:r,children:[e.jsxs("p",{className:"mb-3",children:["Cron runs jobs with a minimal environment: ",e.jsx("code",{children:"PATH=/usr/bin:/bin"}),", no terminal, and none of your ",e.jsx("code",{children:".bashrc"})," or ",e.jsx("code",{children:".profile"})," settings.",e.jsx("span",{className:"block mt-2 text-amber-700 dark:text-amber-400 font-medium",children:"This is the #1 reason cron jobs fail when they work manually."})]}),e.jsx("div",{className:"bg-red-50/50 dark:bg-red-950/30 p-5 rounded-xl border border-red-200 dark:border-red-800",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Solution:"})," Always use ",e.jsx("span",{className:"font-mono",children:"absolute paths"})," for commands and files, or source your profile inside the cron job."]})}),e.jsx(i,{fileModule:m,title:"cron_wrapper.sh ‚Äì safe environment wrapper",highlightLines:[3,4,5,8]})]}),e.jsxs(t,{title:"üíæ 5. Real Example: Automated Backup",delay:"500",className:r,children:[e.jsx("p",{className:"mb-3",children:"Abhronila's script backs up the student records directory. She installed it in cron to run every night at 2:30‚ÄØAM."}),e.jsx(i,{fileModule:c,title:"daily_backup.sh ‚Äì production backup script",highlightLines:[6,9,13,16]}),e.jsxs("p",{className:"mt-4",children:["The corresponding crontab entry (edited with ",e.jsx("code",{children:"crontab -e"}),"):"]}),e.jsx(i,{fileModule:x,title:"crontab entry ‚Äì view with crontab -l",highlightLines:[1],language:"txt"})]}),e.jsxs(t,{title:"üìÑ 6. Don't Lose Output ‚Äì Capture Everything",delay:"600",className:r,children:[e.jsxs("p",{className:"mb-3",children:["Cron emails output to the user by default (if ",e.jsx("code",{children:"MAILTO"})," is set). In modern systems, output may go to ",e.jsx("code",{children:"/var/log/syslog"})," or be discarded.",e.jsx("strong",{children:" Always redirect stdout and stderr to a log file."})]}),e.jsx(i,{fileModule:h,title:"cron_logging.sh ‚Äì proper redirection",highlightLines:[2,5,8]}),e.jsxs("p",{className:"mt-3 text-sm bg-blue-50/50 dark:bg-blue-950/30 p-3 rounded",children:[e.jsx("span",{className:"font-semibold",children:"Pro tip:"})," Set ",e.jsx("code",{children:'MAILTO="your@email.com"'})," at the top of your crontab to receive output only when a job produces stderr. Avoid filling your inbox."]})]}),e.jsxs("div",{className:n(r,"grid md:grid-cols-2 gap-8","[animation-delay:700ms]"),children:[e.jsxs("div",{className:"bg-red-50/50 dark:bg-red-950/30 p-6 rounded-xl border border-red-200 dark:border-red-900 hover:shadow-md transition",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-700 dark:text-red-400 mb-4 flex items-center gap-2",children:"‚ö†Ô∏è Beginner cron traps"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-sm text-gray-800 dark:text-gray-200",children:[e.jsx("li",{children:"‚ùå Using relative paths ‚Äì command not found."}),e.jsxs("li",{children:["‚ùå Assuming ",e.jsx("code",{children:"~/"})," expands ‚Äì it doesn't; use ",e.jsx("code",{children:"$HOME"})," or full path."]}),e.jsxs("li",{children:["‚ùå Forgetting that ",e.jsx("code",{children:"%"})," in command must be escaped (",e.jsx("code",{children:"\\%"}),")."]}),e.jsx("li",{children:"‚ùå No log redirection ‚Äì and then wondering why it failed."}),e.jsx("li",{children:"‚ùå Script runs but never completes ‚Äì no output, stuck."}),e.jsxs("li",{children:["‚ùå Editing the wrong crontab (",e.jsx("code",{children:"crontab -e"})," vs system crontab)."]})]})]}),e.jsxs("div",{className:"bg-green-50/50 dark:bg-green-950/30 p-6 rounded-xl border border-green-200 dark:border-green-900 hover:shadow-md transition",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-700 dark:text-green-400 mb-4 flex items-center gap-2",children:"‚úÖ Professional cron habits"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-sm text-gray-800 dark:text-gray-200",children:[e.jsx("li",{children:"‚ûï Always use absolute paths for commands and files."}),e.jsxs("li",{children:["‚ûï Redirect output: ",e.jsx("code",{children:">> /var/log/myscript.log 2>&1"}),"."]}),e.jsxs("li",{children:["‚ûï Test the script manually with the same minimal environment (",e.jsx("code",{children:"env -i"}),")."]}),e.jsxs("li",{children:["‚ûï Put a wrapper that sources ",e.jsx("code",{children:"~/.profile"})," if needed."]}),e.jsxs("li",{children:["‚ûï Use ",e.jsx("code",{children:"@reboot"})," for startup jobs, not ",e.jsx("code",{children:"/etc/rc.local"}),"."]}),e.jsxs("li",{children:["‚ûï Add a ",e.jsx("code",{children:"MAILTO"})," variable to receive errors."]})]})]})]}),e.jsxs("div",{className:n(r,"bg-amber-50/70 dark:bg-amber-950/40 p-6 rounded-2xl border border-amber-300 dark:border-amber-800","[animation-delay:800ms]"),children:[e.jsx("h3",{className:"text-xl font-medium text-amber-800 dark:text-amber-300 mb-3 flex items-center gap-2",children:"‚úÖ Mini checklist ‚Äì before you install a cron job‚Ä¶"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 text-gray-800 dark:text-gray-200",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-amber-600 dark:text-amber-400",children:"‚ñπ"})," Full paths for every command?"]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-amber-600 dark:text-amber-400",children:"‚ñπ"})," Log file directory exists and writable?"]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-amber-600 dark:text-amber-400",children:"‚ñπ"})," Tested with ",e.jsx("code",{children:"bash -c"})," in clean env?"]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-amber-600 dark:text-amber-400",children:"‚ñπ"})," Does script expect stdin? (cron gives none)"]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-amber-600 dark:text-amber-400",children:"‚ñπ"})," Shebang line present and executable?"]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-amber-600 dark:text-amber-400",children:"‚ñπ"})," Escaped ",e.jsx("code",{children:"%"})," if used in command?"]})]})]}),e.jsx("div",{className:n(r,"mt-6","[animation-delay:900ms]"),children:e.jsx(l,{experience:s,detailed:!0})})]})})}function t({title:a,delay:s,className:r,children:o}){return e.jsxs("section",{className:n(r,"space-y-4",s&&`motion-safe:[animation-delay:${s}ms]`),children:[e.jsx("h2",{className:"text-2xl font-medium text-gray-800 dark:text-gray-100 border-b border-gray-300 dark:border-gray-700 pb-2",children:a}),o]})}function b({children:a}){return e.jsxs("div",{className:"mt-3 p-4 bg-blue-50/60 dark:bg-blue-950/40 rounded-lg border-l-4 border-blue-400 text-sm text-gray-700 dark:text-gray-200 hover:bg-blue-100/70 dark:hover:bg-blue-900/60 transition-colors",children:["üí≠ ",a]})}function l({experience:a,detailed:s=!1}){const r=e.jsxs("div",{className:"p-5 bg-amber-50/70 dark:bg-amber-950/40 rounded-xl border border-amber-300 dark:border-amber-800 hover:shadow-lg transition-shadow group",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-start",children:[e.jsx("div",{className:"bg-amber-200 dark:bg-amber-800 p-3 rounded-full group-hover:scale-110 transition-transform",children:"üßë‚Äçüè´"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-amber-800 dark:text-amber-300 text-lg",children:"Teacher's Note ‚Äì Sukanta Hui"}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-200 mt-1",children:[a," years of experience (since 1998) ‚Ä¢ Programming Languages, RDBMS, OS, Web Dev",e.jsx("br",{}),e.jsx("span",{className:"font-mono text-xs",children:"üìß sukantahui@codernaccotax.co.in"}),e.jsx("span",{className:"mx-2",children:"‚Ä¢"}),e.jsx("span",{className:"font-mono text-xs",children:"üì± 7003756860"})]})]})]}),s&&e.jsx("div",{className:"mt-4 text-sm text-gray-800 dark:text-gray-100 border-t border-amber-200 dark:border-amber-800 pt-4",children:e.jsxs("p",{className:"italic",children:["‚ÄúI always tell my students: cron is unforgiving. It won't tell you ‚Äòcommand not found‚Äô ‚Äì it just fails silently. In 27 years, the most frequent question in my Barrackpore classes is: ‚ÄòWhy doesn't my cron job work?‚Äô The answer is almost always PATH. Start with ",e.jsx("code",{children:"/usr/bin/env bash"})," and absolute paths, and you'll never cry again.‚Äù"]})})]});return s?r:e.jsx("div",{className:"not-prose",children:r})}function u(){return e.jsxs("svg",{width:"100%",height:"100",viewBox:"0 0 700 100",className:"overflow-visible",children:[e.jsx("line",{x1:"50",y1:"50",x2:"650",y2:"50",stroke:"#9ca3af",strokeWidth:"2",strokeDasharray:"4 2"}),[0,6,12,18,24].map((a,s)=>e.jsxs("g",{children:[e.jsx("rect",{x:50+s*150,y:"40",width:"2",height:"20",className:"fill-gray-500 dark:fill-gray-400"}),e.jsxs("text",{x:50+s*150-10,y:"80",className:"fill-gray-600 dark:fill-gray-400 text-[10px]",children:[a,":00"]})]},s)),e.jsx("circle",{cx:"110",cy:"50",r:"10",className:"fill-amber-500 dark:fill-amber-400 stroke-white stroke-2",children:e.jsx("animate",{attributeName:"r",values:"8;12;8",dur:"2s",repeatCount:"indefinite"})}),e.jsx("text",{x:"110",y:"30",className:"fill-amber-600 dark:fill-amber-300 text-[10px] font-medium",textAnchor:"middle",children:"backup"}),e.jsx("circle",{cx:"260",cy:"50",r:"8",className:"fill-emerald-500 dark:fill-emerald-400 stroke-white stroke-2",children:e.jsx("animate",{attributeName:"r",values:"8;12;8",dur:"2.5s",repeatCount:"indefinite"})}),e.jsx("text",{x:"260",y:"20",className:"fill-emerald-600 dark:fill-emerald-300 text-[10px] font-medium",textAnchor:"middle",children:"cleanup"}),e.jsx("circle",{cx:"410",cy:"50",r:"8",className:"fill-indigo-500 dark:fill-indigo-400 stroke-white stroke-2",children:e.jsx("animate",{attributeName:"r",values:"8;12;8",dur:"2.2s",repeatCount:"indefinite"})}),e.jsx("text",{x:"410",y:"20",className:"fill-indigo-600 dark:fill-indigo-300 text-[10px] font-medium",textAnchor:"middle",children:"@reboot"}),e.jsx("circle",{cx:"560",cy:"50",r:"8",className:"fill-rose-500 dark:fill-rose-400 stroke-white stroke-2",children:e.jsx("animate",{attributeName:"r",values:"8;12;8",dur:"1.8s",repeatCount:"indefinite"})}),e.jsx("text",{x:"560",y:"20",className:"fill-rose-600 dark:fill-rose-300 text-[10px] font-medium",textAnchor:"middle",children:"*/15"}),e.jsx("text",{x:"350",y:"95",className:"fill-gray-500 dark:fill-gray-400 text-[11px] italic",textAnchor:"middle",children:"‚óè Jobs pulse when they are scheduled to run"})]})}export{f as default};
