import{r as o,j as e}from"./index-CYFMPjoD.js";import{C as ae}from"./CodeBlock-BzPAPpRv.js";const ie="quizEngine_";function Z(g){const l=[...g];for(let p=l.length-1;p>0;p--){const f=Math.floor(Math.random()*(p+1));[l[p],l[f]]=[l[f],l[p]]}return l}function T(g,l="all",p){if(!Array.isArray(g)||!g.length)return[];let f=[...g];if(l&&l!=="all"){const d=l.toLowerCase(),n=f.filter(h=>h.level&&h.level.toLowerCase()===d);n.length&&(f=n)}const v=Z(f),C=p?Math.min(p,v.length):v.length;return v.slice(0,C).map(d=>{const n=d.options.map((b,c)=>({text:b,originalIndex:c})),h=Z(n),u=h.findIndex(b=>b.originalIndex===d.answerIndex);return{...d,options:h.map(b=>b.text),answerIndex:u}})}function ce({title:g="Quiz Test",questions:l=[],testId:p="test_default",certificateHeader:f="Coder & AccoTax – Premium Computer Training Institute",certificateSubtitle:v="Barrackpore · www.codernaccotax.co.in",certificateTitle:C="Certificate of Completion",showStudentName:B=!0}){const d=ie+p,[n,h]=o.useState([]),[u,b]=o.useState({}),[c,S]=o.useState({}),[w,A]=o.useState(0),[I,E]=o.useState(!1),[$,Q]=o.useState(!1),[G,M]=o.useState(""),[N,H]=o.useState("all"),[j,O]=o.useState(()=>l&&l.length?Math.min(25,l.length):25),[J,y]=o.useState(0),[U,D]=o.useState({}),W=o.useRef([]);o.useEffect(()=>{if(!l||!l.length)return;const t=localStorage.getItem(d);if(t)try{const r=JSON.parse(t),x=r.difficulty||"all",m=r.questionCount||Math.min(25,l.length);H(x),O(m);const a=r.quiz&&r.quiz.length?r.quiz:T(l,x,m);h(a),b(r.responses||{}),S(r.submitted||{}),A(r.score||0),E(r.isFinished||!1),y(0);return}catch{}const s=Math.min(25,l.length);O(s);const i=T(l,"all",s);h(i),y(0)},[l,d]),o.useEffect(()=>{if(!n.length)return;const t={quiz:n,responses:u,submitted:c,score:w,isFinished:I,difficulty:N,questionCount:j};localStorage.setItem(d,JSON.stringify(t))},[n,u,c,w,I,N,j,d]);const Y=t=>{const s=W.current[t];s&&s.scrollIntoView({behavior:"smooth",block:"center"})},q=(t,s,i)=>{c[t]||(b(r=>({...r,[t]:s})),y(i))},ee=(t,s)=>{if(c[t.id])return;u[t.id]===t.answerIndex&&A(r=>r+1),S(r=>{const x={...r,[t.id]:!0};return Object.keys(x).length===n.length&&E(!0),x}),s+1<n.length&&(y(s+1),$||setTimeout(()=>Y(s+1),600))},te=()=>{const t=T(l,N,j);h(t),b({}),S({}),A(0),E(!1),Q(!1),M(""),y(0),D({}),localStorage.removeItem(d)},se=()=>{if(!l||!l.length)return;const t=T(l,N,j);h(t),b({}),S({}),A(0),E(!1),Q(!1),M(""),y(0),D({}),localStorage.removeItem(d)},K=n.filter(t=>c[t.id]&&u[t.id]!==t.answerIndex),le=$?K:n,k=n.length,V=Object.keys(c).length;let F=0,P=0;n.forEach(t=>{c[t.id]&&(u[t.id]===t.answerIndex?F++:P++)});const re=k-F-P,X=k>0?Math.round(V/k*100):0,ne=()=>{if(!n.length)return;const t=G||"Student Name",s=n.length,i=s?(w/s*100).toFixed(2):"0.00",r=new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),x=`
<!DOCTYPE html>
<html>
<head>
<title>${C}</title>
<meta charset="UTF-8" />
<style>
  body { font-family: system-ui; background: #f0f2f5; margin: 0; }
  .page { padding: 40px; display:flex; justify-content:center; }
  .card {
    background:white; padding:40px; max-width:900px; width:100%;
    border-radius:20px; box-shadow:0 20px 50px rgba(0,0,0,0.2);
  }
  h1 { font-size:2rem; text-align:center; font-weight:800; }
  .org { text-align:center; font-weight:700; margin-bottom:10px; }
  .student {
    font-size:1.7rem; font-weight:700; text-align:center; margin-top:20px;
    border-bottom:2px solid #38bdf8; display:inline-block; padding:4px 12px;
  }
  .footer { margin-top:40px; display:flex; justify-content:space-between; }
</style>
</head>
<body>
<div class="page">
<div class="card">

<div class="org">${f}</div>
<div style="text-align:center;color:#555;margin-bottom:20px;">
  ${v}
</div>

<h1>${C}</h1>

<div style="text-align:center;font-size:1rem;margin-top:20px;">
  This is to certify that<br/>
  <span class="student">${t}</span><br/>
  has completed the test: <strong>${g}</strong><br/>
  with a score of <strong>${w}/${s}</strong> (${i}%)
</div>

<div style="text-align:center;margin-top:10px;">Issued on: ${r}</div>

<div class="footer">
  <div>© Coder & AccoTax</div>
  <div style="text-align:right;">
    <div style="border-bottom:1px solid #444;width:150px;margin-left:auto;"></div>
    <div style="font-weight:600;">Sukanta Hui</div>
    <div>Director</div>
  </div>
</div>

</div>
</div>

<script>window.print();<\/script>
</body>
</html>
    `,m=window.open("","_blank");m&&(m.document.write(x),m.document.close())};return n.length?e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-8",children:[e.jsxs("header",{className:"space-y-3 border-b border-slate-800 pb-4",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-sky-300",children:g}),e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between mt-1",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.2em] text-slate-400",children:"Difficulty"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"All"},{key:"beginner",label:"Beginner"},{key:"moderate",label:"Moderate"},{key:"advanced",label:"Advanced"}].map(t=>{const s=N===t.key;return e.jsx("button",{type:"button",onClick:()=>H(t.key),className:`px-3 py-1.5 rounded-full text-xs border transition ${s?"bg-sky-600 text-white border-sky-400":"bg-slate-900 text-slate-300 border-slate-700 hover:bg-slate-800"}`,children:t.label},t.key)})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.2em] text-slate-400",children:"Question Count"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[10,25,50,100,"All"].map(t=>{const s=t==="All"?l.length||n.length||j:t,i=j===s;return e.jsx("button",{type:"button",onClick:()=>O(Math.min(s,l.length||s)),className:`px-3 py-1.5 rounded-full text-xs border transition ${i?"bg-emerald-600 text-white border-emerald-400":"bg-slate-900 text-slate-300 border-slate-700 hover:bg-slate-800"}`,children:t==="All"?"All":t},t)})}),e.jsx("button",{type:"button",onClick:se,className:"mt-2 inline-flex items-center px-4 py-1.5 rounded-full bg-emerald-600 hover:bg-emerald-500 text-white text-xs font-semibold",children:"Apply & Restart"}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Applying settings will restart the test with new random questions."})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"w-full bg-slate-800 h-3 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-sky-500 h-3 transition-all",style:{width:`${X}%`}})}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Progress: ",V,"/",k," | Score: ",w]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx("button",{onClick:te,className:"px-3 py-1 bg-rose-600 hover:bg-rose-500 text-white rounded-lg text-xs",children:"Restart Test"}),!$&&K.length>0&&I&&e.jsx("button",{onClick:()=>Q(!0),className:"px-3 py-1 bg-amber-500 text-white rounded-lg text-xs",children:"Review Incorrect"}),$&&e.jsx("button",{onClick:()=>Q(!1),className:"px-3 py-1 bg-slate-700 text-white rounded-lg text-xs",children:"Exit Review"})]}),I&&e.jsxs("div",{className:"mt-3 p-3 bg-slate-900/60 rounded-xl border border-slate-700 space-y-2",children:[B&&e.jsx("input",{type:"text",placeholder:"Enter student name",value:G,onChange:t=>M(t.target.value),className:"px-3 py-1.5 w-full bg-slate-800 border border-slate-600 text-slate-100 rounded-lg text-sm"}),e.jsx("button",{onClick:ne,className:"px-3 py-1.5 bg-sky-600 hover:bg-sky-500 text-white rounded-lg text-sm font-semibold",children:"Download Certificate"})]})]}),e.jsx("div",{className:"space-y-6",children:le.map(t=>{const s=n.findIndex(a=>a.id===t.id),i=u[t.id],r=c[t.id],x=s===J,m=r&&i===t.answerIndex;return e.jsxs("article",{ref:a=>W.current[s]=a,className:`border border-slate-800 bg-slate-900/60 rounded-2xl p-4 space-y-3 ${x?"ring-1 ring-sky-500/60":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("h3",{className:"font-semibold text-slate-100 text-sm md:text-base",children:[e.jsxs("span",{className:"text-sky-400 mr-2",children:["Q",s+1,"."]}),t.question]}),t.level&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] border border-slate-600 text-slate-300 bg-slate-800",children:t.level.toUpperCase()})]}),t.code&&e.jsx(ae,{code:t.code,language:"javascript"}),e.jsx("div",{className:"space-y-1",children:t.options.map((a,z)=>{const _=`q${t.id}_${z}`,L=i===z;let R="border-slate-700 bg-slate-900/60 hover:bg-slate-800";return r?z===t.answerIndex?R="border-emerald-500 bg-emerald-900/30 text-emerald-300":L&&(R="border-rose-500 bg-rose-900/30 text-rose-300"):L&&(R="border-sky-500 bg-sky-900/30 text-sky-50"),e.jsxs("label",{htmlFor:_,className:`cursor-pointer px-3 py-2 border rounded-lg flex gap-2 text-sm ${R}`,children:[e.jsx("input",{id:_,type:"radio",disabled:r,checked:L,onChange:()=>q(t.id,z,s),className:"mt-0.5 accent-sky-500"}),a]},_)})}),r?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-xs ${m?"text-emerald-400":"text-rose-400"}`,children:[m?"Correct!":"Incorrect."," ","Correct Answer:"," ",e.jsx("span",{className:"font-semibold",children:t.options[t.answerIndex]})]}),t.explanation&&e.jsxs("div",{className:"mt-2",children:[e.jsx("button",{type:"button",onClick:()=>D(a=>({...a,[t.id]:!a[t.id]})),className:"px-3 py-1 text-xs rounded-full bg-slate-800 border border-slate-600 text-slate-200 hover:bg-slate-700",children:U[t.id]?"Hide Explanation":"Show Explanation"}),U[t.id]&&e.jsxs("div",{className:"mt-2 p-3 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-200",children:[e.jsx("strong",{className:"text-sky-400",children:"Explanation:"})," ",t.explanation]})]})]}):e.jsx("button",{onClick:()=>ee(t,s),disabled:u[t.id]==null,className:"px-4 py-2 bg-sky-600 hover:bg-sky-500 disabled:bg-slate-700 disabled:text-slate-400 text-white rounded-lg text-sm",children:"Submit Answer"})]},t.id)})})]}),e.jsxs("aside",{className:"w-full md:w-64 md:sticky md:top-20 space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/80 p-4 space-y-2 text-xs text-slate-200",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.2em] text-slate-400",children:"Test Overview"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"font-semibold",children:k})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Correct"}),e.jsx("span",{className:"font-semibold text-emerald-400",children:F})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Wrong"}),e.jsx("span",{className:"font-semibold text-rose-400",children:P})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Not Attempted"}),e.jsx("span",{className:"font-semibold text-slate-400",children:re})]}),e.jsxs("div",{className:"flex items-center justify-between pt-1 border-t border-slate-800 mt-1",children:[e.jsx("span",{children:"Completed"}),e.jsxs("span",{className:"font-semibold text-sky-400",children:[X,"%"]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/80 p-4 space-y-2 text-xs",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.2em] text-slate-400 mb-1",children:"Question Navigation"}),e.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-8 gap-1.5",children:n.map((t,s)=>{const i=u[t.id],r=c[t.id],x=r&&i===t.answerIndex,m=s===J;let a="text-[11px] h-7 w-7 flex items-center justify-center rounded-full border transition cursor-pointer";return m?a+=" bg-sky-600 text-white border-sky-400":r?x?a+=" bg-emerald-600 text-white border-emerald-400":a+=" bg-rose-600 text-white border-rose-400":i!=null?a+=" bg-amber-500/80 text-white border-amber-400":a+=" bg-slate-800 text-slate-300 border-slate-700",e.jsx("button",{type:"button",className:a,onClick:()=>{y(s),Y(s)},children:s+1},t.id)})}),e.jsxs("div",{className:"mt-2 space-y-1 text-[10px] text-slate-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-sky-600 border border-sky-400"}),e.jsx("span",{children:"Current"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-emerald-600 border border-emerald-400"}),e.jsx("span",{children:"Correct"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-rose-600 border border-rose-400"}),e.jsx("span",{children:"Wrong"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-slate-800 border border-slate-700"}),e.jsx("span",{children:"Not Attempted"})]})]})]})]})]}):e.jsx("p",{className:"text-slate-300 text-sm",children:"Loading…"})}export{ce as P};
