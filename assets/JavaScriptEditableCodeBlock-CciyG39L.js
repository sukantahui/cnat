import{r as reactExports,j as jsxRuntimeExports,B as Braces,L as LayoutList,a as WandSparkles,b as Bug,P as Play,R as RefreshCw,M as Minimize2,c as Maximize2,C as Copy,D as Download,F as Ft}from"./index-meFSU1Lv.js";const JavaScriptEditableCodeBlock=({initialCode="",title=null})=>{const normalize=e=>(e||"").replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\"/g,'"').replace(/\\\\/g,"\\"),[code,setCode]=reactExports.useState(normalize(initialCode)),[error,setError]=reactExports.useState(""),[consoleOutput,setConsoleOutput]=reactExports.useState([]),[editorHeight,setEditorHeight]=reactExports.useState(240),[isFullscreen,setIsFullscreen]=reactExports.useState(!1),[showLineNumbers,setShowLineNumbers]=reactExports.useState(!0),[fontSize]=reactExports.useState(14),[theme]=reactExports.useState("vs-dark"),[showConsole]=reactExports.useState(!0),editorRef=reactExports.useRef(null);reactExports.useEffect(()=>{setCode(normalize(initialCode))},[initialCode]);const handleEditorDidMount=e=>{editorRef.current=e,e.onDidContentSizeChange(()=>{const t=Math.max(e.getContentHeight(),180);setEditorHeight(t),e.layout()})},runCode=()=>{setError(""),setConsoleOutput([]);const captured=[],originalLog=console.log,originalErr=console.error,formatValue=e=>typeof e=="object"?JSON.stringify(e,null,2):String(e);console.log=(...e)=>{captured.push({type:"log",message:e.map(formatValue).join(" ")}),originalLog(...e)},console.error=(...e)=>{captured.push({type:"error",message:e.map(formatValue).join(" ")}),originalErr(...e)};try{eval(code),setConsoleOutput(captured)}catch(e){setError(e.message)}console.log=originalLog,console.error=originalErr},lintCode=()=>{try{new Function(code),setError("No syntax errors ✔️")}catch(e){setError(e.message)}},formatCode=()=>{try{const e=window.prettier,t=window.prettierPlugins?.babel;if(!e||!t){setError("Prettier not loaded");return}const s=e.format(code,{parser:"babel",plugins:[t]});setCode(s),setError("")}catch(e){setError("Format Error: "+e.message)}},resetCode=()=>{setCode(normalize(initialCode)),setError(""),setConsoleOutput([])},downloadCode=()=>{const e=new Blob([code],{type:"text/plain"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="snippet.js",s.click(),URL.revokeObjectURL(t)};return jsxRuntimeExports.jsxs("div",{className:`border border-slate-700 rounded-xl bg-slate-900 ${isFullscreen?"fixed inset-0 z-[9999] p-4":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center bg-slate-800 px-3 py-2 text-xs",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[jsxRuntimeExports.jsx(Braces,{size:14}),title&&jsxRuntimeExports.jsx("span",{className:"font-semibold",children:title})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>setShowLineNumbers(!showLineNumbers),className:"px-2 py-1 bg-indigo-600 rounded text-white flex items-center gap-1",children:[jsxRuntimeExports.jsx(LayoutList,{size:14})," Lines"]}),jsxRuntimeExports.jsxs("button",{onClick:formatCode,className:"px-2 py-1 bg-sky-600 rounded text-white flex items-center gap-1",children:[jsxRuntimeExports.jsx(WandSparkles,{size:14})," Format"]}),jsxRuntimeExports.jsxs("button",{onClick:lintCode,className:"px-2 py-1 bg-amber-600 rounded text-white flex items-center gap-1",children:[jsxRuntimeExports.jsx(Bug,{size:14})," Lint"]}),jsxRuntimeExports.jsxs("button",{onClick:runCode,className:"px-2 py-1 bg-emerald-600 rounded text-white flex items-center gap-1",children:[jsxRuntimeExports.jsx(Play,{size:14})," Run"]}),jsxRuntimeExports.jsxs("button",{onClick:resetCode,className:"px-2 py-1 bg-gray-600 rounded text-white flex items-center gap-1",children:[jsxRuntimeExports.jsx(RefreshCw,{size:14})," Reset"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>setIsFullscreen(!isFullscreen),className:"px-2 py-1 bg-purple-600 rounded text-white flex items-center gap-1",children:[isFullscreen?jsxRuntimeExports.jsx(Minimize2,{size:14}):jsxRuntimeExports.jsx(Maximize2,{size:14}),"Full"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>navigator.clipboard.writeText(code),className:"px-2 py-1 bg-slate-600 rounded text-white flex items-center gap-1",children:[jsxRuntimeExports.jsx(Copy,{size:14})," Copy"]}),jsxRuntimeExports.jsxs("button",{onClick:downloadCode,className:"px-2 py-1 bg-teal-600 rounded text-white flex items-center gap-1",children:[jsxRuntimeExports.jsx(Download,{size:14})," Save"]})]})]}),jsxRuntimeExports.jsx(Ft,{language:"javascript",value:code,onChange:(e="")=>setCode(e),height:editorHeight,theme,onMount:handleEditorDidMount,options:{fontSize,minimap:{enabled:!1},lineNumbers:showLineNumbers?"on":"off",scrollBeyondLastLine:!1,padding:{top:18,bottom:18}}}),error&&jsxRuntimeExports.jsxs("div",{className:"bg-red-900/40 border-t border-red-700 px-3 py-2 text-red-300 text-xs",children:["⚠ ",error]}),showConsole&&jsxRuntimeExports.jsxs("div",{className:"bg-black border-t border-slate-700 px-3 py-2 h-40 overflow-auto text-xs",children:[jsxRuntimeExports.jsx("p",{className:"text-slate-400 mb-1",children:"Console Output:"}),consoleOutput.length===0&&jsxRuntimeExports.jsx("p",{className:"text-slate-600",children:"No output yet."}),consoleOutput.map((e,t)=>jsxRuntimeExports.jsx("pre",{className:`whitespace-pre-wrap ${e.type==="error"?"text-red-400":"text-green-300"}`,children:e.message},t))]})]})};export{JavaScriptEditableCodeBlock as J};
