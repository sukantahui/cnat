import{r as n,j as e}from"./index-lKIIHiz2.js";import{c as h}from"./clsx-B-dksMZM.js";const U=()=>{const[s,l]=n.useState(0),[c,o]=n.useState([]),[d,i]=n.useState(0),[x,g]=n.useState(0);n.useState(()=>{g(t=>t+1)});const a=(t,r,v="info")=>{o(w=>[{id:Date.now(),message:t,value:r,type:v,timestamp:new Date().toLocaleTimeString(),renderCount:x},...w.slice(0,9)])},u=()=>{a("Starting async demonstration...",s,"info"),l(s+1),a(`Called setCounter(${s+1})`,s,"call"),a(`counter value immediately after setCounter: ${s}`,s,"warning"),l(s+2),a(`Called setCounter(${s+2})`,s,"call"),a(`counter value immediately after second setCounter: ${s}`,s,"warning"),setTimeout(()=>{a(`counter value after timeout (re-render complete): ${s}`,s,"success")},0)},b=()=>{a("Starting batching demonstration...",d,"info"),i(t=>(a("First updater function executing",t,"internal"),t+1)),i(t=>(a("Second updater function executing",t,"internal"),t+2)),i(t=>(a("Third updater function executing",t,"internal"),t+3)),a("Called 3 setBatchCounter updates",d,"call"),a(`batchCounter value immediately after calls: ${d}`,d,"warning")},p=()=>{const t=s;a(`Starting with counter: ${t}`,t,"info"),l(s+1),l(s+1),l(s+1),a("Called setCounter 3 times with counter + 1",s,"call"),a(`Expected: ${t+3}, Actual after sync code: ${s}`,s,"warning")},y=()=>{a("Starting functional updates demonstration...",s,"info"),l(t=>{const r=t+1;return a(`First updater: prev=${t}, returning ${r}`,t,"internal"),r}),l(t=>{const r=t+1;return a(`Second updater: prev=${t}, returning ${r}`,t,"internal"),r}),l(t=>{const r=t+1;return a(`Third updater: prev=${t}, returning ${r}`,t,"internal"),r}),a("Called 3 functional updates",s,"call")},j=()=>{a("Starting event handler batching demo...",s,"info"),l(t=>t+10),l(t=>t+20),l(t=>t+30),a("All updates batched in single re-render",s,"info")},f=()=>{a("Starting setTimeout vs sync comparison...",s,"info"),l(s+100),a("Sync update scheduled",s,"call"),setTimeout(()=>{l(t=>t+200),a("setTimeout update executed (not batched)",s,"async")},100)},N=()=>{a("Starting state dependency chain...",s,"info"),l(t=>{const r=t+5;return a(`Step 1: ${t} + 5 = ${r}`,r,"chain"),r}),l(t=>{const r=t*2;return a(`Step 2: ${t} * 2 = ${r}`,r,"chain"),r}),l(t=>{const r=t-10;return a(`Step 3: ${t} - 10 = ${r}`,r,"chain"),r})},m=()=>{l(0),i(0),o([]),a("Reset all demonstrations",0,"reset")},k=()=>{o([])};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 p-4 md:p-8 transition-colors duration-500",children:[e.jsx("style",{jsx:!0,children:`
        @keyframes fadeSlideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes pulseAsync {
          0%, 100% { 
            box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.4);
            border-color: rgba(139, 92, 246, 0.3);
          }
          50% { 
            box-shadow: 0 0 0 10px rgba(139, 92, 246, 0);
            border-color: rgba(139, 92, 246, 0.7);
          }
        }
        
        @keyframes slideInRight {
          from {
            opacity: 0;
            transform: translateX(20px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        
        @keyframes highlight {
          0% { background-color: rgba(59, 130, 246, 0.2); }
          100% { background-color: transparent; }
        }
        
        .log-entry {
          animation: slideInRight 0.3s ease-out;
        }
      `}),e.jsxs("div",{className:"max-w-6xl mx-auto mb-12 animate-[fadeSlideUp_0.8s_ease-out]",style:{animation:"fadeSlideUp 0.8s ease-out"},children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 dark:text-white mb-4 tracking-tight",children:"Why State Updates Are Asynchronous"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 leading-relaxed",children:"Understanding React's update mechanism, batching, and the importance of functional updates"})]}),e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 md:p-8 \r
                     border border-gray-200 dark:border-gray-700\r
                     hover:shadow-xl hover:border-blue-200 dark:hover:border-blue-700\r
                     transition-all duration-300 animate-[fadeSlideUp_0.8s_ease-out_0.1s_both]`,style:{animation:"fadeSlideUp 0.8s ease-out 0.1s both"},children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx("span",{className:`bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 \r
                           rounded-lg p-2 mr-3 text-xl`,children:"üìò"}),"Conceptual Foundation"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-purple-700 dark:text-purple-300 mb-2",children:'What Does "Asynchronous" Mean?'}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["When you call a state setter function (",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1",children:"setCounter"}),"), React ",e.jsx("strong",{children:"doesn't immediately update the state and re-render"}),". Instead, it schedules the update to happen later. This is why you can't read the updated value right after calling the setter."]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-700 dark:text-blue-300 mb-2",children:"Performance Optimization"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),"Batch multiple updates together"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),"Avoid unnecessary re-renders"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),"Schedule updates efficiently"]})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-700 dark:text-green-300 mb-2",children:"Batching"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚Ä¢"}),"Multiple setState calls in one event"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚Ä¢"}),"Single re-render for batch"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚Ä¢"}),"Better performance"]})]})]}),e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-red-700 dark:text-red-300 mb-2",children:"Common Pitfall"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"‚úó"}),"Reading state immediately after setter"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"‚úó"}),"Multiple updates with stale values"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"‚úó"}),"Expecting sync behavior"]})]})]})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border-l-4 border-yellow-500",children:[e.jsx("h3",{className:"font-bold text-yellow-700 dark:text-yellow-300 mb-2",children:"Key Insight"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Think of state setters as ",e.jsx("strong",{children:"scheduling a state change"}),", not immediately changing state. React processes these scheduled changes later, often batching multiple updates together for efficiency."]})]})]})]}),e.jsxs("div",{className:`bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-gray-800 dark:to-gray-900 \r
                     rounded-2xl shadow-lg p-6 md:p-8 border border-purple-100 dark:border-purple-900\r
                     hover:shadow-xl transition-all duration-300 animate-[fadeSlideUp_0.8s_ease-out_0.2s_both]\r
                     motion-safe:animate-[pulseAsync_3s_ease-in-out_infinite]`,style:{animation:"fadeSlideUp 0.8s ease-out 0.2s both"},children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx("span",{className:`bg-gradient-to-r from-purple-500 to-indigo-500 text-white \r
                           rounded-lg p-2 mr-3 text-xl`,children:"‚è±Ô∏è"}),"State Update Timeline"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-1 bg-gradient-to-b from-purple-400 to-blue-400 dark:from-purple-600 dark:to-blue-600"}),e.jsxs("div",{className:"ml-12 space-y-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-8 top-0 w-4 h-4 rounded-full bg-purple-500 border-4 border-white dark:border-gray-800"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"1. Event Occurs"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"User clicks button, form submits, timer fires, etc."}),e.jsx("div",{className:"mt-2 font-mono text-xs bg-gray-100 dark:bg-gray-700 p-2 rounded",children:"onClick, onChange, useEffect, etc."})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-8 top-0 w-4 h-4 rounded-full bg-blue-500 border-4 border-white dark:border-gray-800"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"2. State Setter Called"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1",children:"setState()"})," is invoked. React ",e.jsx("strong",{children:"schedules"})," the update but doesn't execute it immediately."]}),e.jsx("div",{className:"mt-2 font-mono text-xs bg-gray-900 text-green-300 p-2 rounded",children:"setCounter(value) // schedules update"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-8 top-0 w-4 h-4 rounded-full bg-green-500 border-4 border-white dark:border-gray-800"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"3. Batching (If Applicable)"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Multiple state updates in the same event are grouped together. In React 18+, most updates are automatically batched."}),e.jsxs("div",{className:"mt-2 font-mono text-xs bg-gray-900 text-green-300 p-2 rounded",children:["// All these updates get batched:",e.jsx("br",{}),"setCounter(c + 1);",e.jsx("br",{}),"setCounter(c + 2);",e.jsx("br",{}),"setCounter(c + 3);"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-8 top-0 w-4 h-4 rounded-full bg-yellow-500 border-4 border-white dark:border-gray-800"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"4. Reconciliation"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"React processes scheduled updates, calculates new state values, and prepares for re-render."}),e.jsxs("div",{className:"mt-2 font-mono text-xs bg-gray-900 text-green-300 p-2 rounded",children:["// React processes queued updates",e.jsx("br",{}),"// Applies state changes",e.jsx("br",{}),"// Triggers re-render"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-8 top-0 w-4 h-4 rounded-full bg-red-500 border-4 border-white dark:border-gray-800"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"5. Component Re-renders"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Component function executes again with new state values. This is when you see the updated state."}),e.jsxs("div",{className:"mt-2 font-mono text-xs bg-gray-900 text-green-300 p-2 rounded",children:["function Component() ","{",e.jsx("br",{}),"¬†¬†const [counter, setCounter] = useState(0);",e.jsx("br",{}),"¬†¬†// Now counter has new value",e.jsx("br",{}),"}"]})]})]})]})]})]}),e.jsxs("div",{className:`bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-gray-800 dark:to-gray-900 \r
                     rounded-2xl shadow-lg p-6 md:p-8 border border-blue-100 dark:border-blue-900\r
                     hover:shadow-xl transition-all duration-300 animate-[fadeSlideUp_0.8s_ease-out_0.3s_both]`,style:{animation:"fadeSlideUp 0.8s ease-out 0.3s both"},children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx("span",{className:`bg-gradient-to-r from-blue-500 to-cyan-500 text-white \r
                           rounded-lg p-2 mr-3 text-xl`,children:"üéÆ"}),"Interactive Demonstrations"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Current State Values"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300 mb-1",children:"Counter"}),e.jsx("div",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:s}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Updated asynchronously"})]}),e.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/30 rounded-lg",children:[e.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-300 mb-1",children:"Batch Counter"}),e.jsx("div",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:d}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Demonstrates batching"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/30 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 mb-1",children:"Render Count"}),e.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:x}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Times component rendered"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Run Demonstrations"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:u,className:`w-full bg-purple-500 hover:bg-purple-600 text-white py-3 rounded-lg font-medium\r
                           transition-all duration-300 hover:scale-[1.02] active:scale-[0.98]`,children:"Demo: Async Nature"}),e.jsx("button",{onClick:b,className:`w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-medium\r
                           transition-all duration-300 hover:scale-[1.02]`,children:"Demo: Batching"}),e.jsx("button",{onClick:p,className:`w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-medium\r
                           transition-all duration-300 hover:scale-[1.02]`,children:"Demo: Multiple Sync Updates (Problem)"}),e.jsx("button",{onClick:y,className:`w-full bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg font-medium\r
                           transition-all duration-300 hover:scale-[1.02]`,children:"Demo: Functional Updates (Solution)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[e.jsx("button",{onClick:j,className:`bg-indigo-500 hover:bg-indigo-600 text-white py-2 rounded-lg font-medium\r
                           transition-all duration-300`,children:"Event Batching"}),e.jsx("button",{onClick:f,className:`bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded-lg font-medium\r
                           transition-all duration-300`,children:"setTimeout vs Sync"}),e.jsx("button",{onClick:N,className:`bg-teal-500 hover:bg-teal-600 text-white py-2 rounded-lg font-medium\r
                           transition-all duration-300`,children:"State Chain"}),e.jsx("button",{onClick:m,className:`bg-gray-500 hover:bg-gray-600 text-white py-2 rounded-lg font-medium\r
                           transition-all duration-300`,children:"Reset All"})]})]})]}),e.jsxs("div",{className:"mt-8 grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("h4",{className:"font-bold text-red-700 dark:text-red-300 mb-3",children:"‚ùå Problem: Stale State"}),e.jsxs("div",{className:"font-mono text-sm bg-gray-900 text-red-300 p-3 rounded",children:[`const handleClick = () => {
`,e.jsx("span",{className:"text-yellow-300",children:"  // All these use the SAME counter value"}),e.jsx("br",{}),`  setCounter(counter + 1);
`,`  setCounter(counter + 1);
`,`  setCounter(counter + 1);
`,e.jsx("span",{className:"text-yellow-300",children:"  // Result: counter increases by 1, not 3!"}),e.jsx("br",{}),`  console.log(counter); // Still old value!
`,"};"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Each ",e.jsx("code",{children:"setCounter"})," uses the same stale ",e.jsx("code",{children:"counter"})," value"]})]}),e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx("h4",{className:"font-bold text-green-700 dark:text-green-300 mb-3",children:"‚úÖ Solution: Functional Updates"}),e.jsxs("div",{className:"font-mono text-sm bg-gray-900 text-green-300 p-3 rounded",children:[`const handleClick = () => {
`,e.jsx("span",{className:"text-yellow-300",children:"  // Each gets the previous state"}),e.jsx("br",{}),`  setCounter(prev => prev + 1);
`,`  setCounter(prev => prev + 1);
`,`  setCounter(prev => prev + 1);
`,e.jsx("span",{className:"text-yellow-300",children:"  // Result: counter increases by 3 ‚úì"}),e.jsx("br",{}),`  // console.log still shows old value
`,`  // Updated value available on next render
`,"};"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Functional updates receive the pending state value"})]})]})]}),e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 md:p-8 \r
                     border border-gray-200 dark:border-gray-700\r
                     hover:shadow-xl transition-all duration-300 animate-[fadeSlideUp_0.8s_ease-out_0.4s_both]`,style:{animation:"fadeSlideUp 0.8s ease-out 0.4s both"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx("span",{className:`bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 \r
                             rounded-lg p-2 mr-3 text-xl`,children:"üìä"}),"Event Log"]}),e.jsx("button",{onClick:k,className:`px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 \r
                       text-gray-800 dark:text-white rounded-lg transition-all duration-300`,children:"Clear Log"})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto p-2",children:c.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üìù"}),e.jsx("p",{children:"Run demonstrations to see state update logs"}),e.jsx("p",{className:"text-sm mt-2",children:"The log will show what happens during async updates"})]}):c.map(t=>e.jsxs("div",{className:h("log-entry p-4 rounded-lg border transition-all duration-300",t.type==="success"&&"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800",t.type==="warning"&&"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800",t.type==="error"&&"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",t.type==="info"&&"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",t.type==="call"&&"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800",t.type==="internal"&&"bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-700",t.type==="chain"&&"bg-teal-50 dark:bg-teal-900/20 border-teal-200 dark:border-teal-800",t.type==="async"&&"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800",t.type==="reset"&&"bg-gray-100 dark:bg-gray-900 border-gray-300 dark:border-gray-700"),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:t.message}),t.value!==void 0&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Value: ",e.jsx("span",{className:"font-mono",children:t.value})]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.timestamp}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Render: ",t.renderCount]})]})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("div",{className:h("w-3 h-3 rounded-full mr-2",t.type==="success"&&"bg-green-500",t.type==="warning"&&"bg-yellow-500",t.type==="error"&&"bg-red-500",t.type==="info"&&"bg-blue-500",t.type==="call"&&"bg-purple-500",t.type==="internal"&&"bg-gray-500",t.type==="chain"&&"bg-teal-500",t.type==="async"&&"bg-indigo-500",t.type==="reset"&&"bg-gray-600")}),e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-white dark:bg-gray-800",children:t.type.toUpperCase()})]})]},t.id))}),e.jsx("div",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 mr-1"}),"Success"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mr-1"}),"Warning"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-1"}),"Info"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500 mr-1"}),"Function Call"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500 mr-1"}),"Internal"]})]})})]}),e.jsxs("div",{className:`bg-gradient-to-r from-green-50 to-emerald-50 dark:from-gray-800 dark:to-gray-900 \r
                     rounded-2xl shadow-lg p-6 md:p-8 border border-green-100 dark:border-green-900\r
                     hover:shadow-xl transition-all duration-300 animate-[fadeSlideUp_0.8s_ease-out_0.5s_both]`,style:{animation:"fadeSlideUp 0.8s ease-out 0.5s both"},children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx("span",{className:`bg-gradient-to-r from-green-500 to-emerald-500 text-white \r
                           rounded-lg p-2 mr-3 text-xl`,children:"üîÑ"}),"Batching Deep Dive"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"React 17 vs React 18+"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[e.jsx("h4",{className:"font-bold text-yellow-700 dark:text-yellow-300 mb-2",children:"React 17 & Earlier"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"‚Ä¢ Only batched inside React event handlers"}),e.jsx("li",{children:"‚Ä¢ setTimeout, promises, native events: no batching"}),e.jsx("li",{children:"‚Ä¢ Multiple re-renders for async code"}),e.jsx("li",{children:"‚Ä¢ Less performant"})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("h4",{className:"font-bold text-green-700 dark:text-green-300 mb-2",children:"React 18+"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"‚Ä¢ Automatic batching by default"}),e.jsx("li",{children:"‚Ä¢ Batches all updates (mostly)"}),e.jsx("li",{children:"‚Ä¢ setTimeout, promises: also batched"}),e.jsx("li",{children:"‚Ä¢ Single re-render for multiple updates"}),e.jsx("li",{children:"‚Ä¢ Better performance"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Batching Examples"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-900 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Batched in React 18+"}),e.jsxs("div",{className:"font-mono text-green-300 text-sm",children:[`// All batched together
setTimeout(() => {
`,`  setCount(c => c + 1);
`,`  setName('Swadeep');
`,`  setActive(true);
`,"}, 1000);"]})]}),e.jsxs("div",{className:"p-4 bg-gray-900 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Opt-out of Batching"}),e.jsxs("div",{className:"font-mono text-green-300 text-sm",children:[`import { flushSync } from 'react-dom';

`,`flushSync(() => {
`,`  setCount(c => c + 1); // Immediate re-render
`,`});
`,"setName('Tuhina'); // Batched with next update"]})]})]})]})]})]}),e.jsxs("div",{className:`bg-gradient-to-r from-orange-50 to-amber-50 dark:from-gray-800 dark:to-gray-900 \r
                     rounded-2xl shadow-lg p-6 md:p-8 border border-orange-100 dark:border-orange-900\r
                     hover:shadow-xl transition-all duration-300 animate-[fadeSlideUp_0.8s_ease-out_0.6s_both]`,style:{animation:"fadeSlideUp 0.8s ease-out 0.6s both"},children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx("span",{className:`bg-gradient-to-r from-orange-500 to-amber-500 text-white \r
                           rounded-lg p-2 mr-3 text-xl`,children:"üí°"}),"Patterns & Solutions"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-3",children:"When to Use Functional Updates"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚úì"}),"Multiple sequential updates"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚úì"}),"Updates based on previous state"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚úì"}),"In closures (event handlers, timeouts)"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚úì"}),"When state might be stale"]})]})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-3",children:"When Direct Updates Work"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚úì"}),"Single update in event handler"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚úì"}),"Setting to fixed value (not derived)"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚úì"}),"Independent state updates"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚úì"}),"Form resets, clear operations"]})]})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-3",children:"Debugging Async State"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),"Use useEffect to log state changes"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),"Check React DevTools profiler"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),"Add console.log before/after setState"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),"Use functional updates to avoid staleness"]})]})]})]})]}),e.jsxs("div",{className:`bg-gradient-to-r from-red-50 to-pink-50 dark:from-gray-800 dark:to-gray-900 \r
                     rounded-2xl shadow-lg p-6 md:p-8 border border-red-100 dark:border-red-900\r
                     hover:shadow-xl transition-all duration-300 animate-[fadeSlideUp_0.8s_ease-out_0.7s_both]`,style:{animation:"fadeSlideUp 0.8s ease-out 0.7s both"},children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx("span",{className:`bg-gradient-to-r from-red-500 to-pink-500 text-white \r
                           rounded-lg p-2 mr-3 text-xl`,children:"üö´"}),"Common Pitfalls & Misconceptions"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border-l-4 border-red-500",children:[e.jsx("h3",{className:"font-bold text-red-700 dark:text-red-300 mb-2",children:"Reading State Immediately"}),e.jsxs("div",{className:"font-mono text-xs bg-gray-900 text-red-300 p-2 rounded",children:[`const handleClick = () => {
`,`  setCounter(counter + 1);
`,`  console.log(counter); // OLD value!
`,`  sendToAPI(counter); // Sends OLD value!
`,"};"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Solution: Use ",e.jsx("code",{children:"useEffect"})," or read in next render"]})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border-l-4 border-red-500",children:[e.jsx("h3",{className:"font-bold text-red-700 dark:text-red-300 mb-2",children:"Multiple Updates with Same Value"}),e.jsxs("div",{className:"font-mono text-xs bg-gray-900 text-red-300 p-2 rounded",children:[`// Supposed to increment by 3
`,`setCounter(counter + 1);
`,`setCounter(counter + 1); // Same as above!
`,`setCounter(counter + 1); // Same as above!
`,"// Result: +1 not +3"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border-l-4 border-yellow-500",children:[e.jsx("h3",{className:"font-bold text-yellow-700 dark:text-yellow-300 mb-2",children:"Async/Await Confusion"}),e.jsxs("div",{className:"font-mono text-xs bg-gray-900 text-red-300 p-2 rounded",children:[`const handleClick = async () => {
`,`  await fetchData();
`,`  setCounter(counter + 1); // Uses STALE counter!
`,"};"]}),e.jsxs("div",{className:"font-mono text-xs bg-gray-900 text-green-300 p-2 rounded mt-2",children:[`// Solution: use functional update
`,"setCounter(prev => prev + 1);"]})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border-l-4 border-blue-500",children:[e.jsx("h3",{className:"font-bold text-blue-700 dark:text-blue-300 mb-2",children:"setTimeout/setInterval"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Timer callbacks create closures that capture stale state. Always use functional updates or refs in timers."})]})]})]})]}),e.jsxs("div",{className:`bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-gray-800 dark:to-gray-900 \r
                     rounded-2xl shadow-lg p-6 md:p-8 border border-emerald-100 dark:border-emerald-900\r
                     hover:shadow-xl transition-all duration-300 animate-[fadeSlideUp_0.8s_ease-out_0.8s_both]`,style:{animation:"fadeSlideUp 0.8s ease-out 0.8s both"},children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx("span",{className:`bg-emerald-100 dark:bg-emerald-900 text-emerald-600 dark:text-emerald-300 \r
                           rounded-lg p-2 mr-3 text-xl`,children:"üèÜ"}),"Best Practices"]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"1."}),e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"Default to Functional"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Use functional updates by default"})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"2."}),e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"Expect Async"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Never rely on immediate state updates"})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"3."}),e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"Use useEffect"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"For side effects after state changes"})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"4."}),e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"Trust Batching"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Let React optimize re-renders"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[e.jsx("h4",{className:"font-bold text-blue-700 dark:text-blue-300 mb-2",children:"Async State Checklist"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:!0,className:"mr-2"}),"Remember state updates are asynchronous"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:!0,className:"mr-2"}),"Use functional updates for sequential changes"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:!0,className:"mr-2"}),"Never read state immediately after setState"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:!0,className:"mr-2"}),"Use useEffect for side effects after updates"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:!0,className:"mr-2"}),"Understand React 18+ batching behavior"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:!0,className:"mr-2"}),"Use refs for values needed in callbacks"]})]})]})]}),e.jsx("div",{className:`bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-gray-800 dark:to-gray-900 \r
                     rounded-2xl shadow-lg p-6 md:p-8 border border-yellow-200 dark:border-yellow-900\r
                     hover:shadow-xl transition-all duration-300 animate-[fadeSlideUp_0.8s_ease-out_0.9s_both]\r
                     motion-safe:animate-[pulseAsync_3s_ease-in-out_infinite]`,style:{animation:"fadeSlideUp 0.8s ease-out 0.9s both"},children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`bg-yellow-100 dark:bg-yellow-900 text-yellow-600 dark:text-yellow-300 \r
                          rounded-full p-3 mr-4 text-2xl`,children:"üë®‚Äçüè´"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Teacher's Note"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Sukanta Hui ‚Ä¢ 27 years experience ‚Ä¢ sukantahui@codernaccotax.co.in"}),e.jsxs("div",{className:"space-y-4 text-gray-700 dark:text-gray-300",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Think of it this way:"})," When Swadeep from Barrackpore submits his assignment, the teacher doesn't grade it immediately. The teacher collects all assignments, then grades them in batches. React does the same with state updates - collects them, then processes efficiently."]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800/50 rounded-lg border-l-4 border-blue-500",children:[e.jsx("h4",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"Pro Tips:"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsx("strong",{children:"Functional updates are your friend:"})," They solve 90% of async state problems"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsx("strong",{children:"Embrace the async model:"})," It's what makes React performant"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsx("strong",{children:"Debug with useEffect:"})," Perfect for logging state changes"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsx("strong",{children:"Remember closures:"})," Event handlers capture state at creation time"]})]})]}),e.jsx("p",{className:"text-sm italic text-gray-600 dark:text-gray-400",children:`"When Tuhina from Shyamnagar clicks a button three times quickly, React doesn't re-render three times. It batches the updates and re-renders once. This is smart engineering, not a bug. Understanding this will save you hours of debugging!"`})]})]})]})}),e.jsxs("div",{className:`bg-gradient-to-r from-indigo-50 to-violet-50 dark:from-gray-800 dark:to-gray-900 \r
                     rounded-2xl shadow-lg p-6 md:p-8 border border-indigo-100 dark:border-indigo-900\r
                     hover:shadow-xl transition-all duration-300 animate-[fadeSlideUp_0.8s_ease-out_1s_both]`,style:{animation:"fadeSlideUp 0.8s ease-out 1s both"},children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx("span",{className:`bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-300 \r
                           rounded-lg p-2 mr-3 text-xl`,children:"üí°"}),"Thinking Exercises"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"Think about..."}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Why would React choose async updates? What performance benefits does batching provide in a complex application?"})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"Observe carefully..."}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:'Run the "Multiple Sync Updates" demo and watch the render count. How many re-renders occur? Now run the "Functional Updates" demo. Any difference?'})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white mb-2",children:"Try implementing..."}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Create a counter that increments every second using setInterval. Notice how it behaves. Now fix it using functional updates or refs."})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:m,className:`bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 \r
                     text-white px-8 py-3 rounded-full font-medium shadow-lg hover:shadow-xl\r
                     transition-all duration-300 hover:scale-105 active:scale-95`,children:"Reset All Demonstrations"})})]}),e.jsx("div",{className:"max-w-6xl mx-auto mt-12 pt-8 border-t border-gray-200 dark:border-gray-800",children:e.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 text-sm",children:"Next: Learn about Functional Updates with useState in Detail"})})]})};export{U as default};
