import{r as x,j as e,F as f,T as b,R as w,C as y,D as j,P as C,M as S,b as v,d as M,e as k}from"./index-DmMPx_vc.js";import{A as E}from"./arrow-up-right-Bn8SN-pJ.js";let h=null;async function N(){return h||(h=new Promise((l,t)=>{const s=document.createElement("script");s.src="/wasm/tcc.js",s.async=!0,s.onload=()=>{typeof window.Module<"u"?l(window.Module):typeof window.createTccModule=="function"?window.createTccModule().then(i=>l(i)).catch(t):t(new Error("tcc.js loaded, but no Module or createTccModule() found. Check WASM build docs."))},s.onerror=()=>{t(new Error("Failed to load /wasm/tcc.js"))},document.head.appendChild(s)})),h}async function R(l){const t=await N(),s="/program.c";try{t.FS.writeFile(s,l)}catch{throw new Error("WASM FS is not available. Check your TinyCC/Clang WASM build and Emscripten FS settings.")}let i="",a="";const o=t.print,d=t.printErr;t.print=n=>{i+=n+`
`},t.printErr=n=>{a+=n+`
`};try{if(typeof t.ccall!="function")throw new Error("Module.ccall is not available â€“ Emscripten runtime missing.");const n=t.ccall("run_main","number",["string"],[s]);n!==0&&!a&&(a+=`Program exited with code ${n}
`)}catch(n){a+=`WASM runtime error: ${n.message||String(n)}
`}finally{t.print=o,t.printErr=d}return{stdout:i.trim(),stderr:a.trim()}}class m extends x.Component{constructor(t){super(t),this.state={code:this.normalize(t.initialCode||""),fontSize:14,theme:"vs-dark",isFullscreen:!1,showFontMenu:!1,showThemeMenu:!1,editorHeight:240,isRunning:!1,outputLines:[],runtimeError:""},this.editorRef=null,this.monaco=null}normalize=t=>t.replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\"/g,'"').replace(/\\\\/g,"\\");handleEditorDidMount=(t,s)=>{this.editorRef=t,this.monaco=s,this.updateEditorHeight(),this.applyTheme(this.state.theme),t.onDidContentSizeChange(()=>this.updateEditorHeight())};updateEditorHeight=()=>{if(!this.editorRef)return;const t=Math.max(this.editorRef.getContentHeight(),180);this.setState({editorHeight:t},()=>{this.editorRef.layout()})};applyTheme=t=>{this.monaco&&this.monaco.editor.setTheme(t)};resetCode=()=>{this.setState({code:this.normalize(this.props.initialCode||""),outputLines:[],runtimeError:""})};downloadCode=()=>{const t=new Blob([this.state.code],{type:"text/plain"}),s=URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download="program.c",i.click(),URL.revokeObjectURL(s)};handleRun=async()=>{const{code:t}=this.state;this.setState({isRunning:!0,outputLines:[],runtimeError:""});try{const s=await R(t),i=[];s.stdout&&i.push({type:"out",text:s.stdout}),s.stderr&&i.push({type:"err",text:s.stderr}),this.setState({outputLines:i})}catch(s){this.setState({runtimeError:s?.message||String(s)})}finally{this.setState({isRunning:!1})}};render(){const{code:t,fontSize:s,theme:i,isFullscreen:a,showFontMenu:o,showThemeMenu:d,editorHeight:n,isRunning:c,outputLines:p,runtimeError:u}=this.state;return e.jsxs("div",{className:`border border-slate-700 rounded-xl bg-slate-900 overflow-visible ${a?"fixed inset-0 z-[9999] p-4":""}`,children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between bg-slate-800 px-3 py-2 text-xs relative",children:[e.jsxs("span",{className:"text-slate-400 font-semibold flex items-center gap-2",children:[e.jsx(f,{size:14})," C Code Editor (WebAssembly Enabled)"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>this.setState({showFontMenu:!o}),className:"px-2 py-1 rounded bg-blue-600 text-white flex items-center gap-1",children:[e.jsx(b,{size:14})," Font"]}),o&&e.jsx("div",{className:"absolute right-0 mt-1 w-32 bg-slate-800 border border-slate-700 rounded-lg shadow-xl p-1 text-xs z-[9999]",children:[12,14,16,18,20,22].map(r=>e.jsxs("button",{onClick:()=>this.setState({fontSize:r,showFontMenu:!1}),className:`w-full px-2 py-1 rounded text-left ${s===r?"bg-sky-600 text-white":"text-slate-300 hover:bg-slate-700"}`,children:[r,"px"]},r))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>this.setState({showThemeMenu:!d}),className:"px-2 py-1 rounded bg-yellow-600 text-white",children:"ðŸŽ¨ Theme"}),d&&e.jsx("div",{className:"absolute right-0 mt-1 w-44 bg-slate-800 border border-slate-700 rounded-lg shadow-xl p-1 text-xs z-[9999]",children:[{id:"vs-dark",label:"VSCode Dark"},{id:"vs",label:"VSCode Light"},{id:"dracula",label:"Dracula"},{id:"solarized-dark",label:"Solarized Dark"},{id:"solarized-light",label:"Solarized Light"},{id:"github-dark",label:"GitHub Dark"}].map(r=>e.jsx("button",{onClick:()=>{this.applyTheme(r.id),this.setState({theme:r.id,showThemeMenu:!1})},className:`w-full px-2 py-1 rounded text-left ${i===r.id?"bg-sky-600 text-white":"text-slate-300 hover:bg-slate-700"}`,children:r.label},r.id))})]}),e.jsxs("button",{onClick:this.resetCode,className:"px-2 py-1 rounded bg-gray-600 text-white flex items-center gap-1",children:[e.jsx(w,{size:14})," Reset"]}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(t),alert("Copied!")},className:"px-2 py-1 rounded bg-slate-600 text-white flex items-center gap-1",children:[e.jsx(y,{size:14})," Copy"]}),e.jsxs("button",{onClick:this.downloadCode,className:"px-2 py-1 rounded bg-teal-600 text-white flex items-center gap-1",children:[e.jsx(j,{size:14})," Save"]}),e.jsxs("button",{onClick:this.handleRun,disabled:c,className:`px-2 py-1 rounded text-white flex items-center gap-1 ${c?"bg-emerald-900 cursor-wait":"bg-emerald-600 hover:bg-emerald-500"}`,children:[e.jsx(C,{size:14}),c?"Running...":"Run (WASM)"]}),e.jsxs("button",{onClick:()=>this.setState(r=>({isFullscreen:!r.isFullscreen}),()=>this.editorRef?.layout()),className:"px-2 py-1 rounded bg-purple-600 text-white flex items-center gap-1",children:[a?e.jsx(S,{size:14}):e.jsx(v,{size:14}),"Full"]})]})]}),e.jsx(M,{language:"cpp",value:t,onChange:(r="")=>this.setState({code:String(r)}),height:n,theme:i,onMount:this.handleEditorDidMount,options:{fontSize:s,minimap:{enabled:!1},automaticLayout:!0,scrollBeyondLastLine:!1,padding:{top:18,bottom:18}}}),e.jsxs("div",{className:"bg-black border-t border-slate-700 px-3 py-2 text-xs h-40 overflow-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 mb-1",children:[e.jsx(k,{size:12}),e.jsx("span",{children:"Program Output"})]}),u&&e.jsxs("pre",{className:"text-red-400 whitespace-pre-wrap mb-2",children:["Runtime Error: ",u]}),p.length===0&&!u&&e.jsx("p",{className:"text-slate-600",children:"No output yet. Click â€œRun (WASM)â€."}),p.map((r,g)=>e.jsx("pre",{className:`whitespace-pre-wrap ${r.type==="err"?"text-red-400":"text-green-300"}`,children:r.text},g))]})]})}}m.defaultProps={initialCode:`#include <stdio.h>

int main() {
    printf("Hello, C from Coder & AccoTax!\\n");
    return 0;
}
`};class F extends x.Component{render(){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-sky-300",children:"Structure of a Basic C Program"}),e.jsxs("p",{className:"text-slate-300 text-sm leading-relaxed",children:["Every C program follows a standard structure that includes:",e.jsx("strong",{children:" header files, main function, statements, and return value."})]}),e.jsxs("a",{href:"/play",target:"_blank",rel:"noopener noreferrer",className:"text-sky-400 flex items-center gap-2 font-semibold hover:text-sky-300 transition",children:["Try in Playground ",e.jsx(E,{size:18})]}),e.jsx(m,{initialCode:`#include <stdio.h>

int main() {
    printf("Hello, C!\\n");
    return 0;
}`}),e.jsx("h3",{className:"text-lg text-slate-200 font-semibold",children:"Program Breakdown"}),e.jsxs("ul",{className:"list-disc pl-6 text-slate-400 text-sm space-y-1",children:[e.jsxs("li",{children:[e.jsx("code",{children:"#include <stdio.h>"})," â†’ imports standard input/output functions"]}),e.jsxs("li",{children:[e.jsx("code",{children:"int main()"})," â†’ entry point of every C program"]}),e.jsxs("li",{children:[e.jsx("code",{children:"printf()"})," â†’ prints text to the screen"]}),e.jsxs("li",{children:[e.jsx("code",{children:"return 0;"})," â†’ indicates successful program execution"]})]})]})}}export{F as default};
