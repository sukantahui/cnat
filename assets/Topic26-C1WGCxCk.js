import{r,j as e}from"./index-Do7ncMju.js";import{c}from"./clsx-B-dksMZM.js";const O=()=>{const[m,p]=r.useState(0),[v,x]=r.useState(0),[E,h]=r.useState("initial"),[b,y]=r.useState([]),[i,j]=r.useState(0),[u,C]=r.useState(!1),[d,T]=r.useState("functional"),[N,k]=r.useState(null),[L,R]=r.useState(null),[g,f]=r.useState([]),l=r.useRef(null);r.useRef(null);const o=r.useRef(null),a=(t,s,n="gray")=>{const A=performance.now().toFixed(2);y(_=>[..._,{id:Date.now(),stage:t,description:s,timestamp:parseFloat(A),color:n,componentType:d}].slice(-15))};r.useEffect(()=>{const t=performance.now(),s=l.current?(t-l.current).toFixed(2):"N/A";if(a("effect",`useEffect with [] ran (mount) - ${s}ms after render`,"green"),x(n=>n+1),h("mounted"),o.current){const n=(t-o.current).toFixed(2);k(n),a("complete",`Component fully mounted in ${n}ms`,"blue")}return()=>{a("cleanup","Cleanup from mount effect ran (unmount)","red"),f(n=>[...n,"Mount effect cleanup"])}},[]),r.useEffect(()=>{const t=performance.now(),s=l.current?(t-l.current).toFixed(2):"N/A";return a("effect",`useEffect with [dependency] ran - ${s}ms after render`,"purple"),x(n=>n+1),document.title=`Dependency: ${i} | Timing Demo`,()=>{a("cleanup","Cleanup from dependency effect ran","orange"),f(n=>[...n,`Dependency ${i} cleanup`]),document.title="React App"}},[i]),r.useEffect(()=>{const t=performance.now(),s=l.current?(t-l.current).toFixed(2):"N/A";return a("effect",`useEffect without deps ran - ${s}ms after render`,"yellow"),()=>{a("cleanup","Cleanup from no-deps effect ran","pink")}}),r.useEffect(()=>{if(l.current){const t=(performance.now()-l.current).toFixed(2);a("render",`Render #${m} completed in ${t}ms`,"blue")}}),r.useEffect(()=>(o.current=performance.now(),a("start","Component started mounting","green"),()=>{a("unmount","Component unmounting started","red")}),[]);const S=()=>{l.current=performance.now(),p(t=>t+1),h("updating"),a("trigger","Render triggered via button click","indigo")},D=()=>{j(t=>t+1),a("state",`State updated: dependency = ${i+1}`,"teal")},M=()=>{y([]),p(0),x(0),j(0),f([]),k(null),R(null),h("initial"),a("reset","Timeline reset to initial state","gray")},U=()=>{T(t=>t==="functional"?"unmounted":"functional"),d==="functional"?a("unmount","Component unmounted (simulated)","red"):(a("mount","Component mounted (simulated)","green"),o.current=performance.now())},w=[{phase:"Render",description:"React calls your component function",color:"bg-blue-500",timing:"Synchronous"},{phase:"Commit",description:"React updates the DOM",color:"bg-green-500",timing:"Synchronous"},{phase:"Layout Effects",description:"useLayoutEffect runs here",color:"bg-yellow-500",timing:"Synchronous"},{phase:"Browser Paint",description:"Browser paints the screen",color:"bg-purple-500",timing:"Async"},{phase:"Effects",description:"useEffect runs here",color:"bg-red-500",timing:"Async"}],I=[{classMethod:"constructor()",functionalEquivalent:"useState initializer",timing:"Mount"},{classMethod:"render()",functionalEquivalent:"Function body return",timing:"Mount/Update"},{classMethod:"componentDidMount()",functionalEquivalent:"useEffect with []",timing:"After mount"},{classMethod:"componentDidUpdate()",functionalEquivalent:"useEffect with deps",timing:"After update"},{classMethod:"componentWillUnmount()",functionalEquivalent:"useEffect cleanup",timing:"Before unmount"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-4 md:p-8 transition-colors duration-300",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-12 animate-[fadeInUp_0.8s_ease-out]",children:[e.jsx("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-indigo-100 dark:bg-indigo-900/30 mb-4",children:e.jsx("span",{className:"text-sm font-semibold text-indigo-700 dark:text-indigo-300",children:"Topic 27/46"})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4",children:"useEffect Execution Timing Explained"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 leading-relaxed",children:"Unravel the mystery of when useEffect runs in the React lifecycle. Learn how effects are scheduled, when cleanup happens, and master the precise timing of your side effects."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_0.9s_ease-out]",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-xl",children:"‚è±Ô∏è"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"React's Execution Timeline"})]}),e.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:["Understanding when ",e.jsx("code",{children:"useEffect"})," runs is crucial for predictable behavior. Effects run ",e.jsx("strong",{children:"asynchronously"})," after the browser has painted the screen."]}),e.jsxs("div",{className:"my-8",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 text-center",children:"React Component Lifecycle Flow"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-1 bg-gradient-to-r from-blue-500 via-green-500 to-red-500 transform -translate-y-1/2"}),e.jsx("div",{className:"relative flex justify-between items-center",children:w.map((t,s)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:c("w-6 h-6 rounded-full flex items-center justify-center mb-2 transform hover:scale-125 transition-transform duration-300",t.color),children:e.jsx("span",{className:"text-white text-xs",children:s+1})}),e.jsxs("div",{className:"text-center max-w-[100px]",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:t.phase}),e.jsx("div",{className:"text-[10px] text-gray-600 dark:text-gray-400 mt-1",children:t.timing})]})]},s))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-12",children:w.map((t,s)=>e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:c("w-3 h-3 rounded-full mr-2",t.color)}),e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white",children:t.phase})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.description})]},s))})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 p-5 rounded-xl my-6",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"üéØ Key Timing Insight"}),e.jsx("blockquote",{className:"border-l-4 border-blue-500 dark:border-blue-400 pl-4 py-2 italic text-gray-700 dark:text-gray-300",children:'"useEffect runs after the render is committed to the screen and the browser has painted. This prevents side effects from blocking visual updates."'})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Real-World Analogy"}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 rounded-xl",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Think of Tuhina from Barrackpore organizing a classroom:"}),e.jsxs("ul",{className:"space-y-2 text-gray-700 dark:text-gray-300 mt-2",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"1."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Render:"})," She writes the lesson plan (what to teach)"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"2."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Commit:"})," She writes on the blackboard"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-purple-500 mr-2",children:"3."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Paint:"})," Students read the blackboard"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"4."}),e.jsxs("span",{children:[e.jsx("strong",{children:"useEffect:"})," She updates the attendance register (after class)"]})]})]})]})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.0s_ease-out]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-lg",children:"üîÑ"})}),"Class vs Functional Lifecycle"]}),e.jsxs("button",{onClick:()=>C(!u),className:"px-4 py-2 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/30 dark:hover:bg-yellow-900/50 text-yellow-700 dark:text-yellow-300 rounded-lg transition-colors duration-300",children:[u?"Hide":"Show"," Comparison"]})]}),u&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-900",children:[e.jsx("th",{className:"p-3 text-left text-gray-900 dark:text-white font-semibold",children:"Class Method"}),e.jsx("th",{className:"p-3 text-left text-gray-900 dark:text-white font-semibold",children:"Functional Equivalent"}),e.jsx("th",{className:"p-3 text-left text-gray-900 dark:text-white font-semibold",children:"Timing"})]})}),e.jsx("tbody",{children:I.map((t,s)=>e.jsxs("tr",{className:c("border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900/50 transition-colors",s%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900/30"),children:[e.jsx("td",{className:"p-3 font-mono text-sm text-blue-600 dark:text-blue-400",children:t.classMethod}),e.jsx("td",{className:"p-3 font-mono text-sm text-green-600 dark:text-green-400",children:t.functionalEquivalent}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs rounded",children:t.timing})})]},s))})]})}),e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Important Difference"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Class components:"})," Lifecycle methods run during specific phases",e.jsx("br",{}),e.jsx("strong",{children:"Function components:"})," Effects run after paint, cleanup runs before next effect or unmount"]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.1s_ease-out]",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-lg",children:"‚ö†Ô∏è"})}),"Common Timing Pitfalls"]}),e.jsx("div",{className:"space-y-4",children:[{issue:"Assuming effects run synchronously",problem:"Trying to measure DOM elements immediately after setting state",solution:"Use useLayoutEffect for synchronous side effects, or useEffect with proper timing",code:`// ‚ùå DOM might not be updated yet
useEffect(() => {
  const height = elementRef.current.offsetHeight;
  // Might be old value
}, [state]);`},{issue:"Multiple effects with unclear order",problem:"Effects depending on each other's execution order",solution:"Combine related effects into one useEffect, or use proper dependencies",code:`// ‚ùå Which effect runs first?
useEffect(() => { /* Effect A */ }, []);
useEffect(() => { /* Effect B */ }, []);

// ‚úÖ Combine if order matters
useEffect(() => {
  // Effect A
  // Effect B (after A completes)
}, []);`},{issue:"Cleanup timing confusion",problem:"Assuming cleanup runs only on unmount",solution:"Cleanup runs before every re-run of the effect (if dependencies change)",code:`// ‚ùå Thinking cleanup only happens on unmount
useEffect(() => {
  const subscription = subscribe();
  
  return () => {
    // This runs before next effect, not just unmount!
    unsubscribe(subscription);
  };
}, [dependency]); // Cleanup runs when dependency changes`}].map((t,s)=>e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-200 dark:border-red-700",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mr-3 mt-1",children:e.jsx("span",{className:"text-red-600 dark:text-red-400",children:s+1})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-red-700 dark:text-red-400 mb-1",children:t.issue}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[e.jsx("strong",{children:"Problem:"})," ",t.problem]}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mb-3",children:[e.jsx("strong",{children:"Solution:"})," ",t.solution]}),e.jsx("pre",{className:"text-xs bg-gray-900 text-gray-100 p-3 rounded-lg overflow-x-auto",children:t.code})]})]})},s))})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-gradient-to-br from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.0s_ease-out]",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Live Timing Dashboard"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:m}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Render Count"})]})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:v}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Effect Runs"})]})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:i}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dependency Value"})]})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600 dark:text-yellow-400",children:g.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cleanup Runs"})]})})]}),e.jsxs("div",{className:"mb-8 p-6 bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Control Panel"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{onClick:S,className:"py-3 px-4 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Trigger Re-render"}),e.jsx("button",{onClick:D,className:"py-3 px-4 bg-purple-500 hover:bg-purple-600 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Update Dependency (+1)"}),e.jsx("button",{onClick:U,className:c("py-3 px-4 font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 active:scale-95",d==="functional"?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"),children:d==="functional"?"Simulate Unmount":"Simulate Mount"}),e.jsx("button",{onClick:M,className:"py-3 px-4 bg-gray-500 hover:bg-gray-600 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Reset Timeline"})]}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Current Phase: ",e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:E.toUpperCase()})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Component Type: ",e.jsx("span",{className:"font-mono",children:d})]}),N&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Initial Mount Time: ",e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[N,"ms"]})]})]})]}),e.jsxs("div",{className:"mb-8 p-6 bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Active Effects Tracking"}),e.jsx("div",{className:"space-y-4",children:[{name:"useEffect with []",description:"Runs once on mount, cleanup on unmount",status:m>0?"Active (mounted)":"Inactive",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"},{name:"useEffect with [dependency]",description:`Runs when dependency changes (current: ${i})`,status:"Active",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300"},{name:"useEffect without deps",description:"Runs after every render",status:"Active",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"}].map((t,s)=>e.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${t.color}`,children:t.status})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.description})]},s))})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.1s_ease-out]",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Execution Timeline"}),e.jsx("div",{className:"h-64 overflow-y-auto bg-gray-50 dark:bg-gray-900/50 rounded-xl p-4 mb-4",children:b.length===0?e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400",children:"Timeline will appear as you interact with the component"}):e.jsx("div",{className:"space-y-3",children:[...b].reverse().map((t,s)=>e.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",style:{animationDelay:`${s*50}ms`},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:c("w-3 h-3 rounded-full mr-3",t.color==="green"&&"bg-green-500",t.color==="blue"&&"bg-blue-500",t.color==="red"&&"bg-red-500",t.color==="purple"&&"bg-purple-500",t.color==="yellow"&&"bg-yellow-500",t.color==="gray"&&"bg-gray-500")}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:t.stage.toUpperCase()}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.description})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.timestamp,"ms"]})]})},t.id))})}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-cyan-50 to-blue-50 dark:from-cyan-900/20 dark:to-blue-900/20 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Timing Analysis"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Observe how effects run ",e.jsx("strong",{children:"after"})," render completes. Notice cleanup functions running before the next effect execution when dependencies change."]})]})]}),e.jsxs("section",{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/10 dark:to-amber-900/10 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.2s_ease-out]",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Cleanup Function Timing"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"When Cleanup Runs"}),e.jsx("div",{className:"space-y-4",children:[{scenario:"On unmount",timing:"When component is removed from DOM",example:"Closing a modal, navigating away"},{scenario:"Before effect re-run",timing:"When dependencies change and effect will run again",example:"Changing filter criteria that triggers new API call"},{scenario:"On dependency array change",timing:"Immediately before the next effect with same dependencies",example:"Search term changes, cleanup old subscription"}].map((t,s)=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-orange-600 dark:text-orange-400 text-sm",children:s+1})}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:t.scenario})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 ml-9",children:[e.jsx("strong",{children:"Timing:"})," ",t.timing,e.jsx("br",{}),e.jsx("strong",{children:"Example:"})," ",t.example]})]},s))})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Cleanup Log"}),e.jsx("div",{className:"h-32 overflow-y-auto bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3",children:g.length===0?e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400 text-sm",children:"No cleanup events yet"}):e.jsx("div",{className:"space-y-2",children:[...g].reverse().map((t,s)=>e.jsxs("div",{className:"p-2 bg-red-50 dark:bg-red-900/10 rounded text-sm text-red-700 dark:text-red-400",children:["üßπ ",t]},s))})})]}),e.jsxs("div",{className:"p-4 bg-orange-100 dark:bg-orange-900/20 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-orange-800 dark:text-orange-300 mb-2",children:"Professional Insight"}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400",children:"In production apps, we use cleanup functions to prevent memory leaks from abandoned subscriptions, timers, and event listeners. Always clean up what you set up."})]})]})]})]})]}),e.jsx("div",{className:"mt-8 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl p-6 shadow-lg border-l-4 border-blue-500 dark:border-blue-400 animate-[fadeInUp_1.3s_ease-out]",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 mr-4",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl font-bold",children:"SH"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Teacher's Note"}),e.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:e.jsx("strong",{children:"Dear students from Barrackpore, Shyamnagar, and Ichapur,"})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800/50 p-4 rounded-lg mb-4 border border-blue-200 dark:border-blue-700",children:[e.jsx("h4",{className:"font-semibold text-blue-700 dark:text-blue-400 mb-2",children:"The Timing Mindset Shift:"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"When Debangshu from Naihati asked why his animation was janky, we discovered he was doing DOM measurements in useEffect. The fix? Move it to useLayoutEffect."}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Remember: ",e.jsx("strong",{children:"useEffect = after paint"}),", ",e.jsx("strong",{children:"useLayoutEffect = before paint"})]})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:"After 27 years of performance optimization, I can tell you that understanding effect timing is what separates junior from senior React developers. The student from Barrackpore who fixed their app's loading indicator? They learned to time their effects properly."}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:[e.jsx("strong",{children:"Professional Insight:"})," In enterprise applications, we monitor effect execution times. If an effect takes more than 16ms (one frame at 60fps), it can cause jank. We use performance monitoring tools to track this."]}),e.jsxs("ul",{className:"space-y-2 text-gray-700 dark:text-gray-300 mb-4",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Rule 1:"})," Effects should be fast (under 16ms)"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Rule 2:"})," Cleanup should be idempotent (safe to run multiple times)"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Rule 3:"})," Order effects by priority (data fetching before analytics)"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200 dark:border-blue-700",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Sukanta Hui"})," ¬∑ 27 years experience ¬∑",e.jsx("a",{href:"mailto:sukantahui@codernaccotax.co.in",className:"text-blue-600 dark:text-blue-400 hover:underline ml-1",children:"sukantahui@codernaccotax.co.in"})]})})]})]})]})}),e.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-2xl border border-green-200 dark:border-green-700 animate-[fadeInUp_1.4s_ease-out]",children:[e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"üîç"})}),"Observation Exercise"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Watch the Timeline"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Perform these actions in order and observe the timeline:"}),e.jsxs("ol",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mr-3 text-xs",children:"1"}),e.jsx("span",{children:'Click "Trigger Re-render" 3 times'})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center mr-3 text-xs",children:"2"}),e.jsx("span",{children:'Click "Update Dependency" 2 times'})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mr-3 text-xs",children:"3"}),e.jsx("span",{children:'Click "Simulate Unmount", then "Simulate Mount"'})]})]})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Critical Question:"})," Notice when cleanup runs. Does it run:"]}),e.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Only when the component unmounts?"}),e.jsx("li",{children:"‚Ä¢ Before every effect re-run?"}),e.jsx("li",{children:"‚Ä¢ Both?"})]})]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Try this:"})," Open Chrome DevTools ‚Üí Performance tab. Record a timeline while clicking the buttons. You'll see the actual browser painting and when React effects run."]})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6 animate-[fadeInUp_1.5s_ease-out]",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"‚è±Ô∏è"})}),e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Timing Rules"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Effects run after paint"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Render ‚Üí Commit ‚Üí Paint ‚Üí Effects"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Cleanup runs before next effect"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Multiple effects run in order"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"üéØ"})}),e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"When to Use"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"useEffect: Data fetching, subscriptions"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"useLayoutEffect: DOM measurements"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"[]: Mount-only effects"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"[deps]: Effect synchronization"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"‚ö†Ô∏è"})}),e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Common Mistakes"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Assuming synchronous execution"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Forgetting cleanup on unmount"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Effect order dependencies"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Blocking paint with slow effects"})]})]})]})]})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        /* Respect reduced motion */
        @media (prefers-reduced-motion: reduce) {
          .animate-\\[fadeInUp_0\\.8s_ease-out\\] {
            animation: none;
          }
        }
      `})]})};export{O as default};
