import{j as e}from"./index-BFnLuail.js";import{c as r}from"./clsx-B-dksMZM.js";import{E as a}from"./EditableCCodeBlock-BIH-nUZ3.js";const i=`// return_int.c â€“ Simple integer return (uses register)\r
#include <stdio.h>\r
\r
int add(int a, int b) {\r
    int sum = a + b;\r
    return sum;  // 'sum' is placed in return register (EAX/RAX)\r
}\r
\r
int main() {\r
    int result = add(5, 3);\r
    printf("5 + 3 = %d\\n", result);  // Caller reads the register\r
    return 0;\r
}`,l=`// return_struct.c â€“ Returning a struct (often uses hidden pointer)\r
#include <stdio.h>\r
\r
typedef struct {\r
    int x;\r
    int y;\r
} Point;\r
\r
Point createPoint(int a, int b) {\r
    Point p = {a, b};\r
    return p;  // Compiler may pass a hidden pointer to a location in caller's frame\r
}\r
\r
int main() {\r
    Point pt = createPoint(10, 20);\r
    printf("Point: (%d, %d)\\n", pt.x, pt.y);\r
    return 0;\r
}`,m=()=>{const n=new Date().getFullYear()-1998;return e.jsxs("div",{className:"min-h-screen bg-white p-6 text-gray-900 transition-colors duration-300 dark:bg-gray-900 dark:text-gray-200",children:[e.jsxs("header",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"mb-2 text-4xl font-extrabold tracking-tight",children:e.jsx("span",{className:"bg-gradient-to-r from-amber-600 to-yellow-600 bg-clip-text text-transparent dark:from-amber-400 dark:to-yellow-400",children:"How Return Values Travel Back Through the Stack"})}),e.jsx("p",{className:"mx-auto max-w-2xl text-lg text-gray-600 dark:text-gray-400",children:"When a function finishes, its result must find its way back to the caller â€“ via registers, the stack, or hidden pointers. Understanding this reveals how functions really communicate."})]}),e.jsxs("section",{className:r("mb-12 rounded-xl bg-gray-50 p-6 shadow-md transition-all duration-300 hover:shadow-lg dark:bg-gray-800/50","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"The Journey of a Return Value"}),e.jsxs("p",{className:"leading-relaxed",children:["At Naihati CNAT, Abhronila writes a function ",e.jsx("code",{children:"add(a, b)"})," that returns their sum. When the function ends, where does that sum go? The CPU uses a dedicated register (like ",e.jsx("code",{children:"EAX"})," on x86) to hold the return value. The caller, after the function returns, reads that register. For larger values (like structures), the compiler may use a hidden pointer passed as an extra argument, or place the result on the stack. This invisible handshake between caller and callee is what makes functions useful."]})]}),e.jsx("div",{className:"mb-12 grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[{title:"Return Register",desc:"Small return values (int, pointers, etc.) are stored in a dedicated CPU register (EAX/RAX on x86).",icon:"ðŸ“Ÿ"},{title:"Hidden Pointer",desc:"For large structs, the caller passes an extra hidden pointer where the callee writes the result.",icon:"ðŸŽ¯"},{title:"Stack Return",desc:"Some ABIs place the return value on the stack, or use a combination of registers and stack.",icon:"ðŸ“š"},{title:"Caller Cleanup",desc:"The caller is responsible for reading the return value from its location before the next call overwrites it.",icon:"ðŸ§¹"},{title:"Volatile Registers",desc:"Return registers are often volatile â€“ they can be changed by subsequent calls, so the caller must save the value if needed.",icon:"âš¡"},{title:"Void Functions",desc:"Functions with no return value don't place anything in the return register.",icon:"ðŸš«"}].map((t,s)=>e.jsxs("div",{className:r("group rounded-xl border border-gray-200 bg-white p-5 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:border-amber-300 hover:shadow-md dark:border-gray-700 dark:bg-gray-800 dark:hover:border-amber-600","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]",`motion-safe:animation-delay-${(s+1)*100}ms`),style:{animationDelay:`${(s+1)*100}ms`},children:[e.jsx("div",{className:"mb-3 text-4xl",children:t.icon}),e.jsx("h3",{className:"mb-2 text-xl font-semibold",children:t.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t.desc})]},s))}),e.jsx("section",{className:"mb-12 flex justify-center",children:e.jsxs("div",{className:"w-full max-w-3xl rounded-xl bg-gray-100 p-4 dark:bg-gray-800",children:[e.jsxs("svg",{viewBox:"0 0 500 300",className:"w-full",children:[e.jsx("rect",{x:"50",y:"150",width:"180",height:"80",fill:"#4b5563",rx:"4"}),e.jsx("text",{x:"70",y:"180",fill:"white",fontSize:"12",children:"caller() frame"}),e.jsx("text",{x:"70",y:"210",fill:"white",fontSize:"10",children:"local x = add(5,3)"}),e.jsx("rect",{x:"270",y:"50",width:"180",height:"80",fill:"#059669",rx:"4"}),e.jsx("text",{x:"290",y:"80",fill:"white",fontSize:"12",children:"add() frame"}),e.jsx("text",{x:"290",y:"110",fill:"white",fontSize:"10",children:"return 8"}),e.jsx("rect",{x:"330",y:"160",width:"60",height:"40",fill:"#f59e0b",rx:"4"}),e.jsx("text",{x:"340",y:"185",fill:"white",fontSize:"12",children:"EAX"}),e.jsx("text",{x:"350",y:"200",fill:"white",fontSize:"10",children:"8"}),e.jsx("line",{x1:"360",y1:"130",x2:"360",y2:"160",stroke:"#ef4444",strokeWidth:"2",markerEnd:"url(#arrowhead)"}),e.jsx("text",{x:"370",y:"140",fill:"#ef4444",fontSize:"10",children:"function stores"}),e.jsx("line",{x1:"360",y1:"200",x2:"360",y2:"230",stroke:"#3b82f6",strokeWidth:"2",markerEnd:"url(#arrowhead)"}),e.jsx("text",{x:"370",y:"220",fill:"#3b82f6",fontSize:"10",children:"caller reads"}),e.jsx("defs",{children:e.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"10",refX:"9",refY:"5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 5, 0 10",fill:"#6b7280"})})})]}),e.jsx("p",{className:"mt-4 text-center text-sm text-gray-600 dark:text-gray-400",children:"The called function stores the result in a designated register; the caller retrieves it after return."})]})}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"mb-6 text-2xl font-semibold",children:"Return Values in Action"}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-1",children:[e.jsxs("div",{className:r("rounded-xl border border-green-200 bg-green-50/50 p-5 transition-all duration-300 hover:shadow-md dark:border-green-900 dark:bg-green-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsxs("h3",{className:"mb-3 flex items-center text-xl font-semibold text-green-700 dark:text-green-400",children:[e.jsx("span",{className:"mr-2",children:"ðŸ”¢"})," Returning an Integer"]}),e.jsx(a,{title:"return_int.c â€“ Simple register return",initialCode:i}),e.jsxs("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:["Debangshu's function returns an ",e.jsx("code",{children:"int"}),". The value is placed in the return register (",e.jsx("code",{children:"EAX"}),"). The caller uses it directly."]})]}),e.jsxs("div",{className:r("rounded-xl border border-purple-200 bg-purple-50/50 p-5 transition-all duration-300 hover:shadow-md dark:border-purple-900 dark:bg-purple-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","motion-safe:animation-delay-200ms"),style:{animationDelay:"200ms"},children:[e.jsxs("h3",{className:"mb-3 flex items-center text-xl font-semibold text-purple-700 dark:text-purple-400",children:[e.jsx("span",{className:"mr-2",children:"ðŸ—ï¸"})," Returning a Structure"]}),e.jsx(a,{title:"return_struct.c â€“ Hidden pointer",initialCode:l}),e.jsx("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:"When Tuhina returns a struct, the compiler often passes a hidden pointer to a location in the caller's frame where the struct is copied. The actual return value in the register may be that pointer."})]})]})]}),e.jsxs("section",{className:r("mb-12 rounded-xl bg-yellow-50/70 p-6 dark:bg-yellow-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold text-yellow-800 dark:text-yellow-300",children:"âš ï¸ Common Pitfalls"}),e.jsxs("ul",{className:"list-inside list-disc space-y-2 text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Ignoring return value:"})," Calling a function that returns a value but not using it â€“ legal but often a logic bug."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Returning pointer to local:"})," The local variable's memory is reclaimed; the pointer becomes dangling."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Assuming return register persists:"})," After a function returns, the return register may be overwritten by the next call. Save it if needed."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Forgetting return in non-void function:"})," Undefined behaviour â€“ the caller will read whatever garbage is in the return register."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Returning large structs repeatedly:"})," Can cause performance overhead due to copying."]})]})]}),e.jsxs("section",{className:"mb-12 grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:r("rounded-xl bg-blue-50/50 p-5 dark:bg-blue-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h3",{className:"mb-3 text-xl font-semibold text-blue-700 dark:text-blue-300",children:"ðŸ“‹ Do's"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700 dark:text-gray-300",children:[e.jsx("li",{children:"Always return a value from non-void functions (all paths)."}),e.jsx("li",{children:"Use return values for error codes or results."}),e.jsx("li",{children:"Prefer returning small types (int, char, pointers) for efficiency."}),e.jsx("li",{children:"If you need to return multiple values, consider returning a struct or using outâ€‘parameters."})]})]}),e.jsxs("div",{className:r("rounded-xl bg-purple-50/50 p-5 dark:bg-purple-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","motion-safe:animation-delay-200ms"),style:{animationDelay:"200ms"},children:[e.jsx("h3",{className:"mb-3 text-xl font-semibold text-purple-700 dark:text-purple-300",children:"ðŸš« Don'ts"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700 dark:text-gray-300",children:[e.jsx("li",{children:"Return pointers to local variables."}),e.jsx("li",{children:"Ignore return values unless you have a good reason."}),e.jsx("li",{children:"Return large structs by value if performance is critical (use pointers)."})]})]})]}),e.jsxs("section",{className:r("mb-12 rounded-xl border border-dashed border-indigo-300 bg-indigo-50/30 p-6 dark:border-indigo-700 dark:bg-indigo-900/10","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-3 text-2xl font-semibold text-indigo-800 dark:text-indigo-300",children:"ðŸ’¡ Hint â€“ Think Like a Pro"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Observe carefully:"})," In the",e.jsx("code",{children:"return_struct.c"})," example, you might not see the hidden pointer in C code, but if you look at the generated assembly, you'll notice the caller passes an extra address. This is how large objects are returned efficiently. ",e.jsx("br",{}),e.jsxs("span",{className:"mt-2 block",children:[e.jsx("strong",{children:"Try changing this:"})," Modify the struct to have many fields (e.g., 100 integers). Compare the performance of returning by value vs. passing a pointer to a struct that the function fills."]})]})]}),e.jsxs("section",{className:r("mb-12 rounded-xl bg-emerald-50/50 p-6 dark:bg-emerald-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold text-emerald-800 dark:text-emerald-300",children:"ðŸ§  Tips & Tricks (Professional Edge)"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ› ï¸ Use Return for Error Codes"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"In many APIs, functions return 0 on success, non-zero on error. This is a clean way to handle failures."})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ“ Check Assembly Output"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Use ",e.jsx("code",{children:"gcc -S"})," to see how return values are implemented on your platform. It's eye-opening."]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ§ª Return by Value for Small Objects"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Modern compilers optimise small struct returns (often using registers). Don't prematurely pessimise by using pointers."})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ« Classroom Shortcut"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"At Barrackpore CNAT, we simulate return values by passing a note between students: the caller gives a blank paper (hidden pointer), the callee writes the answer, and the caller reads it."})]})]})]}),e.jsxs("section",{className:r("mb-12 rounded-xl border-l-4 border-amber-500 bg-amber-50/80 p-6 dark:bg-amber-900/30","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","transition-all duration-300 hover:border-l-8 hover:shadow-lg"),children:[e.jsx("h2",{className:"mb-3 text-2xl font-semibold text-amber-800 dark:text-amber-300",children:"ðŸ‘¨â€ðŸ« Teacher's Note â€“ Sukanta Hui"}),e.jsxs("div",{className:"flex flex-wrap items-start gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"mb-2 text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Sukanta Hui"})," (email: sukantahui@codernaccotax.co.in , mobile: 7003756860) has been teaching programming since 1998 â€“ that's ",e.jsxs("strong",{children:[n," years"]})," of experience in C, RDBMS, OS, and web development."]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:`"Many students treat 'return x;' as magic. But understanding that it's just placing a value in a register (or via a hidden pointer) demystifies function calls. It also explains why returning a local pointer is dangerous â€“ the register holds an address, but the memory is gone. Always think about where your data lives."`})]}),e.jsx("div",{className:"rounded-full bg-amber-200 p-3 dark:bg-amber-800",children:e.jsx("svg",{className:"h-12 w-12 text-amber-700 dark:text-amber-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})]}),e.jsxs("section",{className:"rounded-xl bg-gray-100 p-6 dark:bg-gray-800",children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"âœ… Mini Checklist"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:["Do I know where simple return values are stored (register)?","Do I understand how large structs are returned (hidden pointer)?","Do I always return a value from non-void functions?","Do I avoid returning pointers to local variables?","Can I explain the difference between return by value and return by pointer?"].map((t,s)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"âœ“"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t})]},s))})]}),e.jsx("style",{children:`
        @keyframes fadeSlideUp {
          0% {
            opacity: 0;
            transform: translateY(20px);
          }
          100% {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})};export{m as default};
