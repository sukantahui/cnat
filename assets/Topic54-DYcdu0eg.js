import{j as e}from"./index-BFnLuail.js";import{c as i}from"./clsx-B-dksMZM.js";import{E as n}from"./EditableCCodeBlock-BIH-nUZ3.js";const s=`// bad_header.h â€“ Defines a function (BAD)\r
#ifndef BAD_HEADER_H\r
#define BAD_HEADER_H\r
\r
// Function definition in header â€“ causes multiple definition errors\r
int add(int a, int b) {\r
    return a + b;\r
}\r
\r
#endif`,d=`// bad_main1.c â€“ First source file including the bad header\r
#include <stdio.h>\r
#include "bad_header.h"\r
\r
int main() {\r
    int result = add(5, 3);\r
    printf("5 + 3 = %d\\n", result);\r
    return 0;\r
}`,l=`// bad_main2.c â€“ Second source file also including the bad header\r
#include <stdio.h>\r
#include "bad_header.h"\r
\r
void otherFunction() {\r
    int x = add(10, 20);\r
    printf("10 + 20 = %d\\n", x);\r
}`,o=`// good_impl.c â€“ Single definition of add\r
#include "good_header.h"\r
\r
int add(int a, int b) {\r
    return a + b;\r
}\r
`,c=`// good_impl.c â€“ Single definition of add\r
#include "good_header.h"\r
\r
int add(int a, int b) {\r
    return a + b;\r
}`,h=`// good_main.c â€“ Uses the function from good_impl.c\r
#include <stdio.h>\r
#include "good_header.h"\r
\r
int main() {\r
    int result = add(5, 3);\r
    printf("5 + 3 = %d\\n", result);\r
    return 0;\r
}`,g=()=>{const r=new Date().getFullYear()-1998;return e.jsxs("div",{className:"min-h-screen bg-white p-6 text-gray-900 transition-colors duration-300 dark:bg-gray-900 dark:text-gray-200",children:[e.jsxs("header",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"mb-2 text-4xl font-extrabold tracking-tight",children:e.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent dark:from-purple-400 dark:to-pink-400",children:"Avoiding Multiple Definition Errors"})}),e.jsx("p",{className:"mx-auto max-w-2xl text-lg text-gray-600 dark:text-gray-400",children:"The linker's worst nightmare: duplicate symbols. Learn how to organise your code to keep it happy."})]}),e.jsxs("section",{className:i("mb-12 rounded-xl bg-gray-50 p-6 shadow-md transition-all duration-300 hover:shadow-lg dark:bg-gray-800/50","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"What Are Multiple Definition Errors?"}),e.jsxs("p",{className:"leading-relaxed",children:["At Barrackpore CNAT, Abhronila created a header `math_utils.h` with a function ",e.jsx("code",{children:"int add(int a, int b) {{ return a + b; }}"}),'. She included this header in both `main.c` and `calculator.c`. When linking, the linker saw two definitions of `add` â€“ one from each object file â€“ and threw a "multiple definition" error. The rule is: declarations can be repeated, but definitions (the actual code or global variable instantiation) must appear only once across the entire program.']})]}),e.jsx("section",{className:"mb-12 flex justify-center",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-xl bg-gray-100 p-4 dark:bg-gray-800",children:[e.jsxs("svg",{viewBox:"0 0 400 200",className:"w-full",children:[e.jsx("rect",{x:"20",y:"20",width:"100",height:"80",fill:"#3b82f6",rx:"4"}),e.jsx("text",{x:"40",y:"50",fill:"white",fontSize:"10",children:"main.o"}),e.jsx("text",{x:"30",y:"70",fill:"white",fontSize:"8",children:"contains add()"}),e.jsx("text",{x:"30",y:"90",fill:"white",fontSize:"8",children:"(from header)"}),e.jsx("rect",{x:"150",y:"20",width:"100",height:"80",fill:"#3b82f6",rx:"4"}),e.jsx("text",{x:"170",y:"50",fill:"white",fontSize:"10",children:"calculator.o"}),e.jsx("text",{x:"160",y:"70",fill:"white",fontSize:"8",children:"contains add()"}),e.jsx("text",{x:"160",y:"90",fill:"white",fontSize:"8",children:"(from header)"}),e.jsx("rect",{x:"280",y:"20",width:"80",height:"80",fill:"#f59e0b",rx:"4"}),e.jsx("text",{x:"295",y:"60",fill:"white",fontSize:"10",children:"linker"}),e.jsx("text",{x:"200",y:"150",fill:"#dc2626",fontSize:"12",fontWeight:"bold",children:"multiple definition of `add`"}),e.jsx("line",{x1:"120",y1:"60",x2:"280",y2:"60",stroke:"#6b7280",strokeWidth:"2",markerEnd:"url(#arrowhead)"}),e.jsx("line",{x1:"250",y1:"60",x2:"280",y2:"60",stroke:"#6b7280",strokeWidth:"2",markerEnd:"url(#arrowhead)"}),e.jsx("defs",{children:e.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"10",refX:"9",refY:"5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 5, 0 10",fill:"#6b7280"})})})]}),e.jsx("p",{className:"mt-4 text-center text-sm text-gray-600 dark:text-gray-400",children:"Two object files both contain a definition of `add` â€“ the linker cannot choose."})]})}),e.jsx("div",{className:"mb-12 grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[{title:"Declaration vs Definition",desc:"Declarations (prototypes) can be repeated; definitions (function bodies, global variables) must be unique.",icon:"ðŸ“œ"},{title:"One Definition Rule (ODR)",desc:"In C, each function and global variable must have exactly one definition across the whole program.",icon:"âš–ï¸"},{title:"Header Files: Declarations Only",desc:"Headers should contain prototypes, not function bodies (unless static or inline).",icon:"ðŸ“‚"},{title:"Source Files: Definitions",desc:"Put function definitions in .c files, compiled separately and linked together.",icon:"ðŸ”¨"},{title:"Static Functions",desc:"Declaring a function `static` gives it internal linkage â€“ each file can have its own copy.",icon:"ðŸ”’"},{title:"Inline Functions",desc:"`inline` can help, but the linker still needs one external definition if the function is used in a certain way.",icon:"âš¡"}].map((a,t)=>e.jsxs("div",{className:i("group rounded-xl border border-gray-200 bg-white p-5 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:border-purple-300 hover:shadow-md dark:border-gray-700 dark:bg-gray-800 dark:hover:border-purple-600","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]",`motion-safe:animation-delay-${(t+1)*100}ms`),style:{animationDelay:`${(t+1)*100}ms`},children:[e.jsx("div",{className:"mb-3 text-4xl",children:a.icon}),e.jsx("h3",{className:"mb-2 text-xl font-semibold",children:a.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.desc})]},t))}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"mb-6 text-2xl font-semibold",children:"Multiple Definitions: Bad vs Good"}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[e.jsxs("div",{className:i("rounded-xl border border-red-200 bg-red-50/50 p-5 transition-all duration-300 hover:shadow-md dark:border-red-900 dark:bg-red-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsxs("h3",{className:"mb-3 flex items-center text-xl font-semibold text-red-700 dark:text-red-400",children:[e.jsx("span",{className:"mr-2",children:"âŒ"})," Bad: Definition in Header"]}),e.jsx(n,{title:"bad_header.h â€“ Defines a function",initialCode:s}),e.jsx(n,{title:"bad_main1.c â€“ Includes header",initialCode:d}),e.jsx(n,{title:"bad_main2.c â€“ Also includes header",initialCode:l}),e.jsx("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:"Swadeep put the function body in the header. Both `bad_main1.c` and `bad_main2.c` include it, so each object file contains a definition. The linker sees two `add` functions â€“ error."})]}),e.jsxs("div",{className:i("rounded-xl border border-green-200 bg-green-50/50 p-5 transition-all duration-300 hover:shadow-md dark:border-green-900 dark:bg-green-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","motion-safe:animation-delay-200ms"),style:{animationDelay:"200ms"},children:[e.jsxs("h3",{className:"mb-3 flex items-center text-xl font-semibold text-green-700 dark:text-green-400",children:[e.jsx("span",{className:"mr-2",children:"âœ…"})," Good: Declaration in Header, Definition in One .c"]}),e.jsx(n,{title:"good_header.h â€“ Only prototype",initialCode:o}),e.jsx(n,{title:"good_impl.c â€“ Single definition",initialCode:c}),e.jsx(n,{title:"good_main.c â€“ Uses the function",initialCode:h}),e.jsx("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:"Tuhina put only the prototype in the header, and the definition in `good_impl.c`. Both `good_main.c` and any other file can include the header, but the definition exists only once â€“ linker happy."})]})]})]}),e.jsxs("section",{className:i("mb-12 rounded-xl bg-yellow-50/70 p-6 dark:bg-yellow-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold text-yellow-800 dark:text-yellow-300",children:"âš ï¸ Common Pitfalls"}),e.jsxs("ul",{className:"list-inside list-disc space-y-2 text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Function body in header:"})," The most common cause of multiple definition errors."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Global variable defined in header:"})," e.g.,"," ",e.jsx("code",{children:"int counter = 0;"})," in a header â€“ each .c gets its own copy."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Missing `static` for fileâ€‘scope functions:"})," If a helper function is only used in one .c, declare it `static` to avoid polluting the global namespace."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Inlining confusion:"})," Using `inline` without a separate external definition can still cause multiple definition errors in some scenarios."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Forgetting include guards:"})," While guards prevent multiple inclusions in one translation unit, they don't help with multiple definitions across different .c files."]})]})]}),e.jsxs("section",{className:"mb-12 grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:i("rounded-xl bg-blue-50/50 p-5 dark:bg-blue-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h3",{className:"mb-3 text-xl font-semibold text-blue-700 dark:text-blue-300",children:"ðŸ“‹ Do's"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700 dark:text-gray-300",children:[e.jsx("li",{children:"Put function prototypes in headers, definitions in .c files."}),e.jsx("li",{children:"For global variables, use `extern` in headers and define in one .c."}),e.jsx("li",{children:"Use `static` for functions and globals that are local to a file."}),e.jsx("li",{children:"Link object files correctly (list all .c files in compilation)."})]})]}),e.jsxs("div",{className:i("rounded-xl bg-purple-50/50 p-5 dark:bg-purple-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","motion-safe:animation-delay-200ms"),style:{animationDelay:"200ms"},children:[e.jsx("h3",{className:"mb-3 text-xl font-semibold text-purple-700 dark:text-purple-300",children:"ðŸš« Don'ts"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700 dark:text-gray-300",children:[e.jsx("li",{children:"Define functions in headers (except `static` or `inline` with care)."}),e.jsx("li",{children:"Define global variables in headers."}),e.jsx("li",{children:"Ignore linker errors â€“ they tell you exactly which symbol is duplicated."})]})]})]}),e.jsxs("section",{className:i("mb-12 rounded-xl border border-dashed border-indigo-300 bg-indigo-50/30 p-6 dark:border-indigo-700 dark:bg-indigo-900/10","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-3 text-2xl font-semibold text-indigo-800 dark:text-indigo-300",children:"ðŸ’¡ Hint â€“ Think Like a Pro"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Observe carefully:"})," In the bad example, `bad_header.h` defines `add()`. When you compile `bad_main1.c` and `bad_main2.c`, each produces an object file containing the machine code for `add`. The linker sees two copies and doesn't know which one to use â€“ it's an error. In the good example, only `good_impl.c` contains the definition; `good_main.c` only has a declaration. ",e.jsx("br",{}),e.jsxs("span",{className:"mt-2 block",children:[e.jsx("strong",{children:"Try changing this:"})," Move the definition from the bad header into a separate `.c` file, and keep only the prototype in the header. Recompile and see the error disappear."]})]})]}),e.jsxs("section",{className:i("mb-12 rounded-xl bg-emerald-50/50 p-6 dark:bg-emerald-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold text-emerald-800 dark:text-emerald-300",children:"ðŸ§  Tips & Tricks (Professional Edge)"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ› ï¸ Use `nm` to inspect symbols"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"The `nm` tool lists symbols in object files. You can see if a symbol is defined in multiple files."})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ“ The `static` keyword"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Use `static` for helper functions that are only needed in one file. They won't cause multiple definition errors."})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ”— Linking order matters"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"When linking, order of object files can affect resolution, but not multiple definition errors â€“ those are fatal."})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ« Classroom Shortcut"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:'At Naihati CNAT, we teach the "one definition, many declarations" rule with an analogy: one cook (definition) in the kitchen, many menus (declarations) around the restaurant.'})]})]})]}),e.jsxs("section",{className:i("mb-12 rounded-xl border-l-4 border-purple-500 bg-purple-50/80 p-6 dark:bg-purple-900/30","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","transition-all duration-300 hover:border-l-8 hover:shadow-lg"),children:[e.jsx("h2",{className:"mb-3 text-2xl font-semibold text-purple-800 dark:text-purple-300",children:"ðŸ‘¨â€ðŸ« Teacher's Note â€“ Sukanta Hui"}),e.jsxs("div",{className:"flex flex-wrap items-start gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"mb-2 text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Sukanta Hui"})," (email: sukantahui@codernaccotax.co.in , mobile: 7003756860) has been teaching programming since 1998 â€“ that's ",e.jsxs("strong",{children:[r," years"]})," of experience in C, RDBMS, OS, and web development."]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:`"Multiple definition errors are a rite of passage for every C programmer. The moment you understand why they happen, you truly grasp the difference between declarations and definitions, and the role of the linker. I've seen students panic, but the fix is simple: move code out of headers. Remember: headers are for sharing interfaces, not implementations."`})]}),e.jsx("div",{className:"rounded-full bg-purple-200 p-3 dark:bg-purple-800",children:e.jsx("svg",{className:"h-12 w-12 text-purple-700 dark:text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})]}),e.jsxs("section",{className:"rounded-xl bg-gray-100 p-6 dark:bg-gray-800",children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"âœ… Mini Checklist"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:["Does every header contain only declarations (prototypes, externs)?","Is every nonâ€‘static function defined in exactly one .c file?","Are global variables declared `extern` in headers and defined in one .c?","Are fileâ€‘private functions marked `static`?","Do I understand the linker error messages about duplicate symbols?"].map((a,t)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"âœ“"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:a})]},t))})]}),e.jsx("style",{children:`
        @keyframes fadeSlideUp {
          0% {
            opacity: 0;
            transform: translateY(20px);
          }
          100% {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})};export{g as default};
