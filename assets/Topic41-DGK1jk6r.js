import{j as e}from"./index-meFSU1Lv.js";import{c as a}from"./clsx-B-dksMZM.js";import{E as t}from"./EditableCCodeBlock-C1aLYO6_.js";const l=`// stack_allocation.c â€“ Demonstrating stack allocation and reuse\r
#include <stdio.h>\r
\r
void display(int val) {\r
    int local = val * 2;\r
    printf("In display, local variable 'local' = %d at address %p\\n", local, (void*)&local);\r
}\r
\r
int main() {\r
    int m = 42;\r
    printf("In main, 'm' = %d at address %p\\n", m, (void*)&m);\r
\r
    display(10);\r
    display(20);  // Same stack frame location may be reused\r
    display(30);\r
\r
    return 0;\r
}`,n=`// recursive_stack.c â€“ Each recursive call gets its own frame\r
#include <stdio.h>\r
\r
void recurse(int n) {\r
    int local = n;\r
    printf("recurse(%d): local at address %p\\n", n, (void*)&local);\r
\r
    if (n > 0) {\r
        recurse(n - 1);\r
    }\r
\r
    printf("recurse(%d) returning\\n", n);\r
}\r
\r
int main() {\r
    recurse(3);\r
    return 0;\r
}`,h=()=>{const i=new Date().getFullYear()-1998;return e.jsxs("div",{className:"min-h-screen bg-white p-6 text-gray-900 transition-colors duration-300 dark:bg-gray-900 dark:text-gray-200",children:[e.jsxs("header",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"mb-2 text-4xl font-extrabold tracking-tight",children:e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent dark:from-blue-400 dark:to-indigo-400",children:"Memory Allocation During Function Execution"})}),e.jsx("p",{className:"mx-auto max-w-2xl text-lg text-gray-600 dark:text-gray-400",children:"How local variables, parameters, and return addresses are created and destroyed on the stack â€“ and why it matters."})]}),e.jsxs("section",{className:a("mb-12 rounded-xl bg-gray-50 p-6 shadow-md transition-all duration-300 hover:shadow-lg dark:bg-gray-800/50","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"Where Do Variables Live?"}),e.jsxs("p",{className:"leading-relaxed",children:["When Debangshu calls a function at Barrackpore CNAT, the program needs memory for its parameters, local variables, and the return address. This memory is allocated on the ",e.jsx("strong",{children:"stack"})," â€“ a region of memory that grows and shrinks automatically as functions are called and return. Each function call gets its own ",e.jsx("strong",{children:"stack frame"}),". When the function returns, its frame is deallocated, and that memory becomes available for the next call. This automatic allocation is why local variables only exist while the function is running."]})]}),e.jsx("div",{className:"mb-12 grid gap-6 md:grid-cols-1 lg:grid-cols-1",children:[{title:"Stack Allocation",desc:"Memory for local variables and parameters is allocated on the stack. It's fast and automatic.",icon:"ðŸ“š"},{title:"Automatic Storage Duration",desc:"Variables declared inside a function have automatic storage â€“ they're created at entry and destroyed at exit.",icon:"â±ï¸"},{title:"Return Address",desc:"The address of the next instruction to execute after the function finishes is stored in the stack frame.",icon:"â†©ï¸"},{title:"Stack Pointer",desc:"A CPU register that points to the top of the stack. It moves as frames are pushed and popped.",icon:"â¬†ï¸"},{title:"Frame Pointer",desc:"Often a dedicated register (like BP) that marks the start of the current frame, allowing access to parameters and locals.",icon:"ðŸ“"},{title:"Reuse of Memory",desc:"After a function returns, its stack memory can be reused by the next call â€“ that's why addresses of locals may repeat.",icon:"â™»ï¸"}].map((s,r)=>e.jsxs("div",{className:a("group rounded-xl border border-gray-200 bg-white p-5 shadow-sm transition-all duration-300 hover:-translate-y-1 hover:border-blue-300 hover:shadow-md dark:border-gray-700 dark:bg-gray-800 dark:hover:border-blue-600","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]",`motion-safe:animation-delay-${(r+1)*100}ms`),style:{animationDelay:`${(r+1)*100}ms`},children:[e.jsx("div",{className:"mb-3 text-4xl",children:s.icon}),e.jsx("h3",{className:"mb-2 text-xl font-semibold",children:s.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s.desc})]},r))}),e.jsx("section",{className:"mb-12 flex justify-center",children:e.jsxs("div",{className:"w-full max-w-3xl rounded-xl bg-gray-100 p-4 dark:bg-gray-800",children:[e.jsxs("svg",{viewBox:"0 0 500 300",className:"w-full",children:[e.jsx("text",{x:"20",y:"50",fill:"#6b7280",fontSize:"12",children:"High address"}),e.jsx("text",{x:"20",y:"260",fill:"#6b7280",fontSize:"12",children:"Low address"}),e.jsx("line",{x1:"60",y1:"40",x2:"60",y2:"260",stroke:"#6b7280",strokeWidth:"1",strokeDasharray:"4"}),e.jsx("rect",{x:"100",y:"180",width:"200",height:"60",fill:"#4b5563",rx:"4"}),e.jsx("text",{x:"110",y:"210",fill:"white",fontSize:"12",children:"main() frame"}),e.jsx("text",{x:"110",y:"230",fill:"white",fontSize:"10",children:"local m: 5"}),e.jsx("rect",{x:"100",y:"110",width:"200",height:"60",fill:"#059669",rx:"4"}),e.jsx("text",{x:"110",y:"140",fill:"white",fontSize:"12",children:"func1() frame"}),e.jsx("text",{x:"110",y:"160",fill:"white",fontSize:"10",children:"param x: 5, local y: 10"}),e.jsx("rect",{x:"100",y:"40",width:"200",height:"60",fill:"#047857",rx:"4"}),e.jsx("text",{x:"110",y:"70",fill:"white",fontSize:"12",children:"func2() frame"}),e.jsx("text",{x:"110",y:"90",fill:"white",fontSize:"10",children:"param a: 10, b: 20, local z: 30"}),e.jsx("line",{x1:"320",y1:"70",x2:"350",y2:"70",stroke:"#ef4444",strokeWidth:"2"}),e.jsx("text",{x:"355",y:"75",fill:"#ef4444",fontSize:"12",children:"SP (top)"}),e.jsx("line",{x1:"320",y1:"90",x2:"350",y2:"110",stroke:"#f59e0b",strokeWidth:"2"}),e.jsx("text",{x:"355",y:"115",fill:"#f59e0b",fontSize:"12",children:"FP (current)"}),e.jsx("defs",{children:e.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"10",refX:"9",refY:"5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 5, 0 10",fill:"#6b7280"})})})]}),e.jsx("p",{className:"mt-4 text-center text-sm text-gray-600 dark:text-gray-400",children:"Each stack frame contains parameters, local variables, and the return address. The Stack Pointer (SP) points to the top, the Frame Pointer (FP) helps access the current frame."})]})}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"mb-6 text-2xl font-semibold",children:"Watching Memory Allocation"}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-1",children:[e.jsxs("div",{className:a("rounded-xl border border-green-200 bg-green-50/50 p-5 transition-all duration-300 hover:shadow-md dark:border-green-900 dark:bg-green-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsxs("h3",{className:"mb-3 flex items-center text-xl font-semibold text-green-700 dark:text-green-400",children:[e.jsx("span",{className:"mr-2",children:"ðŸ“¦"})," Stack Allocation in Action"]}),e.jsx(t,{title:"stack_allocation.c â€“ Addresses of locals",initialCode:l}),e.jsx("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:"Tuhina's example shows that local variables have distinct addresses in different calls, and that after a function returns, its former stack space may be reused by another call."})]}),e.jsxs("div",{className:a("rounded-xl border border-purple-200 bg-purple-50/50 p-5 transition-all duration-300 hover:shadow-md dark:border-purple-900 dark:bg-purple-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","motion-safe:animation-delay-200ms"),style:{animationDelay:"200ms"},children:[e.jsxs("h3",{className:"mb-3 flex items-center text-xl font-semibold text-purple-700 dark:text-purple-400",children:[e.jsx("span",{className:"mr-2",children:"ðŸ”„"})," Recursive Stack Frames"]}),e.jsx(t,{title:"recursive_stack.c â€“ Each recursive call gets its own frame",initialCode:n}),e.jsxs("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:["Swadeep's recursive function shows that each call creates a new frame with its own copy of ",e.jsx("code",{children:"n"}),", until the base case is reached, then frames are popped one by one."]})]})]})]}),e.jsxs("section",{className:a("mb-12 rounded-xl bg-yellow-50/70 p-6 dark:bg-yellow-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold text-yellow-800 dark:text-yellow-300",children:"âš ï¸ Common Pitfalls"}),e.jsxs("ul",{className:"list-inside list-disc space-y-2 text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Stack overflow:"})," Too many nested calls or large local arrays can exhaust stack memory."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Dangling pointers:"})," Returning the address of a local variable â€“ the memory is deallocated, leading to undefined behaviour."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Assuming stack grows upward:"})," On most systems it grows downward (addresses decrease). Never rely on direction."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Large local arrays:"})," Declaring ",e.jsx("code",{children:"int arr[1000000]"})," ","inside a function can blow the stack. Use ",e.jsx("code",{children:"malloc"})," for large data."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ignoring return address corruption:"})," Buffer overflows can overwrite the return address, causing security vulnerabilities."]})]})]}),e.jsxs("section",{className:"mb-12 grid gap-6 md:grid-cols-1",children:[e.jsxs("div",{className:a("rounded-xl bg-blue-50/50 p-5 dark:bg-blue-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h3",{className:"mb-3 text-xl font-semibold text-blue-700 dark:text-blue-300",children:"ðŸ“‹ Do's"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700 dark:text-gray-300",children:[e.jsx("li",{children:"Keep local variables small (e.g., avoid huge arrays on stack)."}),e.jsx("li",{children:"Understand that each function call gets its own copies."}),e.jsx("li",{children:"Use static or global variables if data must persist beyond function exit."}),e.jsx("li",{children:"Be mindful of recursion depth â€“ ensure base case is reached."})]})]}),e.jsxs("div",{className:a("rounded-xl bg-purple-50/50 p-5 dark:bg-purple-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","motion-safe:animation-delay-200ms"),style:{animationDelay:"200ms"},children:[e.jsx("h3",{className:"mb-3 text-xl font-semibold text-purple-700 dark:text-purple-300",children:"ðŸš« Don'ts"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700 dark:text-gray-300",children:[e.jsx("li",{children:"Return pointers to local variables."}),e.jsx("li",{children:"Write deeply recursive functions without testing stack limits."}),e.jsx("li",{children:"Assume stack addresses are predictable or reusable safely."})]})]})]}),e.jsxs("section",{className:a("mb-12 rounded-xl border border-dashed border-indigo-300 bg-indigo-50/30 p-6 dark:border-indigo-700 dark:bg-indigo-900/10","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-3 text-2xl font-semibold text-indigo-800 dark:text-indigo-300",children:"ðŸ’¡ Hint â€“ Think Like a Pro"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Observe carefully:"})," In the"," ",e.jsx("code",{children:"stack_allocation.c"})," example, the addresses of local variables inside ",e.jsx("code",{children:"display()"})," are the same each time it's called â€“ because the same stack frame location is reused. In the recursive example, each call gets a different address because multiple frames exist simultaneously. ",e.jsx("br",{}),e.jsxs("span",{className:"mt-2 block",children:[e.jsx("strong",{children:"Try changing this:"})," Modify the recursive function to use a large local array (e.g., ",e.jsx("code",{children:"int big[10000]"}),") and see how deep you can recurse before a stack overflow."]})]})]}),e.jsxs("section",{className:a("mb-12 rounded-xl bg-emerald-50/50 p-6 dark:bg-emerald-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold text-emerald-800 dark:text-emerald-300",children:"ðŸ§  Tips & Tricks (Professional Edge)"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-1",children:[e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsxs("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:["ðŸ› Check stack size with ",e.jsx("code",{children:"ulimit -s"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"On Unix, you can see and adjust stack size. Know your limits when using recursion or large locals."})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsxs("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:["ðŸ“ Use ",e.jsx("code",{children:"alloca()"})," carefully"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx("code",{children:"alloca()"})," allocates on the stack, but it's not standard and can easily overflow."]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ” Understand frame layout for debugging"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Knowing where return addresses are stored helps in low-level debugging and understanding buffer overflows."})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ« Classroom Shortcut"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"At Naihati CNAT, we use a stack of paper plates. Each plate represents a frame, and we write local variables on them. When a function returns, we throw away the top plate."})]})]})]}),e.jsxs("section",{className:a("mb-12 rounded-xl border-l-4 border-blue-500 bg-blue-50/80 p-6 dark:bg-blue-900/30","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","transition-all duration-300 hover:border-l-8 hover:shadow-lg"),children:[e.jsx("h2",{className:"mb-3 text-2xl font-semibold text-blue-800 dark:text-blue-300",children:"ðŸ‘¨â€ðŸ« Teacher's Note â€“ Sukanta Hui"}),e.jsxs("div",{className:"flex flex-wrap items-start gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"mb-2 text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Sukanta Hui"})," (email: sukantahui@codernaccotax.co.in , mobile: 7003756860) has been teaching programming since 1998 â€“ that's ",e.jsxs("strong",{children:[i," years"]})," of experience in C, RDBMS, OS, and web development."]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:`"One of the biggest 'aha' moments for students is when they realise that local variables don't just 'exist' â€“ they are physically placed on a stack, and their lifetime is tied to function calls. This understanding is crucial for debugging, especially with recursion and pointers. I always encourage students to print addresses and see the stack in action."`})]}),e.jsx("div",{className:"rounded-full bg-blue-200 p-3 dark:bg-blue-800",children:e.jsx("svg",{className:"h-12 w-12 text-blue-700 dark:text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})]}),e.jsxs("section",{className:"rounded-xl bg-gray-100 p-6 dark:bg-gray-800",children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"âœ… Mini Checklist"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-1",children:["Do I understand that each function call gets its own stack frame?","Can I explain why local variables vanish after a function returns?","Do I know why returning a pointer to a local is dangerous?","Am I aware of stack size limits for recursion or large arrays?","Can I trace a program and visualise stack frames growing and shrinking?"].map((s,r)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"âœ“"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:s})]},r))})]}),e.jsx("style",{children:`
        @keyframes fadeSlideUp {
          0% {
            opacity: 0;
            transform: translateY(20px);
          }
          100% {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})};export{h as default};
