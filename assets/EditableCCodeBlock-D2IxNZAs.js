import{r as d,j as e,F as h,T as c,S as p,R as x,C as u,D as m,M as b,b as g,d as f}from"./index-imi4Qhij.js";class C extends d.Component{constructor(t){super(t),this.state={code:t.initialCode||"",fontSize:14,theme:"vs-dark",isFullscreen:!1,showFontMenu:!1,showThemeMenu:!1,editorHeight:240},this.editorRef=null,this.monaco=null}handleEditorDidMount=(t,i)=>{this.editorRef=t,this.monaco=i,this.applyTheme(this.state.theme),this.applyFontSize(this.state.fontSize),this.updateEditorHeight(),t.onDidContentSizeChange(()=>this.updateEditorHeight())};updateEditorHeight=()=>{if(!this.editorRef)return;const t=Math.max(this.editorRef.getContentHeight(),180);this.setState({editorHeight:t},()=>{this.editorRef.layout()})};applyTheme=t=>{this.monaco&&this.monaco.editor.setTheme(t)};applyFontSize=t=>{this.editorRef&&this.editorRef.updateOptions({fontSize:t})};resetCode=()=>{this.setState({code:this.props.initialCode||""})};downloadCode=()=>{const t=new Blob([this.state.code],{type:"text/plain"}),i=document.createElement("a");i.href=URL.createObjectURL(t),i.download="program.c",i.click()};formatCode=()=>{let t=this.state.code;t=t.replace(/\{/g,`{
`).replace(/\}/g,`
}
`).replace(/;/g,`;
`).replace(/\n\s*\n\s*\n/g,`

`),this.setState({code:t})};render(){const{code:t,fontSize:i,theme:a,isFullscreen:o,showFontMenu:l,showThemeMenu:n,editorHeight:r}=this.state;return e.jsxs("div",{className:`border border-slate-700 rounded-xl bg-slate-900 ${o?"fixed inset-0 z-[9999] p-4":""}`,style:{overflow:"visible"},children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between bg-slate-800 px-3 py-2 text-xs relative z-[5000]",children:[e.jsxs("span",{className:"text-slate-400 font-semibold flex items-center gap-2",children:[e.jsx(h,{size:14})," C Code Editor"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>this.setState({showFontMenu:!l}),className:"px-2 py-1 rounded bg-blue-600 text-white flex items-center gap-1",children:[e.jsx(c,{size:14})," Font"]}),l&&e.jsx("div",{className:`\r
                    absolute right-0 mt-1 w-32 bg-slate-800 border border-slate-700 \r
                    rounded-lg p-1 text-xs shadow-xl\r
                    z-[999999] pointer-events-auto\r
                  `,children:[12,14,16,18,20,22].map(s=>e.jsxs("button",{onClick:()=>{this.setState({fontSize:s,showFontMenu:!1}),this.applyFontSize(s)},className:`w-full px-2 py-1 rounded text-left ${i===s?"bg-sky-600 text-white":"text-slate-300 hover:bg-slate-700"}`,children:[s,"px"]},s))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>this.setState({showThemeMenu:!n}),className:"px-2 py-1 rounded bg-yellow-600 text-white",children:"ðŸŽ¨ Theme"}),n&&e.jsx("div",{className:`\r
                    absolute right-0 mt-1 w-44 bg-slate-800 border border-slate-700 \r
                    rounded-lg p-1 text-xs shadow-xl \r
                    z-[999999]\r
                  `,children:[{id:"vs-dark",label:"VSCode Dark"},{id:"vs",label:"VSCode Light"},{id:"dracula",label:"Dracula"},{id:"solarized-dark",label:"Solarized Dark"},{id:"solarized-light",label:"Solarized Light"},{id:"github-dark",label:"GitHub Dark"}].map(s=>e.jsx("button",{onClick:()=>{this.applyTheme(s.id),this.setState({theme:s.id,showThemeMenu:!1})},className:`w-full px-2 py-1 rounded text-left ${a===s.id?"bg-sky-600 text-white":"text-slate-300 hover:bg-slate-700"}`,children:s.label},s.id))})]}),e.jsxs("button",{onClick:this.formatCode,className:"px-2 py-1 rounded bg-indigo-600 text-white flex items-center gap-1",children:[e.jsx(p,{size:14})," Format"]}),e.jsxs("button",{onClick:this.resetCode,className:"px-2 py-1 rounded bg-gray-600 text-white flex items-center gap-1",children:[e.jsx(x,{size:14})," Reset"]}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(t),alert("Copied!")},className:"px-2 py-1 rounded bg-slate-600 text-white flex items-center gap-1",children:[e.jsx(u,{size:14})," Copy"]}),e.jsxs("button",{onClick:this.downloadCode,className:"px-2 py-1 rounded bg-teal-600 text-white flex items-center gap-1",children:[e.jsx(m,{size:14})," Save"]}),e.jsxs("button",{onClick:()=>this.setState(s=>({isFullscreen:!s.isFullscreen}),()=>this.editorRef?.layout()),className:"px-2 py-1 rounded bg-purple-600 text-white flex items-center gap-1",children:[o?e.jsx(b,{size:14}):e.jsx(g,{size:14}),"Full"]})]})]}),e.jsx(f,{language:"c",value:t,onChange:(s="")=>this.setState({code:s}),height:r,theme:a,onMount:this.handleEditorDidMount,options:{fontSize:i,minimap:{enabled:!1},automaticLayout:!0,scrollBeyondLastLine:!1,padding:{top:18,bottom:18}}})]})}}C.defaultProps={initialCode:`#include <stdio.h>

int main() {
    printf("Hello, C from Coder & AccoTax!\\n");
    return 0;
}
`};export{C as E};
