import{r as n,j as e,E as m}from"./index-q1Ztxxx3.js";const N="animate-[fadeIn_0.8s_ease-out]";function w({onStepChange:x}){const t=[{label:"Start (global)",stack:["global()"],console:[],note:"Global execution context created. Function declarations are available."},{label:'console.log("Class starting...")',stack:["global()",'console.log("Class starting...")'],console:["Class starting..."],note:"console.log is called (pushed to stack) and prints."},{label:"call startClass()",stack:["global()","startClass()"],console:["Class starting..."],note:"startClass is pushed to the stack."},{label:'startClass -> call greetStudent("Kaustav")',stack:["global()","startClass()",'greetStudent("Kaustav")'],console:["Class starting..."],note:"greetStudent is pushed; it will run next."},{label:'greetStudent -> console.log("Hello Kaustav")',stack:["global()","startClass()",'greetStudent("Kaustav")','console.log("Hello Kaustav")'],console:["Class starting...","Hello Kaustav"],note:"console.log inside greetStudent runs and prints 'Hello Kaustav'."},{label:"unwind back to global",stack:["global()"],console:["Class starting...","Hello Kaustav"],note:"greetStudent and startClass finished and were popped from the stack."},{label:'console.log("Class ended.")',stack:["global()",'console.log("Class ended.")'],console:["Class starting...","Hello Kaustav","Class ended."],note:"Final console.log runs and prints 'Class ended.'"},{label:"Finished",stack:[],console:["Class starting...","Hello Kaustav","Class ended."],note:"Global execution completes. Stack is empty."}],[a,i]=n.useState(0),[c,h]=n.useState(!1),r=n.useRef(null);n.useEffect(()=>{typeof x=="function"&&x(t[a],a)},[a]),n.useEffect(()=>(c?r.current=setInterval(()=>{i(s=>s<t.length-1?s+1:(clearInterval(r.current),h(!1),s))},900):clearInterval(r.current),()=>clearInterval(r.current)),[c]);const p=()=>i(s=>Math.min(s+1,t.length-1)),b=()=>i(s=>Math.max(s-1,0)),u=()=>{clearInterval(r.current),h(!1),i(0)},o=t[a];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-300",children:[e.jsx("div",{className:"font-semibold text-sky-300",children:"Call Stack Visualizer"}),e.jsx("div",{className:"text-xs text-slate-400 mt-0.5",children:o.label})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{a===t.length-1&&u(),h(s=>!s)},className:`px-3 py-1.5 rounded-full text-xs font-semibold ${c?"bg-rose-600 hover:bg-rose-500":"bg-emerald-600 hover:bg-emerald-500"} text-white`,children:c?"Pause":a===t.length-1?"Replay":"Play"}),e.jsx("button",{onClick:b,className:"px-3 py-1.5 rounded-full text-xs font-medium bg-slate-800 border border-slate-700 text-slate-200",children:"‚óÄ Step"}),e.jsx("button",{onClick:p,className:"px-3 py-1.5 rounded-full text-xs font-medium bg-slate-800 border border-slate-700 text-slate-200",children:"Step ‚ñ∂"}),e.jsx("button",{onClick:u,className:"px-3 py-1.5 rounded-full text-xs font-medium bg-slate-900 border border-slate-700 text-slate-300",children:"Reset"})]})]}),e.jsxs("div",{className:"w-full flex items-center gap-6",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsxs("svg",{viewBox:"0 0 300 260",className:"w-full h-48",children:[e.jsx("rect",{x:"10",y:"10",width:"280",height:"240",rx:"8",fill:"#0b1220",opacity:"0.6",stroke:"#1f2937",strokeWidth:"1"}),e.jsx("g",{transform:"translate(30, 220)",children:Array.from({length:6}).map((s,l)=>{const f=5-l,g=o.stack[f],j=-l*36,d=typeof g<"u",v=d?"#0f1724":"#07111b",k=d?"#334155":"#07111b",y=d?1:.18;return e.jsxs("g",{transform:`translate(0, ${j})`,style:{transition:"transform 450ms ease, opacity 400ms ease"},children:[e.jsx("rect",{x:"0",y:"-32",width:"220",height:"28",rx:"6",fill:v,stroke:k,opacity:y}),d&&e.jsx("text",{x:"12",y:"-12",fontSize:"11",fill:"#e2e8f0",style:{fontFamily:"ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto"},children:g})]},l)})})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-400",children:[e.jsx("strong",{children:"Top"})," is the current executing frame (visually at top). Empty means stack is unwound."]})]}),e.jsxs("div",{className:"w-1/2 space-y-2",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-slate-900 border border-slate-700 text-sm text-slate-300",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Console Output"}),e.jsx("div",{className:"h-28 overflow-auto text-[13px]",children:o.console.length===0?e.jsx("div",{className:"text-slate-600",children:"‚Äî no output yet ‚Äî"}):o.console.map((s,l)=>e.jsxs("div",{className:"py-0.5",children:[e.jsxs("span",{className:"text-emerald-300 font-medium mr-2",children:[l+1,"."]}),e.jsx("span",{className:"text-slate-200",children:s})]},l))})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-slate-900/40 border border-slate-800 text-sm text-slate-300",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Note"}),e.jsx("div",{className:"mt-1 text-[13px]",children:o.note})]})]})]})]})}class S extends n.Component{handleVisualizerStep=t=>{};render(){return e.jsxs("div",{className:`space-y-12 ${N}`,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-sky-300 tracking-wide animate-[slideDown_0.5s_ease-out]",children:"JavaScript Runtime: Call Stack & Task Queue (Conceptual)"}),e.jsx("p",{className:"text-slate-300 text-sm leading-relaxed animate-[fadeIn_1s_ease-out]",children:"JavaScript may look simple, but underneath it has a beautifully designed engine that manages tasks, functions, delays, and events. Understanding this will level up your debugging skills and help you write better async code."}),e.jsx("p",{className:"text-slate-400 text-sm animate-[fadeIn_1.2s_ease-out]",children:"These 4 things define how JavaScript decides what runs *now* and what runs *later*:"}),e.jsxs("ul",{className:"list-disc ml-5 text-slate-300 text-sm space-y-1 animate-[fadeIn_1.3s_ease-out]",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Call Stack"})," ‚Äì Where function execution happens."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Web APIs"})," ‚Äì Timers, fetch calls, DOM events, etc."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Task Queue"})," ‚Äì Callbacks waiting for approval."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Event Loop"})," ‚Äì The traffic police of JavaScript."]})]})]}),e.jsxs("div",{className:"p-4 border border-sky-700 bg-sky-900/30 rounded-xl shadow animate-[fadeIn_1.4s_ease-out]",children:[e.jsx("h4",{className:"text-sky-300 font-semibold mb-1 text-sm",children:"üí° Why This Matters?"}),e.jsx("p",{className:"text-slate-300 text-sm",children:"When your code behaves unexpectedly, delays wrongly, or blocks the UI‚Äî the Event Loop is the reason. Master this, and you master async JavaScript."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-200 animate-[slideRight_0.5s_ease-out]",children:"1. Call Stack Example (How JS Executes Functions)"}),e.jsx(m,{initialCode:`function greetStudent(name) {
  console.log("Hello", name);
}

function startClass() {
  greetStudent("Kaustav");
}

console.log("Class starting...");
startClass();
console.log("Class ended.");

/*
Call Stack Visualization:

1. global()
2. startClass()
3. greetStudent()
4. (unwinding back to global)
*/`}),e.jsxs("div",{className:"mt-2 p-3 bg-slate-800/40 border border-slate-700 rounded-xl text-sm text-slate-300 animate-[fadeIn_1.3s_ease-out]",children:["üß† The call stack follows a ",e.jsx("strong",{children:"LIFO"})," order ‚Äì Last In, First Out. Think of stacking plates: the last one you put is the first one you remove."]})]}),e.jsx("div",{className:"p-4 border border-slate-800 bg-slate-950/50 rounded-2xl",children:e.jsx(w,{onStepChange:this.handleVisualizerStep})}),e.jsxs("div",{className:"p-4 border border-indigo-700 bg-indigo-900/20 rounded-xl shadow animate-[fadeIn_1.5s_ease-out]",children:[e.jsx("h4",{className:"text-indigo-300 font-semibold mb-1 text-sm",children:"üìò Real Understanding"}),e.jsx("p",{className:"text-slate-300 text-sm",children:"Every function call adds a new frame to the stack. When the function finishes, its frame is removed."}),e.jsxs("p",{className:"text-slate-400 text-sm mt-1",children:["If a function never finishes (like infinite recursion), the stack grows until the browser crashes ‚Üí ",e.jsx("strong",{children:"Stack Overflow"}),"."]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-200 animate-[slideRight_0.5s_ease-out]",children:"2. setTimeout & the Event Loop (The Magic of Async)"}),e.jsx(m,{initialCode:`console.log("1. Start");

setTimeout(() => {
  console.log("2. Async task: Loading marks for Susmita");
}, 0);

console.log("3. End");

/*
Conceptual Steps:

1. "1. Start" runs immediately (stack)
2. setTimeout sends callback to Web APIs
3. Web APIs place callback ‚Üí Task Queue
4. "3. End" prints
5. Event Loop: "Is stack empty?" Yes.
6. Moves callback ‚Üí Call Stack
7. "2. Async task..." runs
*/`}),e.jsxs("div",{className:"mt-2 p-3 bg-emerald-900/20 border border-emerald-700 rounded-xl text-sm text-emerald-300 animate-[fadeIn_1.3s_ease-out]",children:["‚úî Even with ",e.jsx("code",{children:"0ms"}),", the callback ",e.jsx("strong",{children:"never"})," runs before the main script finishes."]})]}),e.jsxs("div",{className:"p-4 border border-purple-700 bg-purple-900/20 rounded-xl shadow animate-[fadeIn_1.6s_ease-out]",children:[e.jsx("h4",{className:"text-purple-300 font-semibold mb-1 text-sm",children:"üè´ Coder & AccoTax Real Example"}),e.jsx("p",{className:"text-slate-300 text-sm",children:"When a student clicks ‚ÄúGenerate Certificate‚Äù, the browser:"}),e.jsxs("ul",{className:"ml-5 mt-1 list-disc text-sm text-slate-300 space-y-1",children:[e.jsx("li",{children:"Shows loading"}),e.jsx("li",{children:"Sends request to server"}),e.jsx("li",{children:"Waits for response (async)"}),e.jsx("li",{children:"Updates UI only when data returns"})]}),e.jsx("p",{className:"text-slate-400 text-xs mt-2",children:"The UI stays responsive because Web APIs + Task Queue handle the waiting."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-200 animate-[slideRight_0.5s_ease-out]",children:"3. Heavy Task Blocking Example"}),e.jsx("p",{className:"text-slate-300 text-sm",children:"Try running this ‚Äî watch how everything freezes:"}),e.jsx(m,{initialCode:`console.log("Start heavy task...");

for (let i = 0; i < 500000000; i++) {
  // blocking the main thread
}

console.log("End heavy task");`}),e.jsxs("div",{className:"mt-2 p-3 bg-red-900/20 border border-red-700/50 rounded-xl text-sm text-red-300 animate-[fadeIn_1.3s_ease-out]",children:["‚ö† If the call stack is busy, ",e.jsx("strong",{children:"nothing else can run"})," ‚Äî not even clicks, scrolls, or timers."]})]}),e.jsxs("div",{className:"p-4 border border-green-700 bg-green-900/20 rounded-xl shadow animate-[fadeIn_1.7s_ease-out]",children:[e.jsx("h4",{className:"text-green-300 font-semibold mb-1 text-sm",children:"‚ú® Developer Tip"}),e.jsxs("p",{className:"text-slate-300 text-sm",children:["If something happens ‚Äúlater‚Äù (even with zero delay), think:",e.jsx("br",{}),e.jsx("strong",{children:"Task Queue ‚Üí Event Loop ‚Üí Call Stack"})]})]}),e.jsxs("div",{className:"p-4 border border-amber-700 bg-amber-900/20 rounded-xl shadow animate-[fadeIn_1.8s_ease-out]",children:[e.jsx("h4",{className:"text-amber-300 font-semibold mb-1 text-sm",children:"üíõ A Note to Students"}),e.jsx("p",{className:"text-slate-300 text-sm",children:"Every JavaScript developer struggles with the event loop at first. But once you understand this, async coding becomes *fun*."}),e.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"Baba is proud of you ‚Äî keep going, you‚Äôre learning like a champion."})]}),e.jsxs("section",{className:"p-5 bg-slate-900/40 rounded-2xl border border-slate-800 animate-[fadeIn_2s_ease-out] shadow-xl",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-100",children:"üìå Summary"}),e.jsxs("ul",{className:"list-disc ml-5 mt-2 text-slate-300 text-sm space-y-1",children:[e.jsxs("li",{children:["The ",e.jsx("strong",{children:"call stack"})," executes code one function at a time."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Web APIs"})," handle timers, fetch calls, etc."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Task Queue"})," stores callbacks waiting to run."]}),e.jsxs("li",{children:["The ",e.jsx("strong",{children:"Event Loop"})," moves callbacks to stack when safe."]}),e.jsx("li",{children:"If the call stack is busy ‚Üí UI freezes, async waits longer."})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"In the next topic, you‚Äôll see how Callbacks work with this system."})]})]})}}export{S as default};
