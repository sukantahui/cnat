import{r,j as e}from"./index-CG3iA-Ea.js";import{c as E}from"./clsx-B-dksMZM.js";const W=()=>{const[f,b]=r.useState([]),[j,N]=r.useState([]),[a,h]=r.useState({posts:!1,users:!1,single:!1}),[k,n]=r.useState(null),[c,I]=r.useState(1),[x,D]=r.useState(null),[g,v]=r.useState(null),[_,p]=r.useState(0),[m,F]=r.useState("onMount"),[y,w]=r.useState(null),u=r.useRef(0),d=r.useRef(!0),C={posts:"https://jsonplaceholder.typicode.com/posts",users:"https://jsonplaceholder.typicode.com/users",singlePost:s=>`https://jsonplaceholder.typicode.com/posts/${s}`,userPosts:s=>`https://jsonplaceholder.typicode.com/posts?userId=${s}`};r.useEffect(()=>(console.log("üü¢ useEffect: Fetching posts on component mount"),A(),()=>{console.log("üî¥ Cleanup: Cancelling any pending requests"),y&&y.abort(),d.current=!1}),[]),r.useEffect(()=>{m==="onDependency"&&c&&(console.log(`üü¢ useEffect: Fetching posts for user ${c}`),P(c))},[c,m]),r.useEffect(()=>{m==="conditional"&&x&&x>0&&x<=100&&(console.log(`üü¢ useEffect: Fetching post ${x}`),S(x))},[x,m]);const A=async()=>{try{h(o=>({...o,posts:!0})),n(null);const s=new AbortController;w(s),await new Promise(o=>setTimeout(o,800));const t=await fetch(C.posts,{signal:s.signal});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const i=await t.json();d.current&&(b(i.slice(0,5)),p(o=>o+1),u.current++)}catch(s){s.name!=="AbortError"&&d.current&&(console.error("Fetch error:",s),n(`Failed to fetch posts: ${s.message}`),u.current===0&&b([{id:1,title:"Fallback Post 1",body:"This is fallback data for educational purposes."},{id:2,title:"Fallback Post 2",body:"Network error simulation in action."}]))}finally{d.current&&h(s=>({...s,posts:!1}))}},P=async s=>{try{h(l=>({...l,users:!0})),n(null);const t=new AbortController;w(t),await new Promise(l=>setTimeout(l,600));const i=await fetch(C.userPosts(s),{signal:t.signal});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.json();d.current&&(N(o),p(l=>l+1),u.current++)}catch(t){t.name!=="AbortError"&&d.current&&(console.error("Fetch error:",t),n(`Failed to fetch user posts: ${t.message}`))}finally{d.current&&h(t=>({...t,users:!1}))}},S=async s=>{try{h(l=>({...l,single:!0})),n(null);const t=new AbortController;w(t),await new Promise(l=>setTimeout(l,400));const i=await fetch(C.singlePost(s),{signal:t.signal});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.json();d.current&&(v(o),p(l=>l+1),u.current++)}catch(t){t.name!=="AbortError"&&d.current&&(console.error("Fetch error:",t),n(`Failed to fetch post ${s}: ${t.message}`))}finally{d.current&&h(t=>({...t,single:!1}))}},M=()=>{n("Simulated network error: Unable to connect to server"),b([]),N([]),v(null)},L=()=>{b([]),N([]),v(null),n(null),p(0),u.current=0},T=()=>{y&&(y.abort(),n("Request was aborted by user"))};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8 animate-[fadeIn_0.8s_ease-out]",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:["Fetching Data with ",e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"useEffect"})]}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Mastering API calls, loading states, and error handling in React components"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-500 animate-[slideUp_0.6s_ease-out]",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-blue-100 dark:bg-blue-900 p-2 rounded-lg mr-3",children:"üåê"}),"Why useEffect for Data Fetching?"]}),e.jsxs("div",{className:"space-y-4 text-gray-700 dark:text-gray-300",children:[e.jsxs("p",{children:[e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"useEffect"})," is the primary hook for side effects like data fetching because it lets you synchronize your component with external systems."]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 p-4",children:[e.jsx("strong",{className:"block mb-2 text-blue-800 dark:text-blue-300",children:"Key Concept:"}),e.jsx("p",{children:"Data fetching is a side effect that should happen after the component renders, not during render. useEffect provides the perfect timing for this."})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 dark:border-green-400 p-4",children:[e.jsx("strong",{className:"block mb-2 text-green-800 dark:text-green-300",children:"The Fetching Pattern:"}),e.jsx("pre",{className:"bg-gray-800 text-gray-100 p-3 rounded-lg overflow-x-auto text-sm",children:`useEffect(() => {
  let isMounted = true;
  
  const fetchData = async () => {
    setLoading(true);
    try {
      const response = await fetch(url);
      const data = await response.json();
      
      if (isMounted) {
        setData(data);
      }
    } catch (error) {
      if (isMounted) {
        setError(error.message);
      }
    } finally {
      if (isMounted) {
        setLoading(false);
      }
    }
  };
  
  fetchData();
  
  return () => {
    isMounted = false;
  };
}, [dependencies]);`})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Common Fetching Strategies"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"font-bold text-sm mb-1",children:"On Mount"}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.jsx("code",{children:"useEffect(() => {}, [])"})})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"font-bold text-sm mb-1",children:"On Dependency Change"}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.jsx("code",{children:"useEffect(() => {}, [userId])"})})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"font-bold text-sm mb-1",children:"Conditional"}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.jsx("code",{children:"useEffect(() => { if (id) {...} }, [id])"})})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"font-bold text-sm mb-1",children:"Manual Trigger"}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Button click or event"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-500 animate-[slideUp_0.6s_ease-out_0.2s]",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6 flex items-center",children:[e.jsx("span",{className:"bg-purple-100 dark:bg-purple-900 p-2 rounded-lg mr-3",children:"üìä"}),"Data Fetching Lifecycle"]}),e.jsx("div",{className:"relative h-64 mb-6",children:e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 600 240",className:"overflow-visible",children:[e.jsxs("g",{className:"hover:scale-105 transition-transform duration-300",children:[e.jsx("rect",{x:"50",y:"40",width:"100",height:"50",rx:"8",fill:"#3B82F6",fillOpacity:"0.2",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("text",{x:"100",y:"70",textAnchor:"middle",className:"text-xs font-semibold fill-gray-800 dark:fill-gray-100",children:"Component Renders"}),e.jsx("text",{x:"100",y:"85",textAnchor:"middle",className:"text-[10px] fill-blue-600",children:"Initial state"})]}),e.jsx("path",{d:"M 155 65 L 195 65",stroke:"#9CA3AF",strokeWidth:"2"}),e.jsx("polygon",{points:"195,65 185,60 185,70",fill:"#9CA3AF"}),e.jsxs("g",{className:"hover:scale-105 transition-transform duration-300",children:[e.jsx("rect",{x:"200",y:"40",width:"100",height:"50",rx:"8",fill:"#10B981",fillOpacity:"0.2",stroke:"#10B981",strokeWidth:"2"}),e.jsx("text",{x:"250",y:"70",textAnchor:"middle",className:"text-xs font-semibold fill-gray-800 dark:fill-gray-100",children:"useEffect Runs"}),e.jsx("text",{x:"250",y:"85",textAnchor:"middle",className:"text-[10px] fill-green-600",children:"API call starts"})]}),e.jsx("path",{d:"M 305 65 L 345 65",stroke:"#9CA3AF",strokeWidth:"2"}),e.jsx("polygon",{points:"345,65 335,60 335,70",fill:"#9CA3AF"}),e.jsxs("g",{className:"hover:scale-105 transition-transform duration-300",children:[e.jsx("rect",{x:"350",y:"40",width:"100",height:"50",rx:"8",fill:"#F59E0B",fillOpacity:"0.2",stroke:"#F59E0B",strokeWidth:"2"}),e.jsx("text",{x:"400",y:"70",textAnchor:"middle",className:"text-xs font-semibold fill-gray-800 dark:fill-gray-100",children:"Loading State"}),e.jsx("text",{x:"400",y:"85",textAnchor:"middle",className:"text-[10px] fill-yellow-600",children:"Show spinner"})]}),e.jsxs("g",{children:[e.jsx("path",{d:"M 400 95 L 400 130 L 250 130 L 250 160",stroke:"#10B981",strokeWidth:"2",fill:"none"}),e.jsx("text",{x:"325",y:"145",textAnchor:"middle",className:"text-[10px] fill-green-600 font-medium",children:"Success ‚Üí Update State"})]}),e.jsxs("g",{children:[e.jsx("path",{d:"M 400 95 L 400 170 L 100 170 L 100 160",stroke:"#EF4444",strokeWidth:"2",fill:"none",strokeDasharray:"4,4"}),e.jsx("text",{x:"250",y:"190",textAnchor:"middle",className:"text-[10px] fill-red-500 font-medium",children:"Error ‚Üí Show Error State"})]}),e.jsxs("g",{className:"hover:scale-105 transition-transform duration-300",children:[e.jsx("rect",{x:"200",y:"165",width:"100",height:"50",rx:"8",fill:"#10B981",fillOpacity:"0.3",stroke:"#10B981",strokeWidth:"2"}),e.jsx("text",{x:"250",y:"195",textAnchor:"middle",className:"text-xs font-semibold fill-gray-800 dark:fill-gray-100",children:"Data Loaded"}),e.jsx("text",{x:"250",y:"210",textAnchor:"middle",className:"text-[10px] fill-green-600",children:"Render data"})]}),e.jsxs("g",{className:"hover:scale-105 transition-transform duration-300",children:[e.jsx("rect",{x:"50",y:"165",width:"100",height:"50",rx:"8",fill:"#EF4444",fillOpacity:"0.3",stroke:"#EF4444",strokeWidth:"2"}),e.jsx("text",{x:"100",y:"195",textAnchor:"middle",className:"text-xs font-semibold fill-gray-800 dark:fill-gray-100",children:"Error State"}),e.jsx("text",{x:"100",y:"210",textAnchor:"middle",className:"text-[10px] fill-red-600",children:"Show error message"})]})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-300",children:_}),e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"API Calls"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-300",children:f.length+j.length+(g?1:0)}),e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Items Loaded"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-300",children:k?1:0}),e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Errors"})]})]})]})]}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 flex items-center animate-[fadeIn_0.8s_ease-out_0.4s]",children:[e.jsx("span",{className:"bg-green-100 dark:bg-green-900 p-3 rounded-xl mr-4",children:"üéÆ"}),"Interactive Fetching Examples"]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Control Panel"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("button",{onClick:A,disabled:a.posts,className:E("py-3 rounded-lg font-medium transition-all duration-300",a.posts?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400":"bg-blue-500 hover:bg-blue-600 text-white hover:scale-[1.02]"),children:a.posts?"‚è≥ Loading Posts...":"üìù Fetch Posts"}),e.jsx("button",{onClick:()=>P(c),disabled:a.users,className:E("py-3 rounded-lg font-medium transition-all duration-300",a.users?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400":"bg-purple-500 hover:bg-purple-600 text-white hover:scale-[1.02]"),children:a.users?"‚è≥ Loading User...":"üë§ Fetch User Posts"}),e.jsx("button",{onClick:M,className:"py-3 rounded-lg font-medium bg-red-500 hover:bg-red-600 text-white transition-all duration-300 hover:scale-[1.02]",children:"üö´ Simulate Error"}),e.jsx("button",{onClick:T,className:"py-3 rounded-lg font-medium bg-yellow-500 hover:bg-yellow-600 text-white transition-all duration-300 hover:scale-[1.02]",children:"‚èπÔ∏è Abort Request"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"User ID (for dependency fetching):"}),e.jsx("div",{className:"flex space-x-2",children:[1,2,3,4,5].map(s=>e.jsx("button",{onClick:()=>I(s),className:E("px-3 py-2 rounded-lg transition-colors duration-300",c===s?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Post ID (conditional fetch):"}),e.jsx("input",{type:"number",min:"1",max:"100",value:x||"",onChange:s=>D(Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",placeholder:"Enter post ID (1-100)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fetch Strategy:"}),e.jsxs("select",{value:m,onChange:s=>F(s.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:[e.jsx("option",{value:"onMount",children:"On Component Mount"}),e.jsx("option",{value:"onDependency",children:"On Dependency Change"}),e.jsx("option",{value:"conditional",children:"Conditional Fetching"}),e.jsx("option",{value:"manual",children:"Manual Trigger Only"})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:L,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-300",children:"Reset All Data"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"üìù Posts (onMount)"}),a.posts&&e.jsxs("div",{className:"flex items-center text-blue-500 dark:text-blue-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-sm",children:"Loading..."})]})]}),f.length===0&&!a.posts?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"text-4xl mb-2",children:"üì≠"}),e.jsx("p",{children:"No posts loaded yet"})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:f.map(s=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-300",children:[e.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-1 line-clamp-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:s.body})]},s.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:["üë§ User ",c," Posts"]}),a.users&&e.jsxs("div",{className:"flex items-center text-purple-500 dark:text-purple-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-500"}),e.jsx("span",{className:"ml-2 text-sm",children:"Loading..."})]})]}),j.length===0&&!a.users?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"text-4xl mb-2",children:"üë§"}),e.jsx("p",{children:"Select user to load posts"}),e.jsxs("p",{className:"text-sm mt-2",children:["Current strategy: ",m]})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:j.map(s=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-300",children:[e.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 mb-1 line-clamp-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:s.body})]},s.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"üìÑ Single Post"}),a.single&&e.jsxs("div",{className:"flex items-center text-green-500 dark:text-green-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-green-500"}),e.jsx("span",{className:"ml-2 text-sm",children:"Loading..."})]})]}),!g&&!a.single?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"text-4xl mb-2",children:"üîç"}),e.jsx("p",{children:"Enter post ID to load"}),e.jsx("p",{className:"text-sm mt-2",children:"Conditional fetching"})]}):e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:g&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-2",children:g.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:g.body}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:["Post ID: ",g.id," | User ID: ",g.userId]})]})})]})]})]}),k&&e.jsx("div",{className:"mb-12 animate-[fadeIn_0.5s_ease-out]",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 dark:border-red-400 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900 p-3 rounded-lg mr-4",children:e.jsx("span",{className:"text-2xl",children:"üö®"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-red-700 dark:text-red-300 mb-2",children:"Error Occurred"}),e.jsx("p",{className:"text-red-600 dark:text-red-400",children:k})]}),e.jsx("button",{onClick:()=>n(null),className:"px-4 py-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-800 transition-colors duration-300",children:"Dismiss"})]})})}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6 flex items-center animate-[fadeIn_0.8s_ease-out_0.6s]",children:[e.jsx("span",{className:"bg-yellow-100 dark:bg-yellow-900 p-3 rounded-xl mr-4",children:"üíª"}),"Implementation Patterns"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-900 dark:bg-gray-950 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-lg mr-4 group-hover:scale-110 transition-transform duration-300",children:e.jsx("span",{className:"text-2xl",children:"üîß"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Basic Fetch Pattern"})]}),e.jsx("pre",{className:"text-sm text-gray-100 overflow-x-auto bg-gray-800 rounded-lg p-4",children:`useEffect(() => {
  let isMounted = true;
  
  const fetchData = async () => {
    setLoading(true);
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error('Network error');
      const data = await response.json();
      
      // Only update state if component is still mounted
      if (isMounted) {
        setData(data);
        setError(null);
      }
    } catch (err) {
      if (isMounted) {
        setError(err.message);
        // Optional: Set fallback data
        setData([]);
      }
    } finally {
      if (isMounted) {
        setLoading(false);
      }
    }
  };
  
  fetchData();
  
  return () => {
    isMounted = false; // Cleanup
  };
}, [url]); // Re-fetch when URL changes`}),e.jsx("div",{className:"mt-4 p-3 bg-blue-900/30 rounded-lg",children:e.jsxs("p",{className:"text-blue-200 text-sm",children:[e.jsx("strong",{children:"Key Point:"})," Always check ",e.jsx("code",{children:"isMounted"})," before updating state to avoid memory leaks."]})})]}),e.jsxs("div",{className:"bg-gray-900 dark:bg-gray-950 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900 p-3 rounded-lg mr-4 group-hover:scale-110 transition-transform duration-300",children:e.jsx("span",{className:"text-2xl",children:"‚èπÔ∏è"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"AbortController Pattern"})]}),e.jsx("pre",{className:"text-sm text-gray-100 overflow-x-auto bg-gray-800 rounded-lg p-4",children:`useEffect(() => {
  const abortController = new AbortController();
  
  const fetchData = async () => {
    setLoading(true);
    try {
      const response = await fetch(url, {
        signal: abortController.signal
      });
      const data = await response.json();
      setData(data);
    } catch (err) {
      // Check if error is from abort
      if (err.name !== 'AbortError') {
        setError(err.message);
      }
    } finally {
      setLoading(false);
    }
  };
  
  fetchData();
  
  // Cleanup: abort fetch on unmount
  return () => {
    abortController.abort();
  };
}, [url]);`}),e.jsx("div",{className:"mt-4 p-3 bg-green-900/30 rounded-lg",children:e.jsxs("p",{className:"text-green-200 text-sm",children:[e.jsx("strong",{children:"Key Point:"})," AbortController allows canceling fetch requests when component unmounts or when a new request starts."]})})]})]})]}),e.jsxs("div",{className:"mb-12 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-2xl p-6 animate-[fadeIn_0.8s_ease-out_0.8s]",children:[e.jsxs("h2",{className:"text-2xl font-bold text-red-700 dark:text-red-300 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-red-100 dark:bg-red-900 p-3 rounded-xl mr-4",children:"üö´"}),"Common Pitfalls & Anti-Patterns"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[e.jsx("h4",{className:"font-bold text-red-600 dark:text-red-400 mb-2",children:"1. Missing Loading States"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"When Swadeep forgets to implement loading states, users see stale data or empty screens during fetches, creating a poor UX."})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[e.jsx("h4",{className:"font-bold text-red-600 dark:text-red-400 mb-2",children:"2. No Error Handling"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Abhronila's app crashes when the API is down because she doesn't wrap fetch calls in try-catch blocks or handle HTTP errors."})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[e.jsx("h4",{className:"font-bold text-red-600 dark:text-red-400 mb-2",children:"3. Memory Leaks from Unmounted Components"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Debangshu navigates away while data is fetching, but the component still updates state after unmounting, causing React warnings."})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[e.jsx("h4",{className:"font-bold text-red-600 dark:text-red-400 mb-2",children:"4. Infinite Re-render Loops"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Tuhina includes state setters in dependency arrays without useCallback, causing useEffect to run endlessly."})]})]})]}),e.jsxs("div",{className:"mb-12 bg-green-50 dark:bg-green-900/10 border border-green-200 dark:border-green-800 rounded-2xl p-6 animate-[fadeIn_0.8s_ease-out_1s]",children:[e.jsxs("h2",{className:"text-2xl font-bold text-green-700 dark:text-green-300 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-green-100 dark:bg-green-900 p-3 rounded-xl mr-4",children:"‚úÖ"}),"Best Practices for Data Fetching"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg mb-3 text-gray-800 dark:text-gray-100",children:"Essential Patterns:"}),e.jsxs("ul",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-300 rounded-full p-1 mr-3",children:"‚úì"}),"Always handle loading, success, and error states"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-300 rounded-full p-1 mr-3",children:"‚úì"}),"Use AbortController or isMounted flag for cleanup"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-300 rounded-full p-1 mr-3",children:"‚úì"}),"Implement retry logic for failed requests"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-300 rounded-full p-1 mr-3",children:"‚úì"}),"Cache responses when appropriate"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg mb-3 text-gray-800 dark:text-gray-100",children:"Performance Tips:"}),e.jsxs("ul",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-300 rounded-full p-1 mr-3",children:"‚ö°"}),"Debounce rapid dependency changes"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-300 rounded-full p-1 mr-3",children:"‚ö°"}),"Use React Query or SWR for complex fetching"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-300 rounded-full p-1 mr-3",children:"‚ö°"}),"Implement skeleton loaders for better UX"]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-300 rounded-full p-1 mr-3",children:"‚ö°"}),"Consider lazy loading for non-critical data"]})]})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-900 border-l-8 border-blue-500 dark:border-blue-400 rounded-2xl p-6 mb-12 hover:shadow-2xl transition-all duration-500 group",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-4 rounded-xl mr-6 group-hover:rotate-12 transition-transform duration-300",children:e.jsx("span",{className:"text-3xl",children:"üë®‚Äçüè´"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"Teacher's Note"}),e.jsxs("div",{className:"mb-4 p-4 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:[e.jsx("strong",{children:"Data fetching is like ordering food at a restaurant in Ichapur!"})," When you order (send request), you get a confirmation (loading state). The food arrives (success), or they tell you it's unavailable (error). You wouldn't want the waiter to keep bringing food after you've left (memory leak)!"]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:"Think of it this way: When Tuhina opens her school app in Barrackpore, she expects to see either her timetable (data), a loading spinner (loading), or an error message if the server is down. All three states must be handled gracefully."}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Remember:"})," A good fetch implementation handles the happy path (success), the waiting path (loading), and the sad path (error). Missing any of these creates a frustrating user experience."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[e.jsx("div",{className:"font-bold text-blue-600 dark:text-blue-400 mb-1",children:"Professional Insight:"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"In 27 years, I've learned that 90% of data fetching bugs come from missing cleanup, unhandled errors, or infinite loops. Master these patterns and you'll avoid most production issues."})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg",children:[e.jsx("div",{className:"font-bold text-green-600 dark:text-green-400 mb-1",children:"Debugging Tip:"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Add console logs at each stage of your fetch: start, success, error, cleanup. This creates a breadcrumb trail for debugging network issues."})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex flex-wrap items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"mr-4",children:e.jsx("strong",{children:"Sukanta Hui"})}),e.jsx("span",{className:"mr-4",children:"27 years experience"}),e.jsx("span",{children:"Web Development Expert"})]})})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-2xl p-6 border border-purple-200 dark:border-purple-800 mb-12",children:[e.jsxs("h3",{className:"text-xl font-bold text-purple-700 dark:text-purple-300 mb-4 flex items-center",children:[e.jsx("span",{className:"bg-purple-100 dark:bg-purple-900 p-3 rounded-lg mr-4",children:"üí°"}),"Thinking Exercise"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Observe carefully:"}),' Click "Fetch Posts" multiple times quickly. Notice how the loading state prevents duplicate requests. What would happen without this protection?']}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Try changing this:"}),' Set fetch strategy to "On Dependency Change" and change User ID rapidly. Notice the behavior. How could you improve this with debouncing?']}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Think about:"})," How would you implement a retry mechanism for failed requests? What state would you need to track retry attempts?"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 dark:from-gray-900 dark:to-black rounded-2xl p-6 text-white",children:[e.jsx("h3",{className:"text-2xl font-bold mb-6 text-center",children:"üìã Data Fetching Checklist"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-700/50 rounded-xl",children:[e.jsx("div",{className:"text-3xl mb-3",children:"üîß"}),e.jsx("h4",{className:"font-bold mb-2",children:"Setup"}),e.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[e.jsx("li",{children:"Define loading state"}),e.jsx("li",{children:"Define error state"}),e.jsx("li",{children:"Define data state"}),e.jsx("li",{children:"Choose fetch strategy"})]})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-700/50 rounded-xl",children:[e.jsx("div",{className:"text-3xl mb-3",children:"üöÄ"}),e.jsx("h4",{className:"font-bold mb-2",children:"Execution"}),e.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[e.jsx("li",{children:"Set loading to true"}),e.jsx("li",{children:"Wrap in try-catch"}),e.jsx("li",{children:"Handle errors"}),e.jsx("li",{children:"Update data state"})]})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-700/50 rounded-xl",children:[e.jsx("div",{className:"text-3xl mb-3",children:"üßπ"}),e.jsx("h4",{className:"font-bold mb-2",children:"Cleanup"}),e.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[e.jsx("li",{children:"Use isMounted flag"}),e.jsx("li",{children:"Or AbortController"}),e.jsx("li",{children:"Set loading to false"}),e.jsx("li",{children:"Reset states if needed"})]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-300",children:[e.jsx("strong",{children:"Remember:"})," Always handle loading, success, AND error states!"]})})]})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes slideUp {
          from { 
            opacity: 0;
            transform: translateY(20px);
          }
          to { 
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
          .animate-\\[fadeIn_0\\.8s_ease-out\\],
          .animate-\\[slideUp_0\\.6s_ease-out\\],
          .animate-\\[slideUp_0\\.6s_ease-out_0\\.2s\\],
          .animate-\\[fadeIn_0\\.8s_ease-out_0\\.4s\\],
          .animate-\\[fadeIn_0\\.8s_ease-out_0\\.6s\\],
          .animate-\\[fadeIn_0\\.8s_ease-out_0\\.8s\\],
          .animate-\\[fadeIn_0\\.8s_ease-out_1s\\],
          .animate-\\[fadeIn_0\\.5s_ease-out\\] {
            animation: none;
            opacity: 1;
            transform: none;
          }
          
          .group-hover\\:scale-110,
          .hover\\:scale-105,
          .hover\\:scale-\\[1\\.02\\] {
            transform: none;
          }
          
          .animate-spin {
            animation: none;
          }
        }
        
        .line-clamp-1 {
          overflow: hidden;
          display: -webkit-box;
          -webkit-box-orient: vertical;
          -webkit-line-clamp: 1;
        }
        
        .line-clamp-2 {
          overflow: hidden;
          display: -webkit-box;
          -webkit-box-orient: vertical;
          -webkit-line-clamp: 2;
        }
      `})]})};export{W as default};
