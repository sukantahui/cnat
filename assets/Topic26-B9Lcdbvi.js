import{j as e}from"./index-BFnLuail.js";import{c as i}from"./clsx-B-dksMZM.js";import{S as l}from"./ShellFileLoader-BgOvPFCh.js";import"./prism-DTsTe1iV.js";const g=`#!/bin/bash
# simple_logger.sh ‚Äì basic timestamped logging
LOG_FILE="/var/log/myapp/script.log"

log() {
    local msg="$1"
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $msg" >> "$LOG_FILE"
}

# Ensure log directory exists
mkdir -p "$(dirname "$LOG_FILE")"

log "Script started"
# ... do work ...
log "Script finished"`,m=`#!/bin/bash
# logger_levels.sh ‚Äì configurable log levels

LOG_FILE="/tmp/app.log"
LOG_LEVEL=\${LOG_LEVEL:-INFO}  # default INFO

log_debug() { [[ "$LOG_LEVEL" =~ ^(DEBUG)$ ]] && echo "$(date) DEBUG - $*" >> "$LOG_FILE"; }
log_info()  { [[ "$LOG_LEVEL" =~ ^(DEBUG|INFO)$ ]] && echo "$(date) INFO  - $*" >> "$LOG_FILE"; }
log_warn()  { echo "$(date) WARN  - $*" >> "$LOG_FILE"; }  # always shown
log_error() { echo "$(date) ERROR - $*" >> "$LOG_FILE"; }

log_debug "Loading configuration"
log_info  "Processing file $1"
log_warn  "Deprecated option used"
log_error "Could not open file"`,x=`#!/bin/bash
# logger_command.sh ‚Äì send messages to syslog

# Tag each message with script name and PID
tag="backup_script[$$]"

logger -t "$tag" "Starting nightly backup"
rsync -av /home /backup/
if [ $? -eq 0 ]; then
    logger -t "$tag" -p user.info "Backup successful"
else
    logger -t "$tag" -p user.err "Backup failed ‚Äì see details"
fi`,h=`/var/log/myapp/*.log {\r
    weekly\r
    rotate 4\r
    compress\r
    delaycompress\r
    missingok\r
    notifempty\r
    create 644 root root\r
    postrotate\r
        systemctl reload myapp >/dev/null 2>&1 || true\r
    endscript\r
}`,p=`#!/bin/bash
# manual_rotation.sh ‚Äì rotate a single log file when it exceeds 10M

LOG="$1"
MAX_SIZE=$((10*1024*1024))  # 10 MB

if [ -f "$LOG" ] && [ $(stat -c%s "$LOG") -gt $MAX_SIZE ]; then
    mv "$LOG" "$LOG.$(date +%Y%m%d-%H%M%S)"
    gzip "$LOG".* 2>/dev/null &
    touch "$LOG"
    echo "Rotated $LOG"
fi`,d=document.createElement("style");d.textContent=`
  @keyframes fadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
  }
  @keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to   { transform: translateY(0); opacity: 1; }
  }
`;document.head.appendChild(d);function N(){const r=new Date().getFullYear()-1998,s="motion-safe:animate-[fadeIn_0.6s_ease-out,slideUp_0.6s_ease-out]";return e.jsx("div",{className:"dark",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 leading-relaxed space-y-14",children:[e.jsxs("header",{className:i(s,"space-y-4"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-12 bg-gradient-to-b from-emerald-500 to-teal-400 rounded-full"}),e.jsx("h1",{className:"text-4xl font-light tracking-tight text-gray-800 dark:text-gray-100",children:"Logging Strategies & Basic Log Rotation"})]}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 ml-4 border-l-4 border-emerald-300 pl-5 italic",children:"‚ÄúSilent scripts are hard to debug ‚Äì logs are your script's memory.‚Äù"}),e.jsx(o,{experience:r})]}),e.jsxs(t,{title:"üìù 1. Why Log? ‚Äì The Voice of Your Script",delay:"100",className:s,children:[e.jsxs("p",{className:"mb-3",children:["When Abhronila from Shyamnagar runs a backup cron job at 2‚ÄØAM, she can't watch the output.",e.jsx("strong",{children:" Logging"})," records what happened, when, and whether it succeeded. Logs are used for:"]}),e.jsxs("ul",{className:"list-disc pl-8 space-y-1 text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Auditing"})," ‚Äì Who did what and when."]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Debugging"})," ‚Äì See variable values, error messages."]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Monitoring"})," ‚Äì Detect failures or anomalies."]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Compliance"})," ‚Äì Retain records for security."]})]}),e.jsxs("p",{className:"mt-4",children:["A log entry should contain: ",e.jsx("strong",{children:"timestamp, script name, log level, message"}),"."]}),e.jsxs("div",{className:"mt-8 p-6 bg-gray-50/80 dark:bg-gray-900/60 rounded-2xl border border-gray-200 dark:border-gray-800 hover:shadow-lg transition-shadow duration-300 group",children:[e.jsxs("h3",{className:"text-lg font-medium mb-5 flex items-center gap-2",children:[e.jsx("span",{className:"text-emerald-500",children:"üìã"})," Anatomy of a log line"]}),e.jsx(u,{})]})]}),e.jsxs(t,{title:"üéöÔ∏è 2. Log Levels ‚Äì Prioritize the Noise",delay:"200",className:s,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-2",children:"Typical levels (from least to most severe):"}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("span",{className:"px-2 py-0.5 bg-gray-200 dark:bg-gray-800 rounded",children:"DEBUG"})," ‚Äì Detailed diagnostic info."]}),e.jsxs("li",{children:[e.jsx("span",{className:"px-2 py-0.5 bg-green-200 dark:bg-green-900 rounded",children:"INFO"}),"  ‚Äì Normal operation milestones."]}),e.jsxs("li",{children:[e.jsx("span",{className:"px-2 py-0.5 bg-yellow-200 dark:bg-yellow-900 rounded",children:"WARN"}),"  ‚Äì Unexpected but non‚Äëcritical."]}),e.jsxs("li",{children:[e.jsx("span",{className:"px-2 py-0.5 bg-red-200 dark:bg-red-900 rounded",children:"ERROR"})," ‚Äì Failure that may affect function."]}),e.jsxs("li",{children:[e.jsx("span",{className:"px-2 py-0.5 bg-red-400 dark:bg-red-700 text-white rounded",children:"FATAL"})," ‚Äì Script cannot continue."]})]})]}),e.jsxs("div",{className:"bg-emerald-50/30 dark:bg-emerald-950/30 p-5 rounded-xl border border-emerald-200 dark:border-emerald-900 hover:scale-[1.01] transition-transform",children:[e.jsx("h4",{className:"font-semibold text-emerald-700 dark:text-emerald-300 mb-3",children:"üìå Professional practice"}),e.jsxs("p",{className:"text-sm",children:["Set a configurable ",e.jsx("code",{className:"text-xs",children:"LOG_LEVEL"})," variable. In production, show ",e.jsx("code",{children:"INFO"})," and above; during development, show ",e.jsx("code",{children:"DEBUG"}),"."]})]})]}),e.jsxs(n,{children:[e.jsx("strong",{children:"Observe carefully‚Ä¶"})," ",e.jsx("code",{children:"DEBUG"})," logs can expose passwords if you aren't careful. Always sanitize secrets before writing to a log file."]})]}),e.jsxs(t,{title:"üî® 3. Building a Reusable Logger",delay:"300",className:s,children:[e.jsx("p",{className:"mb-2",children:"Tuhina writes a logger function that adds timestamps and writes to a file."}),e.jsx(l,{fileModule:g,title:"simple_logger.sh ‚Äì timestamp + file",highlightLines:[3,6,7,12]}),e.jsxs("div",{className:"mt-6 p-5 bg-amber-50/70 dark:bg-amber-950/40 rounded-lg border border-amber-300 dark:border-amber-800 flex items-start gap-3",children:[e.jsx("span",{className:"text-amber-700 dark:text-amber-400 text-2xl",children:"üí°"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Industry tip:"})," Use ",e.jsx("code",{children:"readonly LOG_FILE"})," to prevent accidental overwriting. Also, consider rotating the log file within the script if it grows too large."]})]})]}),e.jsxs(t,{title:"‚öñÔ∏è 4. Log Levels in Action",delay:"400",className:s,children:[e.jsx(l,{fileModule:m,title:"logger_levels.sh ‚Äì dynamic level filtering",highlightLines:[1,9,12,17,21,30]}),e.jsxs(n,{children:[e.jsx("strong",{children:"Try changing this‚Ä¶"})," Set ",e.jsx("code",{children:"LOG_LEVEL=DEBUG"})," and see how many messages appear. Debangshu uses this to troubleshoot his Naihati school attendance script."]})]}),e.jsxs(t,{title:"üì° 5. Centralized Logging with logger",delay:"500",className:s,children:[e.jsxs("p",{className:"mb-3",children:["The ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:"logger"})," command sends messages to the system log (syslog). Ideal for scripts that run on servers with centralized log management."]}),e.jsx(l,{fileModule:x,title:"logger_command.sh ‚Äì syslog integration",highlightLines:[4,6,8]}),e.jsxs("p",{className:"mt-3 text-sm text-gray-600 dark:text-gray-400",children:["View with ",e.jsx("code",{children:"journalctl"})," (systemd) or ",e.jsx("code",{children:"/var/log/syslog"}),"."]})]}),e.jsxs(t,{title:"üîÑ 6. Log Rotation ‚Äì Taming Growing Files",delay:"600",className:s,children:[e.jsxs("p",{className:"mb-4",children:["Without rotation, logs consume all disk space. ",e.jsx("strong",{children:"logrotate"})," is the standard tool: it compresses, moves, and deletes old logs according to rules."]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-emerald-700 dark:text-emerald-400 mb-2",children:"üìÅ /etc/logrotate.d/myapp"}),e.jsx(l,{fileModule:h,title:"logrotate_example.conf",highlightLines:[2,4,6,8]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-emerald-700 dark:text-emerald-400 mb-2",children:"‚öôÔ∏è Manual rotation (cron fallback)"}),e.jsx(l,{fileModule:p,title:"manual_rotation.sh",highlightLines:[5,8,12]})]})]}),e.jsxs("p",{className:"mt-5 text-sm bg-blue-50/50 dark:bg-blue-950/30 p-4 rounded border border-blue-300 dark:border-blue-800",children:[e.jsx("strong",{children:"Real‚Äëworld:"})," At Barrackpore‚Äôs IT office, every script writes to ",e.jsx("code",{children:"/var/log/scripts/"}),"and logrotate is configured per application. Swadeep adds a ",e.jsx("code",{children:"postrotate"})," command to reload services."]})]}),e.jsxs("div",{className:i(s,"grid md:grid-cols-2 gap-8","[animation-delay:700ms]"),children:[e.jsxs("div",{className:"bg-red-50/50 dark:bg-red-950/30 p-6 rounded-xl border border-red-200 dark:border-red-900 hover:shadow-md transition",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-700 dark:text-red-400 mb-4 flex items-center gap-2",children:"‚ö†Ô∏è Beginner logging traps"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-sm text-gray-800 dark:text-gray-200",children:[e.jsx("li",{children:"‚ùå Forgetting to redirect stderr ‚Äì errors go to console, not log."}),e.jsx("li",{children:"‚ùå No timestamps ‚Äì ‚ÄúBackup completed‚Äù is useless without context."}),e.jsx("li",{children:"‚ùå Writing logs inside the script's own directory (permission issues)."}),e.jsxs("li",{children:["‚ùå Overwriting log file with ",e.jsx("code",{children:">"})," instead of appending ",e.jsx("code",{children:">>"}),"."]}),e.jsx("li",{children:"‚ùå Not handling log rotation ‚Äì disk fills up silently."}),e.jsx("li",{children:"‚ùå Logging sensitive data (passwords, tokens) in plain text."})]})]}),e.jsxs("div",{className:"bg-green-50/50 dark:bg-green-950/30 p-6 rounded-xl border border-green-200 dark:border-green-900 hover:shadow-md transition",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-700 dark:text-green-400 mb-4 flex items-center gap-2",children:"‚úÖ Professional logging habits"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-sm text-gray-800 dark:text-gray-200",children:[e.jsxs("li",{children:["‚ûï Use a dedicated log directory (e.g., ",e.jsx("code",{children:"/var/log/$(basename $0)/"}),")."]}),e.jsx("li",{children:"‚ûï Always include timestamp, script name, level, and PID."}),e.jsx("li",{children:"‚ûï Make log level configurable via environment variable."}),e.jsxs("li",{children:["‚ûï For cron jobs, ensure output is redirected: ",e.jsx("code",{children:">> /var/log/script.log 2>&1"}),"."]}),e.jsx("li",{children:"‚ûï Implement log rotation ‚Äì either via logrotate or internal size check."}),e.jsxs("li",{children:["‚ûï Mask secrets: ",e.jsx("code",{children:'echo "${PASSWORD//?/*}"'}),"."]})]})]})]}),e.jsxs("div",{className:i(s,"bg-emerald-50/70 dark:bg-emerald-950/40 p-6 rounded-2xl border border-emerald-300 dark:border-emerald-800","[animation-delay:800ms]"),children:[e.jsx("h3",{className:"text-xl font-medium text-emerald-800 dark:text-emerald-300 mb-3 flex items-center gap-2",children:"‚úÖ Mini checklist ‚Äì before you ship your script‚Ä¶"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 text-gray-800 dark:text-gray-200",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:"‚ñπ"})," Log directory exists and is writable?"]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:"‚ñπ"})," Timestamp format is consistent (ISO 8601)?"]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:"‚ñπ"})," Log level can be changed without editing the script?"]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:"‚ñπ"})," Is stderr also captured?"]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:"‚ñπ"})," Does logrotate cover this file?"]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:"‚ñπ"})," Are secrets filtered out?"]})]})]}),e.jsx("div",{className:i(s,"mt-6","[animation-delay:900ms]"),children:e.jsx(o,{experience:r,detailed:!0})})]})})}function t({title:a,delay:r,className:s,children:c}){return e.jsxs("section",{className:i(s,"space-y-4",r&&`motion-safe:[animation-delay:${r}ms]`),children:[e.jsx("h2",{className:"text-2xl font-medium text-gray-800 dark:text-gray-100 border-b border-gray-300 dark:border-gray-700 pb-2",children:a}),c]})}function n({children:a}){return e.jsxs("div",{className:"mt-3 p-4 bg-blue-50/60 dark:bg-blue-950/40 rounded-lg border-l-4 border-blue-400 text-sm text-gray-700 dark:text-gray-200 hover:bg-blue-100/70 dark:hover:bg-blue-900/60 transition-colors",children:["üí≠ ",a]})}function o({experience:a,detailed:r=!1}){const s=e.jsxs("div",{className:"p-5 bg-amber-50/70 dark:bg-amber-950/40 rounded-xl border border-amber-300 dark:border-amber-800 hover:shadow-lg transition-shadow group",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-start",children:[e.jsx("div",{className:"bg-amber-200 dark:bg-amber-800 p-3 rounded-full group-hover:scale-110 transition-transform",children:"üßë‚Äçüè´"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-amber-800 dark:text-amber-300 text-lg",children:"Teacher's Note ‚Äì Sukanta Hui"}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-200 mt-1",children:[a," years of experience (since 1998) ‚Ä¢ Programming Languages, RDBMS, OS, Web Dev",e.jsx("br",{}),e.jsx("span",{className:"font-mono text-xs",children:"üìß sukantahui@codernaccotax.co.in"}),e.jsx("span",{className:"mx-2",children:"‚Ä¢"}),e.jsx("span",{className:"font-mono text-xs",children:"üì± 7003756860"})]})]})]}),r&&e.jsx("div",{className:"mt-4 text-sm text-gray-800 dark:text-gray-100 border-t border-amber-200 dark:border-amber-800 pt-4",children:e.jsxs("p",{className:"italic",children:["‚ÄúIn ",a,"+ years, I've seen servers crash because no one thought logs would grow. Start every script with a logging function. Teach students to ",e.jsx("code",{children:"grep"})," their own logs. At Naihati, we made it a rule: no script goes into production without a log rotation plan.‚Äù"]})})]});return r?s:e.jsx("div",{className:"not-prose",children:s})}function u(){return e.jsxs("svg",{width:"100%",height:"90",viewBox:"0 0 700 90",className:"overflow-visible",children:[e.jsx("rect",{x:"10",y:"30",width:"660",height:"30",rx:"4",className:"fill-gray-100 dark:fill-gray-800 stroke-gray-300 dark:stroke-gray-600 stroke-1"}),e.jsx("rect",{x:"15",y:"30",width:"160",height:"30",rx:"4",className:"fill-indigo-200 dark:fill-indigo-900/70 stroke-indigo-500 stroke-1 group-hover:fill-indigo-300 dark:group-hover:fill-indigo-800 transition-colors"}),e.jsx("text",{x:"30",y:"50",className:"fill-gray-800 dark:fill-gray-200 text-[10px] font-mono",children:"2025-04-12T14:23:01"}),e.jsx("rect",{x:"180",y:"30",width:"120",height:"30",rx:"4",className:"fill-emerald-200 dark:fill-emerald-900/70 stroke-emerald-500 stroke-1 group-hover:fill-emerald-300 dark:group-hover:fill-emerald-800 transition-colors"}),e.jsx("text",{x:"195",y:"50",className:"fill-gray-800 dark:fill-gray-200 text-[10px] font-mono",children:"backup.sh[1234]"}),e.jsx("rect",{x:"305",y:"30",width:"70",height:"30",rx:"4",className:"fill-amber-200 dark:fill-amber-900/70 stroke-amber-500 stroke-1 group-hover:fill-amber-300 dark:group-hover:fill-amber-800 transition-colors"}),e.jsx("text",{x:"320",y:"50",className:"fill-gray-800 dark:fill-gray-200 text-[10px] font-mono font-semibold",children:"INFO"}),e.jsx("rect",{x:"380",y:"30",width:"285",height:"30",rx:"4",className:"fill-gray-200 dark:fill-gray-700 stroke-gray-400 stroke-1 group-hover:fill-gray-300 dark:group-hover:fill-gray-600 transition-colors"}),e.jsx("text",{x:"395",y:"50",className:"fill-gray-800 dark:fill-gray-200 text-[10px] font-mono",children:"Backup of /home completed (2.3 GB)"}),e.jsx("circle",{cx:"650",cy:"45",r:"5",className:"fill-emerald-500",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;0",dur:"2s",repeatCount:"indefinite"})}),e.jsx("text",{x:"660",y:"50",className:"fill-gray-500 dark:fill-gray-400 text-[9px]",children:"log stream"})]})}export{N as default};
