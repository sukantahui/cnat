import{j as e}from"./index-meFSU1Lv.js";import{c as a}from"./clsx-B-dksMZM.js";import{E as i}from"./EditableCCodeBlock-C1aLYO6_.js";const n=`// call_stack_example.c â€“ Demonstrating stack frames with nested calls\r
#include <stdio.h>\r
\r
void func2(int a, int b) {\r
    int z = a + b;\r
    printf("func2: a=%d, b=%d, z=%d (address of z: %p)\\n", a, b, z, (void*)&z);\r
    // func2 returns, its frame is popped\r
}\r
\r
void func1(int x) {\r
    int y = x * 2;\r
    printf("func1: x=%d, y=%d (address of y: %p)\\n", x, y, (void*)&y);\r
    func2(y, 10);\r
    printf("func1: back from func2, y still %d\\n", y);\r
    // func1 returns, its frame is popped\r
}\r
\r
int main() {\r
    int m = 5;\r
    printf("main: m=%d (address of m: %p)\\n", m, (void*)&m);\r
    func1(m);\r
    printf("main: back from func1, m still %d\\n", m);\r
    return 0;\r
}`,x=()=>{const s=new Date().getFullYear()-1998;return e.jsxs("div",{className:"min-h-screen bg-white p-6 text-gray-900 transition-colors duration-300 dark:bg-gray-900 dark:text-gray-200",children:[e.jsxs("header",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"mb-2 text-4xl font-extrabold tracking-tight",children:e.jsx("span",{className:"bg-gradient-to-r from-teal-600 to-emerald-600 bg-clip-text text-transparent dark:from-teal-400 dark:to-emerald-400",children:"Call Stack and Stack Frames in Function Calls"})}),e.jsx("p",{className:"mx-auto max-w-2xl text-lg text-gray-600 dark:text-gray-400",children:"Behind every function call is a stack of frames â€“ like a stack of plates â€“ that keeps track of where to return and what data belongs to each call."})]}),e.jsxs("section",{className:a("mb-12 rounded-xl bg-gray-50 p-6 shadow-md transition-all duration-300 hover:shadow-lg dark:bg-gray-800/50","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"What is the Call Stack?"}),e.jsxs("p",{className:"leading-relaxed",children:["Imagine Abhronila is in the library at Barrackpore CNAT. She's reading a book, then she puts a bookmark and goes to ask the librarian a question. The librarian gives her an answer, and she returns to her book. The bookmark represents a ",e.jsx("strong",{children:"stack frame"}),". When she asks a more detailed question, she places another bookmark. Each function call places a new frame on the stack, storing local variables and the return address. When the function finishes, its frame is popped off, and execution resumes where it left off."]})]}),e.jsx("section",{className:"mb-12 flex justify-center",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-xl bg-gray-100 p-4 dark:bg-gray-800",children:[e.jsxs("svg",{viewBox:"0 0 400 300",className:"w-full",children:[e.jsx("rect",{x:"150",y:"200",width:"100",height:"30",fill:"#4b5563",rx:"4"}),e.jsx("text",{x:"155",y:"220",fill:"white",fontSize:"12",children:"main() frame"}),e.jsx("rect",{x:"150",y:"160",width:"100",height:"30",fill:"#059669",rx:"4"}),e.jsx("text",{x:"155",y:"180",fill:"white",fontSize:"12",children:"func1() frame"}),e.jsx("rect",{x:"150",y:"120",width:"100",height:"30",fill:"#047857",rx:"4"}),e.jsx("text",{x:"155",y:"140",fill:"white",fontSize:"12",children:"func2() frame"}),e.jsx("line",{x1:"260",y1:"135",x2:"280",y2:"135",stroke:"#ef4444",strokeWidth:"2"}),e.jsx("text",{x:"285",y:"140",fill:"#ef4444",fontSize:"12",children:"current"}),e.jsx("text",{x:"270",y:"190",fill:"#6b7280",fontSize:"12",children:"push"}),e.jsx("line",{x1:"265",y1:"175",x2:"265",y2:"160",stroke:"#6b7280",strokeWidth:"2",markerEnd:"url(#arrowhead)"}),e.jsx("text",{x:"270",y:"230",fill:"#6b7280",fontSize:"12",children:"pop"}),e.jsx("line",{x1:"265",y1:"210",x2:"265",y2:"225",stroke:"#6b7280",strokeWidth:"2",markerEnd:"url(#arrowhead)"}),e.jsx("defs",{children:e.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"10",refX:"9",refY:"5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 5, 0 10",fill:"#6b7280"})})}),e.jsx("text",{x:"50",y:"140",fill:"#374151",fontSize:"14",fontWeight:"bold",children:"Top of stack"}),e.jsx("text",{x:"50",y:"220",fill:"#374151",fontSize:"14",fontWeight:"bold",children:"Bottom of stack"})]}),e.jsx("p",{className:"mt-4 text-center text-sm text-gray-600 dark:text-gray-400",children:"Stack grows downward (lower addresses). Each frame holds local variables, parameters, and return address."})]})}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"mb-6 text-2xl font-semibold",children:"Watching the Stack in Action"}),e.jsxs("div",{className:a("rounded-xl border border-teal-200 bg-teal-50/50 p-5 transition-all duration-300 hover:shadow-md dark:border-teal-900 dark:bg-teal-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsxs("h3",{className:"mb-3 flex items-center text-xl font-semibold text-teal-700 dark:text-teal-400",children:[e.jsx("span",{className:"mr-2",children:"ðŸ“š"})," Nested Function Calls"]}),e.jsx(i,{title:"call_stack_example.c â€“ Trace the stack",initialCode:n}),e.jsxs("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:["When ",e.jsx("code",{children:"main()"})," calls ",e.jsx("code",{children:"func1()"}),", a frame for"," ",e.jsx("code",{children:"func1()"})," is pushed. Then ",e.jsx("code",{children:"func1()"})," calls"," ",e.jsx("code",{children:"func2()"}),", pushing another frame. As each function returns, its frame is popped."]})]})]}),e.jsxs("section",{className:a("mb-12 rounded-xl bg-yellow-50/70 p-6 dark:bg-yellow-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold text-yellow-800 dark:text-yellow-300",children:"âš ï¸ Common Pitfalls"}),e.jsxs("ul",{className:"list-inside list-disc space-y-2 text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Stack overflow:"})," Too many nested calls (like infinite recursion) exhaust stack memory."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Returning pointer to local variable:"})," The variable's frame is popped, memory is reused â€“ leads to dangling pointers."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Assuming stack grows upward:"})," On most systems it grows downward, but never rely on direction."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Large local arrays:"})," Can exceed stack size if too large; use heap for big data."]})]})]}),e.jsxs("section",{className:"mb-12 grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:a("rounded-xl bg-blue-50/50 p-5 dark:bg-blue-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h3",{className:"mb-3 text-xl font-semibold text-blue-700 dark:text-blue-300",children:"ðŸ“‹ Do's"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700 dark:text-gray-300",children:[e.jsx("li",{children:"Keep function nesting reasonable (avoid deep recursion)."}),e.jsx("li",{children:"Understand that each call creates new copies of local variables."}),e.jsx("li",{children:"Use static or global variables if data must persist across calls."}),e.jsx("li",{children:"Be mindful of stack size when allocating large local arrays."})]})]}),e.jsxs("div",{className:a("rounded-xl bg-purple-50/50 p-5 dark:bg-purple-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","motion-safe:animation-delay-200ms"),style:{animationDelay:"200ms"},children:[e.jsx("h3",{className:"mb-3 text-xl font-semibold text-purple-700 dark:text-purple-300",children:"ðŸš« Don'ts"}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700 dark:text-gray-300",children:[e.jsx("li",{children:"Return addresses of local variables from functions."}),e.jsx("li",{children:"Assume the stack layout is the same across compilers."}),e.jsx("li",{children:"Write deeply nested calls without understanding the cost."})]})]})]}),e.jsxs("section",{className:a("mb-12 rounded-xl border border-dashed border-indigo-300 bg-indigo-50/30 p-6 dark:border-indigo-700 dark:bg-indigo-900/10","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-3 text-2xl font-semibold text-indigo-800 dark:text-indigo-300",children:"ðŸ’¡ Hint â€“ Think Like a Pro"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Observe carefully:"})," In the example code, each function has its own copy of local variables. When"," ",e.jsx("code",{children:"func2()"})," modifies its ",e.jsx("code",{children:"z"}),", it doesn't affect"," ",e.jsx("code",{children:"func1()"}),"'s ",e.jsx("code",{children:"y"}),". The stack frames keep them separate. ",e.jsx("br",{}),e.jsxs("span",{className:"mt-2 block",children:[e.jsx("strong",{children:"Try changing this:"})," Add a ",e.jsx("code",{children:"printf"})," in each function showing the address of its local variable. Notice how addresses are stacked (either increasing or decreasing depending on your system)."]})]})]}),e.jsxs("section",{className:a("mb-12 rounded-xl bg-emerald-50/50 p-6 dark:bg-emerald-900/20","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]"),children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold text-emerald-800 dark:text-emerald-300",children:"ðŸ§  Tips & Tricks (Professional Edge)"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsxs("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:["ðŸ› Debug with ",e.jsx("code",{children:"backtrace()"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["On Linux, ",e.jsx("code",{children:"backtrace()"})," can print the current call stack â€“ useful for debugging crashes."]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ“ Limit local array size"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["If you need a large array, use ",e.jsx("code",{children:"malloc()"})," to put it on the heap, not the stack."]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ” Understand frame pointers"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["The ",e.jsx("code",{children:"BP"})," (base pointer) register helps navigate stack frames â€“ compilers can omit it for optimisation."]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm dark:bg-gray-800",children:[e.jsx("p",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ« Classroom Shortcut"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"At Naihati CNAT, we use paper cutouts as stack frames. Students physically push and pop frames while tracing code."})]})]})]}),e.jsxs("section",{className:a("mb-12 rounded-xl border-l-4 border-teal-500 bg-teal-50/80 p-6 dark:bg-teal-900/30","motion-safe:animate-[fadeSlideUp_0.6s_ease-out]","transition-all duration-300 hover:border-l-8 hover:shadow-lg"),children:[e.jsx("h2",{className:"mb-3 text-2xl font-semibold text-teal-800 dark:text-teal-300",children:"ðŸ‘¨â€ðŸ« Teacher's Note â€“ Sukanta Hui"}),e.jsxs("div",{className:"flex flex-wrap items-start gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"mb-2 text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Sukanta Hui"})," (email: sukantahui@codernaccotax.co.in , mobile: 7003756860) has been teaching programming since 1998 â€“ that's ",e.jsxs("strong",{children:[s," years"]})," of experience in C, RDBMS, OS, and web development."]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:`"The call stack is one of the most important mental models for any programmer. When students understand that each function call gets its own private space, they stop being surprised by variable behaviour. I always draw the stack on the board, frame by frame, as we trace a program. It's an 'aha!' moment for most."`})]}),e.jsx("div",{className:"rounded-full bg-teal-200 p-3 dark:bg-teal-800",children:e.jsx("svg",{className:"h-12 w-12 text-teal-700 dark:text-teal-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})]}),e.jsxs("section",{className:"rounded-xl bg-gray-100 p-6 dark:bg-gray-800",children:[e.jsx("h2",{className:"mb-4 text-2xl font-semibold",children:"âœ… Mini Checklist"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:["Can I visualise the stack when a function calls another?","Do I understand that each call has its own local variables?","Do I know why returning a pointer to a local variable is dangerous?","Am I aware of stack size limits?","Can I trace a program and predict stack frames?"].map((t,r)=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"âœ“"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t})]},r))})]}),e.jsx("style",{children:`
        @keyframes fadeSlideUp {
          0% {
            opacity: 0;
            transform: translateY(20px);
          }
          100% {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})};export{x as default};
