import{r as t,j as e}from"./index-D1bhWpF_.js";import{c as u}from"./clsx-B-dksMZM.js";const $=()=>{const[l,g]=t.useState(0),[D,V]=t.useState(""),[c,h]=t.useState({name:"Swadeep",age:21,city:"Barrackpore"}),[G,Q]=t.useState([1,2,3]),[r,R]=t.useState("missing"),[U,d]=t.useState(0),[f,p]=t.useState(!1),[b,A]=t.useState(0),[y,j]=t.useState([]),[k,N]=t.useState(!1),[v,w]=t.useState(null),[C,J]=t.useState(!0),[L,P]=t.useState(0),a=t.useRef(0),x=t.useRef(!1),m=t.useRef(null);t.useRef(l);const E=t.useRef(0);t.useEffect(()=>{P(s=>s+1)},[]);const _=()=>{E.current=performance.now()},F=s=>{const o=performance.now()-E.current;j(q=>[...q,{id:Date.now(),description:s,duration:o.toFixed(2),timestamp:new Date().toLocaleTimeString()}].slice(-10))};t.useEffect(()=>{if(r!=="missing")return;const s=setTimeout(()=>{A(l)},3e3);return()=>clearTimeout(s)},[r]),t.useEffect(()=>{if(r==="infinite"&&!x.current&&(console.log("Infinite loop effect running..."),!f)){p(!0),x.current=!0;const s=setInterval(()=>{console.log("Infinite loop simulation - would update counter here")},1e3);return w(s),()=>{clearInterval(s),x.current=!1}}},[l,r]),t.useEffect(()=>{r==="unnecessary"&&(_(),console.log("Unnecessary dependency: Effect runs because user changed:",c),F("Effect with unnecessary dependency ran"),a.current+=1,d(a.current))},[D,c]),t.useEffect(()=>{r==="reference"&&(console.log("Object reference effect running..."),a.current+=1,d(a.current))},[c]);const W=()=>{console.log("Button clicked!")};t.useEffect(()=>{r==="function"&&(console.log("Function reference effect running..."),a.current+=1,d(a.current))},[W]);const[I,K]=t.useState(!1);t.useEffect(()=>{r==="conditional"&&I&&(console.log("Conditional effect running..."),a.current+=1,d(a.current))},[I,r]),t.useEffect(()=>{r==="memory"&&!k&&(console.log("Setting up memory leak..."),N(!0),m.current=setInterval(()=>{console.log("Memory leak interval running...")},1e3))},[r]),t.useEffect(()=>{r==="async"&&(console.log("Async effect starting..."),(async()=>(await new Promise(n=>setTimeout(n,2e3)),console.log("Async operation completed"),C&&g(n=>n+1)))())},[r]),t.useEffect(()=>{r==="correct-missing"&&(console.log("Correct: Counter value in effect:",l),setTimeout(()=>{console.log("Correct: Current counter after timeout:",l)},3e3))},[l]);const z=t.useCallback(()=>{console.log("Memoized button clicked!")},[]);t.useEffect(()=>{r==="correct-function"&&(console.log("Function effect with useCallback"),a.current+=1,d(a.current))},[z]),t.useEffect(()=>{r==="correct-reference"&&(console.log("Effect runs only when user.name changes:",c.name),a.current+=1,d(a.current))},[c.name]),t.useEffect(()=>{if(r==="correct-memory"){console.log("Setting up interval with cleanup...");const s=setInterval(()=>{console.log("Interval running (will be cleaned up)")},1e3);return()=>{console.log("Cleaning up interval"),clearInterval(s)}}},[r]),t.useEffect(()=>{if(r==="correct-async"){console.log("Async effect with cleanup starting...");let s=!0;return(async()=>{await new Promise(o=>setTimeout(o,2e3)),s&&(console.log("Async operation completed safely"),g(o=>o+1))})(),()=>{s=!1,console.log("Async cleanup - preventing state update")}}},[r]);const S=()=>{a.current=0,d(0),j([])},B=()=>{h({...c,timestamp:Date.now()})},H=()=>{h(s=>({...s,name:"Tuhina"}))},M=()=>{m.current&&(clearInterval(m.current),m.current=null,N(!1),console.log("Manually cleaned up memory leak"))},T=()=>{v&&(clearInterval(v),w(null),p(!1),x.current=!1,console.log("Stopped infinite loop simulation"))},i=[{id:"missing",name:"Missing Dependencies",description:"Forgetting to list dependencies that the effect uses",problem:"Stale closures, effects use outdated values",example:`useEffect(() => {
  console.log(counter);
}, []); // âŒ Missing [counter]`,fix:"Add all used values to dependencies",severity:"high",color:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"},{id:"infinite",name:"Infinite Loops",description:"Effect updates its own dependency, causing endless re-runs",problem:"Browser freezes, performance crashes",example:`useEffect(() => {
  setCounter(counter + 1);
}, [counter]); // âŒ Updates dependency`,fix:"Use conditions or functional updates",severity:"critical",color:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"},{id:"unnecessary",name:"Unnecessary Dependencies",description:"Including values that effect doesn't actually use",problem:"Performance issues, unnecessary re-runs",example:`useEffect(() => {
  console.log(searchTerm);
}, [searchTerm, user]); // âŒ user not used`,fix:"Remove unused dependencies",severity:"medium",color:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300"},{id:"reference",name:"Object/Array References",description:"Using objects/arrays as dependencies without memoization",problem:"Effect runs on every render (new reference)",example:`useEffect(() => {
  // ...
}, [user]); // âŒ New object every render`,fix:"Use specific properties or useMemo",severity:"medium",color:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300"},{id:"function",name:"Function References",description:"Using inline functions as dependencies",problem:"Effect runs on every render (new function)",example:`useEffect(() => {
  // ...
}, [() => {}]); // âŒ New function every render`,fix:"Memoize with useCallback or define outside",severity:"medium",color:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300"},{id:"conditional",name:"Conditional Hooks",description:"Calling hooks conditionally (breaks Rules of Hooks)",problem:"React can't track hooks properly",example:`if (condition) {
  useEffect(() => {}); // âŒ Conditional hook
}`,fix:"Move condition inside effect",severity:"critical",color:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"},{id:"memory",name:"Memory Leaks",description:"Forgetting cleanup for subscriptions/intervals",problem:"Memory consumption grows, abandoned callbacks",example:`useEffect(() => {
  setInterval(() => {}, 1000);
  // âŒ No cleanup
}, []);`,fix:"Always return cleanup function",severity:"high",color:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"},{id:"async",name:"Async Effects",description:"Async operations without cleanup/cancellation",problem:"State updates after unmount, race conditions",example:`useEffect(() => {
  fetchData().then(setData);
  // âŒ No cleanup
}, []);`,fix:"Use cleanup flag or AbortController",severity:"medium",color:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300"}],O=[{id:"correct-missing",name:"Proper Dependencies",description:"All used values listed in dependencies",example:`useEffect(() => {
  console.log(counter);
}, [counter]); // âœ…`,color:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300"},{id:"correct-function",name:"Memoized Function",description:"Function memoized with useCallback",example:`const fn = useCallback(() => {}, []);
useEffect(() => {}, [fn]); // âœ…`,color:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300"},{id:"correct-reference",name:"Specific Properties",description:"Watching specific properties, not entire object",example:`useEffect(() => {
  // ...
}, [user.name]); // âœ…`,color:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300"},{id:"correct-memory",name:"Proper Cleanup",description:"Cleanup function for intervals/listeners",example:`useEffect(() => {
  const id = setInterval(...);
  return () => clearInterval(id);
}, []); // âœ…`,color:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300"},{id:"correct-async",name:"Async Cleanup",description:"Cleanup prevents state updates after unmount",example:`useEffect(() => {
  let isMounted = true;
  fetch().then(() => {
    if (isMounted) setData();
  });
  return () => { isMounted = false; };
}, []); // âœ…`,color:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300"}],Y=[{tip:"Use React DevTools",description:"Inspect hooks, see dependency changes",action:"Open Components tab in DevTools"},{tip:"Console.log Dependencies",description:"Log dependencies to see when they change",action:"console.log([dep1, dep2])"},{tip:"Use useWhyDidYouUpdate",description:"Custom hook to track prop/state changes",action:"npm install why-did-you-update"},{tip:"Check ESLint Warnings",description:"exhaustive-deps rule catches most issues",action:"Fix all ESLint warnings"},{tip:"Profile Performance",description:"Use React Profiler to find expensive effects",action:"Record performance in DevTools"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-4 md:p-8 transition-colors duration-300",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-12 animate-[fadeInUp_0.8s_ease-out]",children:[e.jsx("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:e.jsx("span",{className:"text-sm font-semibold text-red-700 dark:text-red-300",children:"Topic 31/46"})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4",children:"Common Dependency Array Mistakes"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 leading-relaxed",children:"Identify, debug, and fix the most common dependency array pitfallsâ€”from infinite loops to memory leaks. Learn to write bulletproof effects that perform well and don't crash your apps."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_0.9s_ease-out]",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-xl",children:"âš ï¸"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Common Dependency Mistakes"})]}),e.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Dependency array mistakes are the #1 source of bugs in React applications. They can cause everything from subtle stale data issues to complete browser crashes."}),e.jsxs("div",{className:"my-8",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 text-center",children:"Mistake Severity Levels"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-24",children:e.jsx("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 text-xs font-semibold rounded-full",children:"Critical"})}),e.jsx("div",{className:"flex-1 h-3 bg-gradient-to-r from-red-500 to-red-300 rounded-full"}),e.jsx("div",{className:"ml-4 text-sm text-gray-600 dark:text-gray-400",children:"Crashes, infinite loops"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-24",children:e.jsx("span",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 text-xs font-semibold rounded-full",children:"High"})}),e.jsx("div",{className:"flex-1 h-3 bg-gradient-to-r from-orange-500 to-orange-300 rounded-full"}),e.jsx("div",{className:"ml-4 text-sm text-gray-600 dark:text-gray-400",children:"Memory leaks, stale data"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-24",children:e.jsx("span",{className:"px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 text-xs font-semibold rounded-full",children:"Medium"})}),e.jsx("div",{className:"flex-1 h-3 bg-gradient-to-r from-yellow-500 to-yellow-300 rounded-full"}),e.jsx("div",{className:"ml-4 text-sm text-gray-600 dark:text-gray-400",children:"Performance issues"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-24",children:e.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-xs font-semibold rounded-full",children:"Low"})}),e.jsx("div",{className:"flex-1 h-3 bg-gradient-to-r from-blue-500 to-blue-300 rounded-full"}),e.jsx("div",{className:"ml-4 text-sm text-gray-600 dark:text-gray-400",children:"Minor inefficiencies"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/10 dark:to-orange-900/10 p-5 rounded-xl my-6",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"ðŸŽ¯ The Golden Rule"}),e.jsx("blockquote",{className:"border-l-4 border-red-500 dark:border-red-400 pl-4 py-2 italic text-gray-700 dark:text-gray-300",children:`"Always use the ESLint exhaustive-deps rule. It catches 95% of dependency mistakes. If you think you need to disable it, you're probably making the other 5%."`})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Real-World Impact"}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 rounded-xl",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"When Abhronila from Ichapur deployed her app, it crashed browsers after 10 minutes. Why? A missing cleanup function created thousands of abandoned intervals."}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mt-2",children:["When Debangshu from Barrackpore's search showed old results, it was a stale closure from missing ",e.jsx("code",{children:"[searchTerm]"})," dependency."]})]})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.0s_ease-out]",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-lg",children:"âœ…"})}),"Correct Patterns & Fixes"]}),e.jsx("div",{className:"space-y-4",children:O.map((s,n)=>e.jsx("div",{className:u("p-4 rounded-xl border-2 transition-all duration-300 hover:scale-[1.02]",s.color.replace("text-","border-").replace("100","300").replace("900/30","700")),children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mr-3 mt-1",children:e.jsx("span",{className:"text-green-600 dark:text-green-400 text-sm",children:"âœ“"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:s.description}),e.jsx("pre",{className:"text-xs bg-gray-900 text-gray-100 p-3 rounded-lg overflow-x-auto",children:s.example})]})]})},s.id))}),e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Professional Checklist"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"âœ“"}),e.jsx("span",{children:"ESLint exhaustive-deps enabled and passing"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"âœ“"}),e.jsx("span",{children:"All used values in dependencies"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"âœ“"}),e.jsx("span",{children:"Cleanup function for subscriptions"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"âœ“"}),e.jsx("span",{children:"Memoized object/function references"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"âœ“"}),e.jsx("span",{children:"Async operations with cancellation"})]})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.1s_ease-out]",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-lg",children:"ðŸ”§"})}),"Debugging Tips & Tools"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Y.map((s,n)=>e.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-700 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 text-sm",children:n+1})}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:s.tip})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:s.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("strong",{children:"Action:"})," ",s.action]})]},n))}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Quick Debug Recipe"}),e.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-2",children:[e.jsx("li",{children:"1. Open browser console (F12)"}),e.jsxs("li",{children:["2. Add ",e.jsx("code",{children:"console.log(deps)"})," to effect"]}),e.jsx("li",{children:"3. Watch what changes trigger effect"}),e.jsx("li",{children:"4. Use React DevTools â†’ Components tab"}),e.jsx("li",{children:"5. Profile with React Profiler"})]})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-gradient-to-br from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.0s_ease-out]",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Mistake Playground"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Select Mistake Type"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:i.map(s=>e.jsxs("button",{onClick:()=>{R(s.id),S(),s.id==="infinite"&&T(),s.id==="memory"&&M()},className:u("p-3 rounded-xl border-2 transition-all duration-300 transform hover:scale-105",r===s.id?"scale-105 ring-2 ring-offset-2 ring-red-500 bg-white dark:bg-gray-800":"hover:shadow-md",s.severity==="critical"?"border-red-300 dark:border-red-700":s.severity==="high"?"border-red-200 dark:border-red-600":s.severity==="medium"?"border-yellow-300 dark:border-yellow-700":"border-blue-300 dark:border-blue-700",r===s.id?"":s.color),children:[e.jsx("div",{className:"text-xs font-semibold text-gray-900 dark:text-white truncate",children:s.name}),e.jsx("div",{className:u("text-[10px] mt-1 truncate",s.severity==="critical"?"text-red-600 dark:text-red-400":s.severity==="high"?"text-red-500 dark:text-red-300":s.severity==="medium"?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400"),children:s.severity.toUpperCase()})]},s.id))})]}),e.jsxs("div",{className:"mb-8 p-6 bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Current State"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:l}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Counter"})]})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:U}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Effect Runs"})]})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:L}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Render Count"})]})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-orange-600 dark:text-orange-400",children:C?"âœ…":"âŒ"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mounted"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx("button",{onClick:()=>g(s=>s+1),className:"py-2 px-4 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg transition-colors duration-300",children:"Increment Counter"}),e.jsx("button",{onClick:B,className:"py-2 px-4 bg-orange-500 hover:bg-orange-600 text-white font-semibold rounded-lg transition-colors duration-300",children:"Update User (New Ref)"}),e.jsx("button",{onClick:H,className:"py-2 px-4 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition-colors duration-300",children:"Change User Name"}),e.jsx("button",{onClick:S,className:"py-2 px-4 bg-gray-500 hover:bg-gray-600 text-white font-semibold rounded-lg transition-colors duration-300",children:"Reset Counters"})]}),r==="memory"&&k&&e.jsxs("div",{className:"mt-4",children:[e.jsx("button",{onClick:M,className:"w-full py-2 px-4 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg transition-colors duration-300",children:"ðŸ”¥ Clean Up Memory Leak (Manually)"}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2 text-center",children:"Interval running without cleanup! Check browser console."})]}),r==="infinite"&&f&&e.jsxs("div",{className:"mt-4",children:[e.jsx("button",{onClick:T,className:"w-full py-2 px-4 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg transition-colors duration-300",children:"âš ï¸ Stop Infinite Loop Simulation"}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2 text-center",children:"Simulating infinite loop pattern"})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:["Current Mistake: ",e.jsx("span",{className:"text-red-600 dark:text-red-400",children:i.find(s=>s.id===r)?.name})]}),r==="missing"&&b>0&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:["Stale value captured: ",b," (should be ",l,")"]})]})]}),i.find(s=>s.id===r)&&e.jsxs("div",{className:"mb-8 p-6 bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4",children:i.find(s=>s.id===r).name}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Description:"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:i.find(s=>s.id===r).description})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Problem:"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:i.find(s=>s.id===r).problem})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Buggy Code:"}),e.jsx("pre",{className:"text-sm bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:i.find(s=>s.id===r).example})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Fix:"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:i.find(s=>s.id===r).fix})]})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.1s_ease-out]",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Performance & Debug Information"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Open Browser Console"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Press ",e.jsx("code",{className:"px-2 py-1 bg-gray-800 text-gray-100 rounded",children:"F12"})," â†’ Console tab to see:"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"Effect execution logs"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"Stale closure demonstrations"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"Memory leak intervals"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"Infinite loop warnings"})]})]})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Performance Log"}),e.jsx("div",{className:"h-40 overflow-y-auto bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3",children:y.length===0?e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400 text-sm",children:"Performance data will appear here"}):e.jsx("div",{className:"space-y-2",children:[...y].reverse().map(s=>e.jsxs("div",{className:"p-2 bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:s.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.duration,"ms"]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.timestamp})]},s.id))})})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"ESLint Rule: exhaustive-deps"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("pre",{className:"text-xs bg-gray-900 text-gray-100 p-3 rounded-lg overflow-x-auto",children:`// ESLint will warn about missing dependencies
useEffect(() => {
  console.log(counter);
}, []); // âš ï¸ React Hook useEffect has missing dependency: 'counter'

// ESLint will warn about unnecessary dependencies  
useEffect(() => {
  console.log(counter);
}, [counter, user]); // âš ï¸ 'user' is unnecessary

// Correct version (no warnings)
useEffect(() => {
  console.log(counter);
}, [counter]); // âœ…`}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Install:"})," ",e.jsx("code",{className:"px-2 py-1 bg-gray-800 text-gray-100 rounded",children:"npm install eslint-plugin-react-hooks"})]})]})]})]})]}),e.jsxs("section",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/10 dark:to-pink-900/10 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.2s_ease-out]",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Prevention Strategies"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Before You Write useEffect"}),e.jsx("div",{className:"space-y-3",children:["1. Do I really need an effect? (Can this be done during render?)","2. What values does this effect read from props/state?","3. Should this run on mount, cleanup, or when dependencies change?","4. Do I need to clean up anything? (timers, subscriptions)","5. Can this effect cause infinite loops?","6. Should I debounce or throttle this effect?"].map((s,n)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center mr-3 mt-1",children:e.jsx("span",{className:"text-purple-600 dark:text-purple-400 text-xs",children:"?"})}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:s})]},n))})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Code Review Checklist"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-green-600 dark:text-green-400 mb-2",children:"âœ… Look For"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:"â€¢ ESLint warnings addressed"}),e.jsx("li",{children:"â€¢ Cleanup functions"}),e.jsx("li",{children:"â€¢ Specific dependencies"}),e.jsx("li",{children:"â€¢ Memoized references"}),e.jsx("li",{children:"â€¢ Debounced effects"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-red-600 dark:text-red-400 mb-2",children:"ðŸš« Flag These"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:"â€¢ Missing dependencies"}),e.jsx("li",{children:"â€¢ setState in effects without conditions"}),e.jsx("li",{children:"â€¢ No cleanup for subscriptions"}),e.jsx("li",{children:"â€¢ Object/array literals in deps"}),e.jsx("li",{children:"â€¢ Async effects without cleanup"})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-purple-100 dark:bg-purple-900/20 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-purple-800 dark:text-purple-300 mb-2",children:"Production Tip"}),e.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-400",children:"In production, use error boundaries to catch effect errors and monitoring to track effect execution times. Effects that take more than 100ms to run should be optimized or broken up."})]})]})]})]})]}),e.jsx("div",{className:"mt-8 bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 rounded-2xl p-6 shadow-lg border-l-4 border-orange-500 dark:border-orange-400 animate-[fadeInUp_1.3s_ease-out]",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 mr-4",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-orange-500 to-amber-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl font-bold",children:"SH"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Teacher's Note"}),e.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:e.jsx("strong",{children:"Dear students from Shyamnagar, Ichapur, and Barrackpore,"})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800/50 p-4 rounded-lg mb-4 border border-orange-200 dark:border-orange-700",children:[e.jsx("h4",{className:"font-semibold text-orange-700 dark:text-orange-400 mb-2",children:"The Debugging Mindset:"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["When Tuhina's app kept showing old search results, we spent hours debugging. Finally, we opened the console and saw the effect running with stale values. The missing ",e.jsx("code",{children:"[searchTerm]"})," dependency was the culprit."]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:[e.jsx("strong",{children:"Always debug with console open."})," See what values your effects actually receive, not what you think they receive."]})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:"After 27 years of debugging applications, I can tell you that dependency mistakes follow patterns. The student from Naihati who fixed 10 bugs in one day? They learned the patterns and knew what to look for."}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:[e.jsx("strong",{children:"Professional Insight:"})," In enterprise teams, we use these practices:"]}),e.jsxs("ul",{className:"space-y-2 text-gray-700 dark:text-gray-300 mb-4",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-orange-500 mr-2",children:"1."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Mandatory ESLint"})," - CI fails on exhaustive-deps warnings"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-orange-500 mr-2",children:"2."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Code review checklist"})," - Every useEffect gets reviewed"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-orange-500 mr-2",children:"3."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Performance budgets"})," - Effects over 16ms get flagged"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-orange-500 mr-2",children:"4."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Automated testing"})," - Test effect cleanup and re-runs"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-orange-200 dark:border-orange-700",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Sukanta Hui"})," Â· 27 years experience Â·",e.jsx("a",{href:"mailto:sukantahui@codernaccotax.co.in",className:"text-orange-600 dark:text-orange-400 hover:underline ml-1",children:"sukantahui@codernaccotax.co.in"})]})})]})]})]})}),e.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 rounded-2xl border border-red-200 dark:border-red-700 animate-[fadeInUp_1.4s_ease-out]",children:[e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"ðŸ”"})}),"Debugging Challenge"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Find the Bug"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Study this code and identify all dependency mistakes:"}),e.jsx("pre",{className:"text-xs bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:`function BuggyComponent() {
  const [count, setCount] = useState(0);
  const [user, setUser] = useState({ name: 'Swadeep' });
  const [items, setItems] = useState([]);
  
  // Mistake 1
  useEffect(() => {
    console.log('Count is:', count);
  }, []);
  
  // Mistake 2  
  useEffect(() => {
    setCount(count + 1);
  }, [count]);
  
  // Mistake 3
  useEffect(() => {
    const id = setInterval(() => {
      console.log('Tick');
    }, 1000);
  }, []);
  
  // Mistake 4
  useEffect(() => {
    fetch('/api/data').then(setItems);
  }, []);
  
  // Mistake 5
  useEffect(() => {
    console.log(user);
  }, [user]);
  
  return <div>Count: {count}</div>;
}`}),e.jsx("div",{className:"mt-3 text-sm text-gray-600 dark:text-gray-400",children:"How many mistakes can you find? Check your answers in the playground above."})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Practical Exercise:"})," In the playground above, try this sequence:"]}),e.jsxs("ol",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 space-y-1",children:[e.jsx("li",{children:'1. Select "Missing Dependencies" mode'}),e.jsx("li",{children:'2. Click "Increment Counter" 5 times'}),e.jsx("li",{children:"3. Wait 3 seconds"}),e.jsx("li",{children:"4. Check what value gets logged (stale vs current)"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-3",children:'Now switch to "Proper Dependencies" mode and repeat. See the difference?'})]})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6 animate-[fadeInUp_1.5s_ease-out]",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"ðŸš«"})}),e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Critical Mistakes"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"Missing dependencies (stale closures)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"Infinite loops (updates own deps)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"No cleanup (memory leaks)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"Conditional hooks (breaks React)"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"âœ…"})}),e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Correct Patterns"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"All used values in deps"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"Cleanup for subscriptions"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"Memoized object/function refs"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"Async cleanup with flags"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"ðŸ”§"})}),e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Debugging Tools"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"ESLint exhaustive-deps rule"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"React DevTools Components tab"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"Console.log dependencies"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"â€¢"}),e.jsx("span",{children:"Performance profiling"})]})]})]})]})]}),e.jsx("style",{children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        /* Respect reduced motion */
        @media (prefers-reduced-motion: reduce) {
          .animate-\\[fadeInUp_0\\.8s_ease-out\\] {
            animation: none;
          }
        }
      `})]})};export{$ as default};
