import{r,j as e}from"./index-CG3iA-Ea.js";import{c as P}from"./clsx-B-dksMZM.js";const Y=()=>{const[u,E]=r.useState(null),[I,g]=r.useState(0),[i,R]=r.useState(null),[T,p]=r.useState(!0),[f,y]=r.useState(null),[j,x]=r.useState([]),[b,D]=r.useState({width:0,height:0}),[N,k]=r.useState(!1),[v,c]=r.useState([]),[L,M]=r.useState(0),[w,S]=r.useState(!0),C=r.useRef(!1),m=r.useRef(null),d=r.useRef([]),z=r.useRef(0),h=r.useRef(`comp-${Date.now()}`);r.useEffect(()=>(console.log("‚úÖ useEffect with [] - Runs ONCE on mount"),E(new Date().toLocaleTimeString()),M(s=>{const a=s+1;return console.log(`Component mounted ${a} time(s)`),a}),C.current=!0,console.log(`Component instance ID: ${h.current}`),()=>{console.log("üßπ Cleanup: Component unmounting"),c(s=>[...s,"Component unmounted"]),C.current=!1}),[]),r.useEffect(()=>(console.log("‚è∞ Timer effect with [] - Setting up interval"),m.current=setInterval(()=>{g(t=>t+1)},1e3),()=>{console.log("üßπ Timer cleanup: Clearing interval"),m.current&&(clearInterval(m.current),m.current=null),c(t=>[...t,"Timer cleared"])}),[]),r.useEffect(()=>(console.log("üåê Data fetching effect with [] - Fetching data once"),(async()=>{p(!0),y(null);try{await new Promise(a=>setTimeout(a,1500));const s={id:1,title:"Component Mount Data",description:"This data was fetched once when the component mounted.",fetchCount:++z.current,timestamp:new Date().toLocaleTimeString(),student:"Swadeep",city:"Barrackpore",courses:["React","JavaScript","CSS"]};R(s),console.log("‚úÖ Data fetched successfully")}catch(s){y("Failed to fetch data"),console.error("‚ùå Error fetching data:",s)}finally{p(!1)}})(),()=>{console.log("üßπ Data fetch cleanup (optional)")}),[]),r.useEffect(()=>{console.log("üîî Event listener effect with [] - Setting up listeners");const t=()=>{const n={width:window.innerWidth,height:window.innerHeight};D(n);const l={type:"resize",timestamp:new Date().toLocaleTimeString(),size:n};d.current=[...d.current,l].slice(-5),x(o=>[...o,l].slice(-5))},s=n=>{const l={type:"keypress",key:n.key,timestamp:new Date().toLocaleTimeString()};d.current=[...d.current,l].slice(-5),x(o=>[...o,l].slice(-5))},a=n=>{const l={type:"click",x:n.clientX,y:n.clientY,timestamp:new Date().toLocaleTimeString()};d.current=[...d.current,l].slice(-5),x(o=>[...o,l].slice(-5))};return window.addEventListener("resize",t),window.addEventListener("keydown",s),window.addEventListener("click",a),t(),()=>{console.log("üßπ Event listener cleanup: Removing all listeners"),window.removeEventListener("resize",t),window.removeEventListener("keydown",s),window.removeEventListener("click",a),c(n=>[...n,"Event listeners removed"])}},[]),r.useEffect(()=>{console.log("üì° Subscription effect with [] - Setting up subscription");const s=(()=>{console.log("üîó Connected to server"),k(!0);const a=setInterval(()=>{const n={id:Date.now(),type:"update",data:`Live update at ${new Date().toLocaleTimeString()}`,from:"server"};console.log("üì® Received:",n)},3e3);return()=>{clearInterval(a),console.log("üîí Disconnected from server"),k(!1)}})();return()=>{console.log("üßπ Subscription cleanup: Disconnecting"),s&&s(),c(a=>[...a,"Subscription disconnected"])}},[]),r.useEffect(()=>{console.log("üíæ localStorage effect with [] - Initializing");const t=localStorage.getItem("react-mount-demo");return t?console.log("üìÅ Found saved data:",t):(console.log("üìÅ No saved data found, initializing..."),localStorage.setItem("react-mount-demo",JSON.stringify({initialized:new Date().toISOString(),componentId:h.current,visits:1}))),()=>{console.log("üßπ localStorage cleanup (optional)")}},[]),r.useEffect(()=>{console.log("üìä Analytics effect with [] - Logging mount");const t={event:"component_mount",component:"Topic28",timestamp:new Date().toISOString(),userId:"student_"+Math.floor(Math.random()*1e3),location:"Barrackpore"};return console.log("üìà Analytics sent:",t),()=>{console.log("üßπ Analytics cleanup")}},[]);const A=()=>{S(!1),setTimeout(()=>{S(!0),c(t=>[...t,"Component remounted"])},1e3)},_=()=>{g(0)},U=()=>{x([]),d.current=[]},W=()=>{c([])},F=[{title:"Data Fetching",description:"Load initial data from API when component mounts",code:`useEffect(() => {
  fetchData();
}, []);`,icon:"üåê"},{title:"Event Listeners",description:"Setup window/document event listeners once",code:`useEffect(() => {
  window.addEventListener(...);
  return () => window.removeEventListener(...);
}, []);`,icon:"üîî"},{title:"Timers/Intervals",description:"Start timers or intervals that should run indefinitely",code:`useEffect(() => {
  const id = setInterval(...);
  return () => clearInterval(id);
}, []);`,icon:"‚è∞"},{title:"Subscriptions",description:"Connect to WebSocket or external data streams",code:`useEffect(() => {
  const sub = subscribe(...);
  return () => unsubscribe(sub);
}, []);`,icon:"üì°"},{title:"Analytics",description:"Log page views or component mounts",code:`useEffect(() => {
  logAnalytics('mount');
}, []);`,icon:"üìä"},{title:"Initialization",description:"Initialize third-party libraries or setup",code:`useEffect(() => {
  library.init(config);
}, []);`,icon:"‚ö°"}],O=[{mistake:"Forgetting cleanup",problem:"Memory leaks from abandoned subscriptions/timers",solution:"Always return cleanup function",code:`// ‚ùå Missing cleanup
useEffect(() => {
  setInterval(() => {}, 1000);
}, []);

// ‚úÖ With cleanup
useEffect(() => {
  const id = setInterval(() => {}, 1000);
  return () => clearInterval(id);
}, []);`},{mistake:"Assuming it runs on every update",problem:"Effect doesn't re-run when props/state change",solution:"Use dependencies if effect should re-run",code:`// ‚ùå Won't update when prop changes
useEffect(() => {
  console.log(props.value); // Only logs initial value
}, []);

// ‚úÖ Updates when prop changes
useEffect(() => {
  console.log(props.value); // Logs current value
}, [props.value]);`},{mistake:"Stale closures",problem:"Effect captures initial values, not current ones",solution:"Use refs or include dependencies",code:`// ‚ùå Captures initial count
useEffect(() => {
  setTimeout(() => {
    console.log(count); // Always logs 0
  }, 3000);
}, []);

// ‚úÖ Use ref for current value
const countRef = useRef(count);
useEffect(() => {
  countRef.current = count;
});

useEffect(() => {
  setTimeout(() => {
    console.log(countRef.current); // Logs current
  }, 3000);
}, []);`},{mistake:"Multiple setup calls",problem:"Effect runs twice in StrictMode (development)",solution:"Make setup idempotent or use ref to track",code:`// ‚ùå May run setup twice in dev
useEffect(() => {
  initializeLibrary(); // Could be called twice
}, []);

// ‚úÖ Check if already initialized
const initialized = useRef(false);
useEffect(() => {
  if (initialized.current) return;
  initializeLibrary();
  initialized.current = true;
}, []);`}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-4 md:p-8 transition-colors duration-300",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-12 animate-[fadeInUp_0.8s_ease-out]",children:[e.jsx("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:e.jsx("span",{className:"text-sm font-semibold text-green-700 dark:text-green-300",children:"Topic 29/46"})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4",children:"useEffect with Empty Dependency Array"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 leading-relaxed",children:"Master the art of one-time setup effects‚Äîlearn when and how to use the empty dependency array for data fetching, subscriptions, timers, and other mount-only operations."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_0.9s_ease-out]",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-xl",children:"üéØ"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"What Does [] Mean?"})]}),e.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:["An ",e.jsx("strong",{children:"empty dependency array"})," (",e.jsx("code",{children:"[]"}),") tells React that your effect",e.jsx("strong",{children:" doesn't depend on any values"})," from props or state, so it only needs to run once‚Äîafter the initial render (mount)."]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 p-5 rounded-xl my-6",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"üéØ Core Principle"}),e.jsx("blockquote",{className:"border-l-4 border-blue-500 dark:border-blue-400 pl-4 py-2 italic text-gray-700 dark:text-gray-300",children:`"The empty array [] is React's way of saying: 'Run this effect once when the component mounts, and clean it up when the component unmounts.'"`})]}),e.jsxs("div",{className:"my-8",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 text-center",children:"Component Mount Lifecycle"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsx("div",{className:"w-full max-w-md p-4 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl border-2 border-gray-300 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-500 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:"1"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Initial Render"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Component function executes"})]})]})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white",children:"‚Üì"})}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"DOM updates"})]}),e.jsx("div",{className:"w-full max-w-md p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl border-2 border-green-500 dark:border-green-400",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:"2"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"useEffect with [] runs"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"One-time setup operations"})]})]})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white",children:"‚Üì"})}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Component is now mounted"})]}),e.jsx("div",{className:"w-full max-w-md p-4 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl border-2 border-purple-300 dark:border-purple-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:"3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Component Active"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ready for user interaction"})]})]})})]}),e.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsx("marker",{id:"arrow-green",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#10b981"})})}),e.jsx("line",{x1:"50%",y1:"80",x2:"50%",y2:"140",stroke:"#3b82f6",strokeWidth:"2",markerEnd:"url(#arrow-green)"}),e.jsx("line",{x1:"50%",y1:"200",x2:"50%",y2:"260",stroke:"#3b82f6",strokeWidth:"2",markerEnd:"url(#arrow-green)"}),e.jsx("line",{x1:"50%",y1:"320",x2:"50%",y2:"380",stroke:"#3b82f6",strokeWidth:"2",markerEnd:"url(#arrow-green)"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Analogy from Barrackpore Classroom"}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 rounded-xl",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Think of Tuhina setting up her classroom at the beginning of the day:"}),e.jsxs("ul",{className:"space-y-2 text-gray-700 dark:text-gray-300 mt-2",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚Ä¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Mount:"})," Arrive, unlock door, turn on lights (once)"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"During class:"})," Teach, answer questions (updates)"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"‚Ä¢"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Unmount:"})," Turn off lights, lock door (cleanup)"]})]})]})]})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.0s_ease-out]",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-lg",children:"üìö"})}),"Common Use Cases for []"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:F.map((t,s)=>e.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"text-2xl mr-3",children:t.icon}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:t.title})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:t.description}),e.jsx("pre",{className:"text-xs bg-gray-900 text-gray-100 p-3 rounded-lg overflow-x-auto",children:t.code})]},s))}),e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"When to Use []"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Ask yourself: ",e.jsx("strong",{children:'"Does this effect need to run only once when the component first appears, or does it need to re-run when certain values change?"'})," If once, use []."]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.1s_ease-out]",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-lg",children:"‚ö†Ô∏è"})}),"Common Mistakes & Pitfalls"]}),e.jsx("div",{className:"space-y-4",children:O.map((t,s)=>e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-200 dark:border-red-700",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mr-3 mt-1",children:e.jsx("span",{className:"text-red-600 dark:text-red-400",children:s+1})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-red-700 dark:text-red-400 mb-1",children:t.mistake}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[e.jsx("strong",{children:"Problem:"})," ",t.problem]}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mb-3",children:[e.jsx("strong",{children:"Solution:"})," ",t.solution]}),e.jsx("pre",{className:"text-xs bg-gray-900 text-gray-100 p-3 rounded-lg overflow-x-auto",children:t.code})]})]})},s))})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-gradient-to-br from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.0s_ease-out]",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Live Empty [] Dashboard"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:L}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mount Count"})]})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:[I,"s"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Timer (from [])"})]})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:N?"üü¢":"üî¥"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:N?"Subscribed":"Disconnected"})]})}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[b.width,"√ó",b.height]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Window Size"})]})})]}),e.jsxs("div",{className:"mb-8 p-6 bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Control Panel"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:A,className:"py-3 px-4 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Simulate Re-mount"}),e.jsx("button",{onClick:_,className:"py-3 px-4 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Reset Timer"}),e.jsx("button",{onClick:U,className:"py-3 px-4 bg-purple-500 hover:bg-purple-600 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Clear Event Logs"}),e.jsx("button",{onClick:W,className:"py-3 px-4 bg-gray-500 hover:bg-gray-600 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Clear Cleanup Log"})]}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:["Component Status: ",e.jsx("span",{className:w?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:w?"Mounted":"Unmounted"})]}),u&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Mounted at: ",e.jsx("span",{className:"font-mono",children:u})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Component ID: ",e.jsx("span",{className:"font-mono text-xs",children:h.current})]})]})]}),e.jsxs("div",{className:"mb-8 p-6 bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"üåê Data Fetching (on mount)"}),T?e.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-2 text-blue-700 dark:text-blue-300",children:"Fetching data on mount..."})]}):f?e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg text-red-700 dark:text-red-400",children:["‚ö†Ô∏è Error: ",f]}):i&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg",children:[e.jsx("h5",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Fetched Data:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Title:"}),e.jsx("span",{className:"font-semibold",children:i.title})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Student:"}),e.jsxs("span",{className:"font-semibold",children:[i.student," (",i.city,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Fetched at:"}),e.jsx("span",{className:"font-semibold",children:i.timestamp})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Fetch count:"}),e.jsx("span",{className:"font-semibold",children:i.fetchCount})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Courses:"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:i.courses.map((t,s)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 text-xs rounded",children:t},s))})]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"This data was fetched once when the component mounted (empty [])."})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.1s_ease-out]",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"üîî Event Listeners (Setup Once)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Active Event Listeners"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"These were set up once on mount (empty []). Try interacting with the page:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"üñ±Ô∏è"}),e.jsx("div",{className:"text-sm",children:"Click anywhere"})]}),e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"‚å®Ô∏è"}),e.jsx("div",{className:"text-sm",children:"Press any key"})]}),e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"üì±"}),e.jsx("div",{className:"text-sm",children:"Resize window"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Recent Events"}),e.jsx("div",{className:"h-40 overflow-y-auto bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4",children:j.length===0?e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400 text-sm",children:"Events will appear here as you interact"}):e.jsx("div",{className:"space-y-2",children:[...j].reverse().map((t,s)=>e.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:P("px-2 py-1 rounded text-xs font-semibold mr-2",t.type==="click"&&"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",t.type==="keypress"&&"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",t.type==="resize"&&"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300"),children:t.type}),t.type==="click"&&e.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["(",t.x,", ",t.y,")"]}),t.type==="keypress"&&e.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Key: ",t.key]}),t.type==="resize"&&e.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:[t.size.width,"√ó",t.size.height]})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.timestamp})]})},s))})})]})]})]}),e.jsxs("section",{className:"bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-900/10 dark:to-orange-900/10 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 animate-[fadeInUp_1.2s_ease-out]",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"üßπ Cleanup Functions (on unmount)"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Cleanup Sequence"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"1"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Component unmounts"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"User navigates away, component removed"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-orange-600 dark:text-orange-400",children:"2"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"React calls cleanup functions"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"All useEffect cleanup functions run"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"3"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Resources freed"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Timers cleared, listeners removed"})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Cleanup Log"}),e.jsx("div",{className:"h-32 overflow-y-auto bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3",children:v.length===0?e.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400 text-sm",children:"Cleanup events will appear here"}):e.jsx("div",{className:"space-y-2",children:[...v].reverse().map((t,s)=>e.jsxs("div",{className:"p-2 bg-red-50 dark:bg-red-900/10 rounded text-sm text-red-700 dark:text-red-400",children:["üßπ ",t]},s))})}),e.jsx("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:"Cleanup runs when component unmounts or when you simulate re-mount."})]}),e.jsxs("div",{className:"p-4 bg-red-100 dark:bg-red-900/20 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Why Cleanup Matters"}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400",children:["Without cleanup, you'll have ",e.jsx("strong",{children:"memory leaks"}),": abandoned intervals keep running, event listeners accumulate, and subscriptions never close. Always clean up what you set up."]})]})]})]})]})]}),e.jsx("div",{className:"mt-8 bg-gradient-to-r from-cyan-50 to-blue-50 dark:from-cyan-900/20 dark:to-blue-900/20 rounded-2xl p-6 shadow-lg border-l-4 border-cyan-500 dark:border-cyan-400 animate-[fadeInUp_1.3s_ease-out]",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 mr-4",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-cyan-500 to-blue-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl font-bold",children:"SH"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Teacher's Note"}),e.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:e.jsx("strong",{children:"Dear students from Shyamnagar, Ichapur, and Naihati,"})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800/50 p-4 rounded-lg mb-4 border border-cyan-200 dark:border-cyan-700",children:[e.jsx("h4",{className:"font-semibold text-cyan-700 dark:text-cyan-400 mb-2",children:"The Mount Mindset:"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["When Abhronila from Barrackpore asked why her app was slow, we discovered she was setting up the same WebSocket connection on every render. The fix? Move it to",e.jsx("code",{children:"useEffect"})," with ",e.jsx("code",{children:"[]"}),"."]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Remember: ",e.jsx("strong",{children:'[] = "Do this once when you arrive, clean up when you leave"'})]})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:"After 27 years of building applications, I can tell you that proper mount/unmount handling is what separates amateur code from professional code. The student from Ichapur who fixed their app's memory leak? They learned to always return cleanup functions."}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:[e.jsx("strong",{children:"Professional Insight:"})," In production applications, we follow these rules:"]}),e.jsxs("ul",{className:"space-y-2 text-gray-700 dark:text-gray-300 mb-4",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-cyan-500 mr-2",children:"1."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Always use [] for setup/teardown"})," - subscriptions, listeners, timers"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-cyan-500 mr-2",children:"2."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Always return cleanup function"})," - prevent memory leaks"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-cyan-500 mr-2",children:"3."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Make setup idempotent"})," - safe to call multiple times (React.StrictMode)"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-cyan-500 mr-2",children:"4."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Test unmount behavior"})," - ensure cleanup works"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-cyan-200 dark:border-cyan-700",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Sukanta Hui"})," ¬∑ 27 years experience ¬∑",e.jsx("a",{href:"mailto:sukantahui@codernaccotax.co.in",className:"text-cyan-600 dark:text-cyan-400 hover:underline ml-1",children:"sukantahui@codernaccotax.co.in"})]})})]})]})]})}),e.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-2xl border border-green-200 dark:border-green-700 animate-[fadeInUp_1.4s_ease-out]",children:[e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"üîç"})}),"Observation Exercise"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Watch the Console"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Open your browser's console (F12 ‚Üí Console tab) and perform these steps:"}),e.jsxs("ol",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mr-3 mt-1 text-xs",children:"1"}),e.jsx("span",{children:'Reload the page - watch all the "Runs ONCE on mount" logs'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mr-3 mt-1 text-xs",children:"2"}),e.jsx("span",{children:'Click "Simulate Re-mount" - watch cleanup then mount logs'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mr-3 mt-1 text-xs",children:"3"}),e.jsx("span",{children:"Notice timer keeps running - it was set up once with []"})]})]})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Critical Question:"}),' What happens to the timer when you click "Simulate Re-mount"? Does it:']}),e.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Keep running with the same interval?"}),e.jsx("li",{children:"‚Ä¢ Stop and restart?"}),e.jsx("li",{children:"‚Ä¢ Create a duplicate timer?"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-3",children:"Check the cleanup log to see what happened."})]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Try this:"}),' Resize your browser window. Notice the event listener (set up once with []) catches it. Now click "Simulate Re-mount" and resize again. What happens?']})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6 animate-[fadeInUp_1.5s_ease-out]",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"‚úÖ"})}),e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"When to Use []"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Data fetching on mount"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Event listener setup"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Timer/interval setup"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Subscription connections"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"üßπ"})}),e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Cleanup Essentials"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Always return cleanup function"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Clear intervals/timers"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Remove event listeners"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Close subscriptions"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"‚ö†Ô∏è"})}),e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Common Mistakes"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Forgetting cleanup (memory leaks)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Using [] when need updates"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Stale closures in callbacks"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-red-500 mr-2",children:"‚Ä¢"}),e.jsx("span",{children:"Non-idempotent setup"})]})]})]})]})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        /* Respect reduced motion */
        @media (prefers-reduced-motion: reduce) {
          .animate-\\[fadeInUp_0\\.8s_ease-out\\] {
            animation: none;
          }
        }
      `})]})};export{Y as default};
